<chao:BaseWindow
    x:Class="Jvedio.Main"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:chao="https://gitee.com/secret/chao-controls"
    xmlns:cmd="clr-namespace:Jvedio.Core.Command"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:ext="clr-namespace:Jvedio.Core.Extensions"
    xmlns:fa="http://schemas.fontawesome.io/icons/"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:lang="clr-namespace:Jvedio.Language;assembly=Jvedio.Language"
    xmlns:local="clr-namespace:Jvedio"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:media="clr-namespace:Jvedio.Core.Media"
    xmlns:p="clr-namespace:Jvedio.Properties"
    xmlns:wpftk="clr-namespace:WpfToolkit.Controls;assembly=VirtualizingWrapPanel"
    Title="Jvedio"
    Width="1100"
    Height="600"
    MinWidth="800"
    MinHeight="500"
    Background="{DynamicResource Window.Background}"
    CanMinimized="True"
    CanResize="True"
    Closed="Window_Closed"
    Closing="Window_Closing"
    ContentRendered="Window_ContentRendered"
    DataContext="{Binding ElementName=main}"
    Foreground="{DynamicResource Window.Foreground}"
    Icon="pack://application:,,,/Resources/Jvedio.ico"
    PreviewKeyUp="Window_PreviewKeyUp"
    TitleAlign="Left"
    TitleHeight="0"
    TitleMargin="5 0"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">


    <chao:BaseWindow.Resources>

        <ContextMenu x:Key="TextBlockContextMenu">
            <MenuItem Click="CopyTextBlock" Header="{x:Static lang:Resources.Copy}" />
        </ContextMenu>




        <!--<local:MovieStampTypeToVisibilityConverter x:Key="MovieStampTypeToVisibilityConverter" />-->
        <local:NullToVisibilityConverter x:Key="NullToVisibilityConverter" />
        <local:NotEqualConverter x:Key="NotEqualConverter" />
        <local:MultiLargerConverter x:Key="MultiLargerConverter" />
        <local:MultiUnitConverter x:Key="MultiUnitConverter" />


        <Style x:Key="ItemsControlVirtualizedWrapPanelStyle" TargetType="ItemsControl">
            <Setter Property="VirtualizingStackPanel.IsVirtualizing" Value="True" />
            <Setter Property="ScrollViewer.CanContentScroll" Value="True" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <wpftk:VirtualizingWrapPanel />
                        <!--<WrapPanel/>-->
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ItemsControl">
                        <Border
                            Padding="{TemplateBinding Control.Padding}"
                            Background="{TemplateBinding Panel.Background}"
                            BorderBrush="{TemplateBinding Border.BorderBrush}"
                            BorderThickness="{TemplateBinding Border.BorderThickness}"
                            SnapsToDevicePixels="True">
                            <ScrollViewer Padding="{TemplateBinding Control.Padding}" Focusable="False">
                                <ItemsPresenter SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                            </ScrollViewer>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ItemsControlVirtualizedStyle" TargetType="ItemsControl">
            <Setter Property="VirtualizingStackPanel.IsVirtualizing" Value="True" />
            <Setter Property="ScrollViewer.CanContentScroll" Value="True" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ItemsControl">
                        <Border
                            Padding="{TemplateBinding Control.Padding}"
                            Background="{TemplateBinding Panel.Background}"
                            BorderBrush="{TemplateBinding Border.BorderBrush}"
                            BorderThickness="{TemplateBinding Border.BorderThickness}"
                            SnapsToDevicePixels="True">
                            <ScrollViewer Padding="{TemplateBinding Control.Padding}" Focusable="False">
                                <ItemsPresenter SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                            </ScrollViewer>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style
            x:Key="MyListBoxItemStyle"
            BasedOn="{StaticResource NormalListBoxItem}"
            TargetType="ListBoxItem">
            <Setter Property="Padding" Value="10,5" />
        </Style>


        <Style
            x:Key="SearchBoxListItemContainerStyle"
            BasedOn="{StaticResource NormalListBoxItem}"
            TargetType="{x:Type ListBoxItem}">
            <Setter Property="Margin" Value="0" />
            <Setter Property="Padding" Value="5" />
            <Setter Property="FontSize" Value="14" />
            <EventSetter Event="MouseDoubleClick" Handler="ListBoxItem_MouseDoubleClick" />
        </Style>

        <!--  ContainerStyle  -->
        <DataTemplate x:Key="StackTemplate">
            <Grid
                Name="rootGrid"
                Margin="5"
                Tag="{Binding ActorID, Mode=OneWay}">
                <Border
                    Name="rootBorder"
                    Width="{Binding ElementName=rootGrid, Path=ActualWidth}"
                    Height="auto"
                    Background="{DynamicResource ListBoxItem.Background}"
                    BorderThickness="2"
                    CornerRadius="0"
                    Cursor="Hand"
                    Effect="{StaticResource BlueDropShadowEffect}"
                    MouseEnter="ActorBorderMouseEnter"
                    MouseLeave="ActorBorderMouseLeave"
                    MouseLeftButtonUp="SelectActor">
                    <Border.ContextMenu>
                        <ContextMenu>

                            <MenuItem
                                Click="DownLoadSelectedActor"
                                Header="{x:Static lang:Resources.SyncInfo}"
                                IsEnabled="False" />

                        </ContextMenu>
                    </Border.ContextMenu>
                </Border>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="auto" />
                    </Grid.ColumnDefinitions>
                    <Image
                        Grid.Column="0"
                        Width="125"
                        Height="125"
                        Margin="2"
                        VerticalAlignment="Top"
                        AllowDrop="True"
                        Cursor="Hand"
                        DragOver="ActorImage_DragOver"
                        Drop="ActorImage_Drop"
                        FocusVisualStyle="{x:Null}"
                        MouseLeftButtonUp="SelectActor"
                        Source="{Binding SmallImage}"
                        Stretch="UniformToFill"
                        Tag="{Binding ActorID}">
                        <Image.ContextMenu>
                            <ContextMenu Tag="{Binding ActorID}">
                                <MenuItem Click="DeleteActors" Header="删除" />
                                <MenuItem Click="OpenActorImagePath" Header="打开头像位置" />
                                <MenuItem
                                    Click="DownLoadSelectedActor"
                                    Header="{x:Static lang:Resources.SyncInfo}"
                                    IsEnabled="False" />

                            </ContextMenu>
                        </Image.ContextMenu>
                    </Image>
                    <Grid Grid.Column="1" Margin="5,0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />

                        </Grid.RowDefinitions>
                        <StackPanel
                            Grid.Row="0"
                            Margin="0,10,0,0"
                            Orientation="Horizontal">
                            <TextBox
                                Name="ActorNameTextBox"
                                MaxHeight="60"
                                Margin="0"
                                HorizontalAlignment="Left"
                                FontSize="18"
                                Foreground="{DynamicResource Global.Foreground}"
                                IsEnabled="{Binding ActorEditMode, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}"
                                Opacity="0.7"
                                Style="{StaticResource ReadOnlyWrapTextBox}"
                                Text="{Binding ActorName}"
                                ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}" />

                            <Label
                                MinWidth="50"
                                MaxHeight="60"
                                Background="{DynamicResource Window.Detail.Background}"
                                BorderThickness="0"
                                Content="{Binding Count}"
                                FontSize="18"
                                Foreground="{DynamicResource Global.Foreground}"
                                Opacity="0.7"
                                ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Content}" />






                        </StackPanel>
                        <hc:Rate
                            Grid.Row="1"
                            Margin="5"
                            VerticalAlignment="Center"
                            AllowClear="True"
                            AllowHalf="True"
                            Background="{DynamicResource Window.Background}"
                            Count="5"
                            Foreground="{DynamicResource Common.HighLight.Deep.Background}"
                            Tag="{Binding ActorID, Mode=OneWay}"
                            ToolTip="{x:Static lang:Resources.DoubleClickToCancel}"
                            ValueChanged="SideActorRate_ValueChanged"
                            Visibility="Visible"
                            Value="{Binding Grade, Mode=TwoWay}" />
                        <StackPanel
                            Grid.Row="2"
                            Margin="0,5"
                            Orientation="Horizontal">
                            <StackPanel.Style>
                                <Style TargetType="StackPanel">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding ElementName=tb, Path=Text}" Value="">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </StackPanel.Style>

                            <TextBox Name="tb" Style="{StaticResource ReadOnlyNoWrapTextBox}">
                                <TextBox.Text>
                                    <MultiBinding Converter="{StaticResource MultiUnitConverter}" ConverterParameter="cm,kg">
                                        <Binding Path="Height" />
                                        <Binding Path="Weight" />
                                        <Binding Path="Birthday" />
                                    </MultiBinding>
                                </TextBox.Text>
                            </TextBox>
                            <Border
                                Margin="10,0"
                                Background="{DynamicResource ListBoxItem.Hover.Background}"
                                CornerRadius="2">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding ElementName=_tb, Path=Text}" Value="">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <TextBox Name="_tb" Style="{StaticResource ReadOnlyNoWrapTextBox}">
                                    <TextBox.Text>
                                        <MultiBinding Converter="{StaticResource MultiLargerConverter}" ConverterParameter="0">
                                            <Binding Path="Chest" />
                                            <Binding Path="Waist" />
                                            <Binding Path="Hipline" />
                                        </MultiBinding>
                                    </TextBox.Text>
                                </TextBox>

                            </Border>
                            <Border
                                Background="{DynamicResource ListBoxItem.Selected.Active.Background}"
                                CornerRadius="20"
                                Visibility="{Binding Cup, Converter={StaticResource NotEqualConverter}, ConverterParameter='Z'}">
                                <TextBox Style="{StaticResource ReadOnlyNoWrapTextBox}" Text="{Binding Cup}" />

                            </Border>

                            <TextBox Style="{StaticResource ReadOnlyNoWrapTextBox}">
                                <TextBox.Text>
                                    <MultiBinding StringFormat="{} {0}  {1}  {2}">
                                        <Binding Path="Country" />
                                        <Binding Path="Nation" />
                                        <Binding Path="BirthPlace" />
                                    </MultiBinding>
                                </TextBox.Text>
                            </TextBox>
                            <Border
                                Margin="10,0"
                                Background="{DynamicResource ListBoxItem.Hover.Background}"
                                CornerRadius="2"
                                Visibility="{Binding Hobby, Converter={StaticResource NullToVisibilityConverter}}">

                                <TextBox Style="{StaticResource ReadOnlyNoWrapTextBox}" Text="{Binding Hobby}" />

                            </Border>
                            <Border
                                Background="{DynamicResource Common.HighLight.Deep.Background}"
                                CornerRadius="5"
                                Visibility="{Binding BloodType, Converter={StaticResource NullToVisibilityConverter}}">
                                <TextBox Style="{StaticResource ReadOnlyNoWrapTextBox}" Text="{Binding BloodType, StringFormat='血型:{0}'}" />

                            </Border>
                        </StackPanel>



                    </Grid>
                    <StackPanel
                        Grid.Column="2"
                        Margin="20,0"
                        VerticalAlignment="Center"
                        Orientation="Vertical">
                        <StackPanel.Style>
                            <Style TargetType="StackPanel">
                                <Setter Property="Visibility" Value="Hidden" />
                                <Style.Triggers>
                                    <MultiDataTrigger>
                                        <MultiDataTrigger.Conditions>
                                            <Condition Binding="{Binding ActorEditMode, Mode=OneWay, Source={x:Static p:Settings.Default}}" Value="False" />
                                            <Condition Binding="{Binding ElementName=rootGrid, Path=IsMouseOver}" Value="True" />
                                        </MultiDataTrigger.Conditions>
                                        <Setter Property="Visibility" Value="Visible" />
                                    </MultiDataTrigger>
                                    <DataTrigger Binding="{Binding ActorEditMode, Mode=OneWay, Source={x:Static p:Settings.Default}}" Value="True">
                                        <Setter Property="Visibility" Value="Hidden" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>
                        <Button
                            MinWidth="100"
                            Click="EditActor"
                            Content="编辑"
                            Tag="{Binding ActorID, Mode=OneWay}" />
                        <Button
                            MinWidth="100"
                            Click="ShowSameActor"
                            Content="查看"
                            Tag="{Binding ActorID, Mode=OneWay}" />
                    </StackPanel>

                </Grid>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="WrapTemplate">
            <Grid
                Name="rootGrid"
                Width="auto"
                Margin="5"
                Tag="{Binding ActorID, Mode=OneWay}">
                <Border
                    Name="rootBorder"
                    Padding="0"
                    Background="{DynamicResource ListBoxItem.Background}"
                    BorderThickness="2"
                    CornerRadius="0 0 2 2 "
                    Effect="{StaticResource BlueDropShadowEffect}" />
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <Grid Grid.Row="0">
                        <Label
                            Grid.Row="2"
                            Margin="5"
                            Padding="10,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            Panel.ZIndex="5"
                            Background="{DynamicResource Window.Detail.Background}"
                            BorderThickness="0"
                            Content="{Binding Count}"
                            FontSize="18"
                            Foreground="{DynamicResource Global.Foreground}"
                            Opacity="0.7"
                            ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Content}" />
                        <Image
                            Width="125"
                            Height="125"
                            Margin="2,2,2,10"
                            VerticalAlignment="Top"
                            AllowDrop="True"
                            Cursor="Hand"
                            DragOver="ActorImage_DragOver"
                            Drop="ActorImage_Drop"
                            FocusVisualStyle="{x:Null}"
                            MouseEnter="ActorBorderMouseEnter"
                            MouseLeave="ActorBorderMouseLeave"
                            MouseLeftButtonUp="SelectActor"
                            Source="{Binding SmallImage}"
                            Stretch="UniformToFill">
                            <Image.ContextMenu>
                                <ContextMenu Tag="{Binding ActorID}">
                                    <MenuItem Click="DeleteActors" Header="删除" />
                                    <MenuItem Click="OpenActorImagePath" Header="打开头像位置" />
                                    <MenuItem
                                        Click="DownLoadSelectedActor"
                                        Header="{x:Static lang:Resources.SyncInfo}"
                                        IsEnabled="False" />

                                </ContextMenu>
                            </Image.ContextMenu>
                        </Image>
                        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Bottom">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="5*" />
                                <ColumnDefinition Width="5*" />
                            </Grid.ColumnDefinitions>
                            <Grid.Style>
                                <Style TargetType="Grid">
                                    <Setter Property="Visibility" Value="Hidden" />
                                    <Style.Triggers>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding ActorEditMode, Mode=OneWay, Source={x:Static p:Settings.Default}}" Value="False" />
                                                <Condition Binding="{Binding ElementName=rootGrid, Path=IsMouseOver}" Value="True" />
                                            </MultiDataTrigger.Conditions>
                                            <Setter Property="Visibility" Value="Visible" />
                                        </MultiDataTrigger>
                                        <DataTrigger Binding="{Binding ActorEditMode, Mode=OneWay, Source={x:Static p:Settings.Default}}" Value="True">
                                            <Setter Property="Visibility" Value="Hidden" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>
                            <Border
                                Grid.Column="0"
                                Height="25"
                                Margin="0"
                                MouseLeftButtonUp="EditActor"
                                Style="{StaticResource BgHoverBorder}"
                                Tag="{Binding ActorID, Mode=OneWay}">

                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    FontWeight="Bold"
                                    Text="编辑" />
                            </Border>
                            <Border
                                Grid.Column="1"
                                Margin="0"
                                MouseLeftButtonUp="ShowSameActor"
                                Style="{StaticResource BgHoverBorder}"
                                Tag="{Binding ActorID, Mode=OneWay}">

                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    FontWeight="Bold"
                                    Text="查看" />
                            </Border>

                        </Grid>
                    </Grid>


                    <TextBox
                        Name="ActorNameTextBox"
                        Grid.Row="1"
                        Width="125"
                        MaxHeight="60"
                        Margin="0,10"
                        FontSize="18"
                        Foreground="{DynamicResource Global.Foreground}"
                        IsEnabled="{Binding ActorEditMode, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}"
                        Opacity="0.7"
                        Style="{StaticResource ReadOnlyWrapTextBox}"
                        Text="{Binding ActorName}"
                        ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}" />


                </Grid>
            </Grid>
        </DataTemplate>

        <Style x:Key="ActorContainerStyle" TargetType="ContentPresenter">
            <Setter Property="ContentTemplate" Value="{StaticResource WrapTemplate}" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding ActorViewMode, Source={x:Static p:Settings.Default}}" Value="1">
                    <Setter Property="ContentTemplate" Value="{StaticResource StackTemplate}" />
                </DataTrigger>
            </Style.Triggers>
        </Style>



        <Style
            x:Key="InfoItemStyle"
            BasedOn="{StaticResource FlatListBoxItem}"
            TargetType="{x:Type ListBoxItem}">
            <Setter Property="Margin" Value="0" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="Background" Value="Red" />
            <!--<Setter Property="ContentTemplate" Value="{StaticResource ListTemplate}" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}}, Path=DataContext.Tile, FallbackValue=False}" Value="True">
                    <Setter Property="ContentTemplate" Value="{StaticResource TileTemplate}" />
                </DataTrigger>
            </Style.Triggers>-->
        </Style>


        <Style x:Key="HoverSpliter" TargetType="GridSplitter">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Margin" Value="0" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard FillBehavior="HoldEnd">
                                <ColorAnimation
                                    Storyboard.TargetProperty="Background.Color"
                                    To="#007FD4"
                                    Duration="0:0:0.2" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation
                                    Storyboard.TargetProperty="Background.Color"
                                    To="Transparent"
                                    Duration="0:0:0.2" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style
            x:Key="ActorInfoTextBlock"
            BasedOn="{StaticResource BaseTextBlock}"
            TargetType="{x:Type TextBlock}">
            <Setter Property="Margin" Value="10,10" />
        </Style>






        <Style
            x:Key="ActorTextBox"
            BasedOn="{StaticResource ReadOnlyWrapTextBox}"
            TargetType="{x:Type TextBox}">
            <Setter Property="Width" Value="100" />
            <Setter Property="TextAlignment" Value="Left" />
            <Setter Property="FontSize" Value="15" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="ContextMenu" Value="{StaticResource TextBoxContextMenu}" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding EnableEditActress}" Value="True">
                    <Setter Property="Background" Value="{DynamicResource Window.Side.Background}" />
                    <Setter Property="IsReadOnly" Value="False" />
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <Style
            x:Key="MenuButton"
            BasedOn="{StaticResource HoverButton}"
            TargetType="{x:Type Button}">
            <Setter Property="Height" Value="40" />
        </Style>

        <Style x:Key="GifImageStyle" TargetType="{x:Type media:GifImage}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}" Value="0">
                    <Setter Property="SourceType" Value="SmallImage" />
                    <Setter Property="Width" Value="{Binding SmallImage_Width, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                    <Setter Property="Height" Value="{Binding SmallImage_Height, Source={x:Static p:Settings.Default}, Mode=OneWay}" />

                </DataTrigger>

                <DataTrigger Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}" Value="1">
                    <Setter Property="SourceType" Value="BigImage" />
                    <Setter Property="Width" Value="{Binding BigImage_Width, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                    <Setter Property="Height" Value="{Binding BigImage_Height, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                </DataTrigger>

                <DataTrigger Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}" Value="2">
                    <Setter Property="SourceType" Value="Gif" />
                    <Setter Property="Width" Value="{Binding GifImage_Width, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                    <Setter Property="Height" Value="{Binding GifImage_Height, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <Style
            x:Key="CenterTextBlock"
            BasedOn="{StaticResource BaseTextBlock}"
            TargetType="{x:Type TextBlock}">
            <Setter Property="Padding" Value="5" />
            <Setter Property="Margin" Value="5" />
            <Setter Property="TextAlignment" Value="Center" />
            <Setter Property="FontSize" Value="20" />
        </Style>


        <Style
            x:Key="ActorBorder"
            BasedOn="{StaticResource SimpleBorder}"
            TargetType="{x:Type Border}">
            <Style.Triggers>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding ActorEditMode, Mode=OneWay, Source={x:Static p:Settings.Default}}" Value="True" />
                        <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Mode=Self}}" Value="True" />
                    </MultiDataTrigger.Conditions>
                    <Setter Property="BorderBrush" Value="{DynamicResource Selected_BorderBrush}" />
                </MultiDataTrigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="HoverCanvas" TargetType="{x:Type Canvas}">
            <Setter Property="Visibility" Value="Hidden" />
            <Style.Triggers>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}" Value="False" />
                        <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType={x:Type Grid}, Mode=FindAncestor}}" Value="True" />
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Visibility" Value="Visible" />
                </MultiDataTrigger>
                <DataTrigger Binding="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}" Value="True">
                    <Setter Property="Visibility" Value="Hidden" />
                </DataTrigger>
            </Style.Triggers>
        </Style>


    </chao:BaseWindow.Resources>


    <Grid AllowDrop="True">


        <!--  长任务遮罩  -->
        <Grid Panel.ZIndex="99" Visibility="{Binding RunningLongTask, Converter={StaticResource bool2VisibilityConverter}, FallbackValue=Hidden}">
            <Border Background="{DynamicResource Global.Background}" Opacity="0.5" />
            <Border
                MinWidth="200"
                MinHeight="100"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Background="{DynamicResource Window.Title.Background}"
                CornerRadius="10">
                <StackPanel Orientation="Horizontal">
                    <hc:LoadingCircle Margin="30,5" Foreground="{DynamicResource Global.Foreground}" />
                    <TextBlock
                        VerticalAlignment="Center"
                        FontSize="20"
                        Text="进行中" />
                </StackPanel>
            </Border>
        </Grid>


        <!--  托盘图标  -->
        <hc:NotifyIcon
            Click="ShowMainWindow"
            Icon="/Jvedio;component/Resources/Jvedio.ico"
            IsBlink="False"
            Text="Jvedio"
            Visibility="{Binding TaskIconVisible, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Visibility}">
            <hc:NotifyIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Click="ShowMainWindow" Header="{x:Static lang:Resources.OpenJvedio}" />
                    <MenuItem Command="cmd:OpenWindow.Settings" Header="{x:Static lang:Resources.Settings}" />
                    <MenuItem
                        Command="cmd:OpenWindow.Upgrade"
                        CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"
                        Header="{x:Static lang:Resources.CheckUpgrade}" />
                    <MenuItem Click="Notify_Close" Header="{x:Static lang:Resources.Exit}" />
                </ContextMenu>
            </hc:NotifyIcon.ContextMenu>
        </hc:NotifyIcon>

        <!--  背景  -->
        <Image
            x:Name="BgImage"
            Margin="0"
            Source="{Binding BackgroundImage}"
            Stretch="UniformToFill" />


        <!--  影片关联编辑弹框  -->
        <Popup
            x:Name="searchDataPopup"
            Width="650"
            Height="500"
            AllowsTransparency="True"
            HorizontalOffset="-5"
            Placement="MousePoint"
            PopupAnimation="Fade"
            StaysOpen="False"
            VerticalOffset="-5">
            <Grid Margin="5">
                <Border
                    Margin="5"
                    Background="{DynamicResource Menu.Background}"
                    CornerRadius="5"
                    Effect="{StaticResource PopupDropShadowEffect}" />
                <Grid Margin="4,5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="auto" />
                    </Grid.RowDefinitions>

                    <chao:SearchBox
                        Name="searchDataBox"
                        Grid.Row="0"
                        Width="auto"
                        Height="30"
                        Margin="0"
                        Padding="3,0"
                        HorizontalAlignment="Stretch"
                        Background="{DynamicResource Window.Side.Background}"
                        BorderBrush="#326CF3"
                        BorderThickness="0"
                        Foreground="{DynamicResource Global.Foreground}"
                        PlaceHolder="搜索标题/路径/识别码"
                        PlaceHolderForeground="{DynamicResource TextBox.PlaceHolder.Foreground}"
                        Search="searchDataBox_Search"
                        SearchOnTextChanged="False"
                        ShowClearButton="True"
                        ShowSearchButton="True" />

                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <Border
                            Grid.Column="0"
                            Margin="0,10"
                            BorderBrush="{DynamicResource Control.Disabled.Background}"
                            BorderThickness="0,0,1,0">
                            <ScrollViewer>
                                <StackPanel Orientation="Vertical">
                                    <chao:TogglePanel
                                        Width="150"
                                        Padding="0,5"
                                        FontSize="15"
                                        Header="已关联"
                                        IsExpanded="True"
                                        LineWidth="0"
                                        Style="{StaticResource BaseTogglePanel}">


                                        <ListBox
                                            Background="Transparent"
                                            ItemContainerStyle="{StaticResource MyListBoxItemStyle}"
                                            ItemsSource="{Binding Path=ExistAssociationDatas, Mode=OneWay, NotifyOnSourceUpdated=True}"
                                            ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                            Style="{StaticResource NormalListBox}">
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <Grid Tag="{Binding DataID}">
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="auto" />
                                                            <RowDefinition Height="auto" />
                                                        </Grid.RowDefinitions>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="auto" />
                                                            <ColumnDefinition Width="auto" />
                                                            <ColumnDefinition Width="*" />
                                                        </Grid.ColumnDefinitions>

                                                        <Button
                                                            Grid.Row="0"
                                                            Grid.RowSpan="2"
                                                            Grid.Column="0"
                                                            Width="20"
                                                            Height="20"
                                                            Margin="0,0,5,0"
                                                            HorizontalAlignment="Left"
                                                            VerticalAlignment="Top"
                                                            Background="Transparent"
                                                            Click="RemoveExistAssociation"
                                                            Style="{StaticResource RoundNormalButton}"
                                                            Tag="{DynamicResource Window.Title.Hover.Background}">
                                                            <Viewbox
                                                                Width="12"
                                                                Height="auto"
                                                                VerticalAlignment="Center">
                                                                <Path
                                                                    HorizontalAlignment="Center"
                                                                    VerticalAlignment="Center"
                                                                    Data="M610.218667 505.6l398.08-387.413333a49.664 49.664 0 0 0 0-71.338667l-2.133334-2.133333a52.992 52.992 0 0 0-73.301333 0L534.784 432.64 136.704 44.373333a52.992 52.992 0 0 0-73.386667 0L61.269333 46.592a48.810667 48.810667 0 0 0 0 71.338667l398.165334 387.669333-398.165334 387.498667a49.664 49.664 0 0 0 0 71.253333l2.218667 2.133333c20.48 19.626667 52.821333 19.626667 73.301333 0l398.08-387.413333 398.08 387.413333c20.48 19.626667 52.906667 19.626667 73.386667 0l2.048-2.133333a49.664 49.664 0 0 0 0-71.253333l-398.08-387.413334z"
                                                                    Fill="{DynamicResource Global.Foreground}" />
                                                            </Viewbox>
                                                        </Button>

                                                        <TextBlock
                                                            Grid.Column="1"
                                                            Padding="0,0,10,0"
                                                            FontWeight="Bold"
                                                            Text="{Binding VID}"
                                                            ToolTip="{Binding VID}" />
                                                        <TextBlock
                                                            Grid.Row="1"
                                                            Grid.Column="1"
                                                            FontSize="12"
                                                            Text="{Binding Title}"
                                                            ToolTip="{Binding Title}" />
                                                    </Grid>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                    </chao:TogglePanel>
                                    <chao:TogglePanel
                                        Width="150"
                                        Padding="0,5"
                                        FontSize="15"
                                        Header="待关联"
                                        IsExpanded="True"
                                        LineWidth="0"
                                        Style="{StaticResource BaseTogglePanel}">
                                        <ListBox
                                            Background="Transparent"
                                            ItemContainerStyle="{StaticResource MyListBoxItemStyle}"
                                            ItemsSource="{Binding Path=AssociationSelectedDatas, Mode=OneWay, NotifyOnSourceUpdated=True}"
                                            ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                            Style="{StaticResource NormalListBox}">
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <Grid Tag="{Binding DataID}">
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="auto" />
                                                            <RowDefinition Height="auto" />
                                                        </Grid.RowDefinitions>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="auto" />
                                                            <ColumnDefinition Width="auto" />
                                                            <ColumnDefinition Width="*" />
                                                        </Grid.ColumnDefinitions>

                                                        <Button
                                                            Grid.Row="0"
                                                            Grid.RowSpan="2"
                                                            Grid.Column="0"
                                                            Width="20"
                                                            Height="20"
                                                            Margin="0,0,5,0"
                                                            HorizontalAlignment="Left"
                                                            VerticalAlignment="Top"
                                                            Background="Transparent"
                                                            Click="RemoveAssociation"
                                                            Style="{StaticResource RoundNormalButton}"
                                                            Tag="{DynamicResource Window.Title.Hover.Background}">
                                                            <Viewbox
                                                                Width="12"
                                                                Height="auto"
                                                                VerticalAlignment="Center">
                                                                <Path
                                                                    HorizontalAlignment="Center"
                                                                    VerticalAlignment="Center"
                                                                    Data="M610.218667 505.6l398.08-387.413333a49.664 49.664 0 0 0 0-71.338667l-2.133334-2.133333a52.992 52.992 0 0 0-73.301333 0L534.784 432.64 136.704 44.373333a52.992 52.992 0 0 0-73.386667 0L61.269333 46.592a48.810667 48.810667 0 0 0 0 71.338667l398.165334 387.669333-398.165334 387.498667a49.664 49.664 0 0 0 0 71.253333l2.218667 2.133333c20.48 19.626667 52.821333 19.626667 73.301333 0l398.08-387.413333 398.08 387.413333c20.48 19.626667 52.906667 19.626667 73.386667 0l2.048-2.133333a49.664 49.664 0 0 0 0-71.253333l-398.08-387.413334z"
                                                                    Fill="{DynamicResource Global.Foreground}" />
                                                            </Viewbox>
                                                        </Button>

                                                        <TextBlock
                                                            Grid.Column="1"
                                                            Padding="0,0,10,0"
                                                            FontWeight="Bold"
                                                            Text="{Binding VID}"
                                                            ToolTip="{Binding VID}" />
                                                        <TextBlock
                                                            Grid.Row="1"
                                                            Grid.Column="1"
                                                            FontSize="12"
                                                            Text="{Binding Title}"
                                                            ToolTip="{Binding Title}" />
                                                    </Grid>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                    </chao:TogglePanel>
                                </StackPanel>
                            </ScrollViewer>

                        </Border>

                        <ScrollViewer
                            Grid.Column="1"
                            CanContentScroll="True"
                            FocusVisualStyle="{x:Null}"
                            IsDeferredScrollingEnabled="False"
                            VerticalScrollBarVisibility="Auto">


                            <ItemsControl
                                Name="assoSearchItemsControl"
                                Margin="5,5,5,5"
                                Background="Transparent"
                                ItemsSource="{Binding AssociationDatas}"
                                ScrollViewer.VerticalScrollBarVisibility="Auto">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <!--  影片加载动画  -->
                                        <DataTemplate.Triggers>
                                            <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <DoubleAnimation
                                                            FillBehavior="Stop"
                                                            Storyboard.TargetName="rootGrid"
                                                            Storyboard.TargetProperty="(UIElement.Opacity)"
                                                            From="0"
                                                            To="1"
                                                            Duration="0:0:0.3" />
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </EventTrigger>
                                        </DataTemplate.Triggers>

                                        <Grid
                                            Name="rootGrid"
                                            Width="200"
                                            Margin="10"
                                            Tag="{Binding DataID, Mode=OneWay}">
                                            <Border Name="rootBorder">
                                                <Border.Style>
                                                    <Style BasedOn="{StaticResource SimpleBorder}" TargetType="Border">
                                                        <Setter Property="Effect" Value="{StaticResource BlueDropShadowEffect}" />
                                                        <Setter Property="BorderThickness" Value="2" />
                                                        <Setter Property="CornerRadius" Value="3" />
                                                        <Setter Property="Margin" Value="0" />
                                                        <Setter Property="MinWidth" Value="200" />
                                                        <Setter Property="Background" Value="{DynamicResource ListBoxItem.Background}" />
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding ElementName=gifImage, Path=IsMouseOver}" Value="True">
                                                                <!--<Setter Property="Background" Value="{DynamicResource Common.HighLight.Background}" />-->
                                                                <Setter Property="BorderBrush" Value="{DynamicResource Common.HighLight.BorderBrush}" />

                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Border.Style>
                                            </Border>
                                            <Grid Margin="0" Tag="{Binding id, Mode=OneWay}">

                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="auto" />
                                                    <RowDefinition Height="auto" />
                                                    <RowDefinition Height="auto" />
                                                    <RowDefinition Height="auto" />
                                                    <RowDefinition Height="auto" />
                                                </Grid.RowDefinitions>
                                                <!--  图片  -->
                                                <Grid Grid.Row="0">
                                                    <media:GifImage
                                                        x:Name="gifImage"
                                                        Width="200"
                                                        Height="136"
                                                        Margin="2"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        BigImageSource="{Binding BigImage, Mode=OneWay}"
                                                        Cursor="Hand"
                                                        MouseEnter="AssoBorderMouseEnter"
                                                        MouseLeave="AssoBorderMouseLeave"
                                                        MouseLeftButtonDown="AddToAssociation"
                                                        SourceType="BigImage"
                                                        Stretch="UniformToFill" />

                                                </Grid>


                                                <!--  ID  -->
                                                <Grid
                                                    Name="idGrid"
                                                    Grid.Row="1"
                                                    Width="auto"
                                                    HorizontalAlignment="Stretch"
                                                    Background="Transparent"
                                                    IsEnabled="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>

                                                    <TextBox
                                                        Grid.Column="0"
                                                        Width="auto"
                                                        Margin="0,5"
                                                        Padding="10,0,0,0"
                                                        HorizontalAlignment="Left"
                                                        VerticalAlignment="Center"
                                                        FontFamily="微软雅黑"
                                                        FontSize="15"
                                                        Foreground="{DynamicResource Global.Foreground}"
                                                        Style="{StaticResource ReadOnlyNoWrapTextBox}"
                                                        Text="{Binding VID, Mode=OneWay}"
                                                        TextAlignment="Left"
                                                        Visibility="{Binding Path=DisplayID, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                                                    <Border
                                                        Grid.Column="1"
                                                        MouseLeftButtonDown="CopyVID"
                                                        Tag="{Binding VID}">
                                                        <Border.Style>
                                                            <Style BasedOn="{StaticResource ToolsBarBorderStyle}" TargetType="Border">
                                                                <Setter Property="Visibility" Value="Hidden" />
                                                                <Setter Property="Margin" Value="0" />
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding ElementName=idGrid, Path=IsMouseOver}" Value="true">
                                                                        <Setter Property="Visibility" Value="Visible" />
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Border.Style>

                                                        <Viewbox Width="auto" Height="13">
                                                            <Path
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"
                                                                Data="M891.072 822.144V167.36a34.432 34.432 0 0 0-34.432-34.432H201.856C201.856 94.848 232.704 64 270.784 64h620.288C929.152 64 960 94.848 960 132.928v620.288c0 38.08-30.848 68.928-68.928 68.928z m-68.928-551.36v620.288c0 38.08-30.848 68.928-68.928 68.928H132.928A68.928 68.928 0 0 1 64 891.072V270.784c0-38.08 30.848-68.928 68.928-68.928h620.288c38.08 0 68.928 30.848 68.928 68.928z m-137.856 137.856H201.856a34.432 34.432 0 0 0 0 68.864h482.432a34.432 34.432 0 0 0 0-68.864z m0 206.72H201.856a34.432 34.432 0 0 0 0 68.864h482.432a34.432 34.432 0 0 0 0-68.864z"
                                                                Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                                        </Viewbox>
                                                    </Border>
                                                </Grid>


                                                <TextBox
                                                    Grid.Row="4"
                                                    Width="200"
                                                    Height="35"
                                                    Margin="10"
                                                    Padding="10,0"
                                                    HorizontalAlignment="Center"
                                                    Background="Transparent"
                                                    FontSize="14"
                                                    Foreground="{DynamicResource Global.Foreground}"
                                                    IsEnabled="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}"
                                                    Opacity="0.5"
                                                    Style="{StaticResource ReadOnlyNoWrapTextBox}"
                                                    Text="{Binding Title, Mode=OneWay}"
                                                    TextAlignment="Left"
                                                    TextWrapping="Wrap"
                                                    ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}"
                                                    Visibility="{Binding Path=DisplayTitle, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}" />


                                            </Grid>
                                        </Grid>

                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>



                    <Grid Grid.Row="2" Margin="5">
                        <StackPanel Orientation="Horizontal">
                            <Button
                                MinWidth="80"
                                HorizontalAlignment="Center"
                                Click="associationCancel"
                                Content="关闭"
                                Style="{StaticResource ButtonDanger}" />
                            <Button
                                MinWidth="80"
                                HorizontalAlignment="Center"
                                Click="associationConfirm"
                                Content="保存"
                                Style="{StaticResource ButtonSuccess}" />
                        </StackPanel>

                        <chao:Pagination
                            Name="assoPagination"
                            Grid.Column="2"
                            HorizontalAlignment="Right"
                            CurrentPageChange="AssoSearchPageChange"
                            PageSizeChange="AssoSearchPageSizeChange"
                            ShowJumpPage="True"
                            Style="{StaticResource NormalPagination}"
                            Total="{Binding AssoSearchTotalCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </Grid>
                </Grid>
            </Grid>
        </Popup>

        <!--  影片关联弹框  -->
        <Popup
            x:Name="AssoDataPopup"
            Width="690"
            Height="auto"
            AllowsTransparency="True"
            HorizontalOffset="-5"
            Placement="MousePoint"
            PopupAnimation="Fade"
            StaysOpen="True"
            VerticalOffset="0">
            <Grid Margin="5">
                <Border
                    Margin="5"
                    Background="{DynamicResource Menu.Background}"
                    CornerRadius="5"
                    Effect="{StaticResource PopupDropShadowEffect}" />

                <StackPanel
                    Margin="25,10"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    Panel.ZIndex="10"
                    Opacity="0.8"
                    Orientation="Horizontal">
                    <Button Click="HideAssoPopup" Content="关闭" />
                    <Border
                        Padding="10,5"
                        VerticalAlignment="Center"
                        Background="{DynamicResource Window.Title.Background}"
                        CornerRadius="5">
                        <TextBlock Text="{Binding ViewAssociationDatas.Count}" />
                    </Border>
                </StackPanel>


                <ScrollViewer
                    Grid.Row="1"
                    Margin="5"
                    CanContentScroll="True"
                    FocusVisualStyle="{x:Null}"
                    HorizontalScrollBarVisibility="Auto"
                    IsDeferredScrollingEnabled="False"
                    PreviewMouseWheel="ScrollViewer_MouseWheel"
                    VerticalScrollBarVisibility="Hidden">
                    <ItemsControl
                        Name="assoItemsControl"
                        Margin="5,5,5,5"
                        Background="Transparent"
                        ItemsSource="{Binding ViewAssociationDatas}"
                        ScrollViewer.VerticalScrollBarVisibility="Auto">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <!--  影片加载动画  -->
                                <DataTemplate.Triggers>
                                    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <DoubleAnimation
                                                    FillBehavior="Stop"
                                                    Storyboard.TargetName="rootGrid"
                                                    Storyboard.TargetProperty="(UIElement.Opacity)"
                                                    From="0"
                                                    To="1"
                                                    Duration="0:0:0.3" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </DataTemplate.Triggers>

                                <Grid
                                    Name="rootGrid"
                                    Margin="10"
                                    Tag="{Binding DataID, Mode=OneWay}">
                                    <Border Name="rootBorder">
                                        <Border.Style>
                                            <Style BasedOn="{StaticResource SimpleBorder}" TargetType="Border">
                                                <Setter Property="Effect" Value="{StaticResource BlueDropShadowEffect}" />
                                                <Setter Property="BorderThickness" Value="2" />
                                                <Setter Property="CornerRadius" Value="3" />
                                                <Setter Property="Margin" Value="0" />
                                                <Setter Property="MinWidth" Value="200" />
                                                <Setter Property="Background" Value="{DynamicResource ListBoxItem.Background}" />

                                            </Style>
                                        </Border.Style>
                                    </Border>
                                    <Grid Margin="0" Tag="{Binding id, Mode=OneWay}">

                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto" />
                                            <RowDefinition Height="auto" />
                                            <RowDefinition Height="auto" />
                                            <RowDefinition Height="auto" />
                                            <RowDefinition Height="auto" />
                                        </Grid.RowDefinitions>
                                        <!--  图片  -->
                                        <Grid Grid.Row="0">

                                            <media:GifImage
                                                x:Name="gifImage"
                                                Width="{Binding BigImage_Width, Source={x:Static p:Settings.Default}, Mode=OneWay}"
                                                Height="{Binding BigImage_Height, Source={x:Static p:Settings.Default}, Mode=OneWay}"
                                                Margin="2"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                BigImageSource="{Binding BigImage, Mode=OneWay}"
                                                ContextMenuOpening="ContextMenu_ContextMenuOpening"
                                                Cursor="Hand"
                                                MouseLeftButtonDown="CanShowDetails"
                                                MouseLeftButtonUp="ShowDetails"
                                                SourceType="BigImage"
                                                Stretch="{Binding Path=MainImageAutoMode, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToImageStretchConverter}, Mode=OneWay}">
                                                <Image.ContextMenu>
                                                    <ContextMenu Opacity="0.9">
                                                        <MenuItem Click="EditInfo" Header="{x:Static lang:Resources.Menu_EditInfo}" />
                                                        <MenuItem Name="TagMenuItems" Header="添加标记" />
                                                        <MenuItem Header="{x:Static lang:Resources.OpenPath}" Visibility="{Binding EditMode, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToOppositeVisibilityConverter}}">
                                                            <MenuItem
                                                                Command="cmd:File.OpenSelectFile"
                                                                CommandParameter="{Binding Path}"
                                                                Header="{x:Static lang:Resources.Movie}" />
                                                            <MenuItem Click="OpenPath" Header="{x:Static lang:Resources.Poster}" />
                                                            <MenuItem Click="OpenPath" Header="{x:Static lang:Resources.Thumbnail}" />
                                                            <MenuItem Click="OpenPath" Header="{x:Static lang:Resources.Preview}" />
                                                            <MenuItem Click="OpenPath" Header="{x:Static lang:Resources.ScreenShot}" />
                                                            <MenuItem Click="OpenPath" Header="GIF" />

                                                        </MenuItem>







                                                    </ContextMenu>
                                                </Image.ContextMenu>
                                            </media:GifImage>

                                            <Button
                                                Height="auto"
                                                Margin="0,5,5,5"
                                                Padding="5"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Bottom"
                                                Click="ShowAssoSubSection"
                                                Cursor="Hand"
                                                IsEnabled="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}"
                                                Style="{StaticResource RoundNormalButton}"
                                                Tag="{DynamicResource Button.Hover.Background}"
                                                Visibility="{Binding HasSubSection, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}">
                                                <Button.ContextMenu>
                                                    <ContextMenu
                                                        Width="100"
                                                        HorizontalOffset="-50"
                                                        VerticalOffset="10" />
                                                </Button.ContextMenu>
                                                <Image
                                                    Width="20"
                                                    Height="20"
                                                    Source="/Resources/Picture/subsection1.png" />
                                            </Button>

                                            <Canvas
                                                Width="40"
                                                Height="40"
                                                Margin="10,0,10,0"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                Cursor="Hand"
                                                MouseLeftButtonUp="PlayAssoVideo"
                                                Opacity="0.5"
                                                Style="{StaticResource HoverCanvas}"
                                                ToolTip="{Binding id, Mode=OneWay}">
                                                <Ellipse
                                                    Canvas.Left="3"
                                                    Canvas.Top="3"
                                                    Width="40"
                                                    Height="40"
                                                    Fill="#DD744C" />
                                                <Polygon
                                                    Cursor="Hand"
                                                    Fill="#F6F7F7"
                                                    Points="15,38 35,25 15,10"
                                                    Stroke="{DynamicResource Menu.Background}" />
                                            </Canvas>

                                        </Grid>


                                        <!--  ID  -->

                                        <!--  标签戳+ID  -->
                                        <Grid
                                            Name="idGrid"
                                            Grid.Row="1"
                                            Width="auto"
                                            HorizontalAlignment="Stretch"
                                            Background="Transparent"
                                            IsEnabled="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="auto" />
                                                <ColumnDefinition Width="auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>

                                            <TextBox
                                                Grid.Column="0"
                                                Width="auto"
                                                Margin="0,5"
                                                Padding="10,0,0,0"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                FontFamily="微软雅黑"
                                                FontSize="15"
                                                Foreground="{DynamicResource Global.Foreground}"
                                                Style="{StaticResource ReadOnlyNoWrapTextBox}"
                                                Text="{Binding VID, Mode=OneWay}"
                                                TextAlignment="Left"
                                                Visibility="{Binding Path=DisplayID, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                                            <Border
                                                Grid.Column="1"
                                                MouseLeftButtonDown="CopyVID"
                                                Tag="{Binding VID}">
                                                <Border.Style>
                                                    <Style BasedOn="{StaticResource ToolsBarBorderStyle}" TargetType="Border">
                                                        <Setter Property="Visibility" Value="Hidden" />
                                                        <Setter Property="Margin" Value="0" />
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding ElementName=idGrid, Path=IsMouseOver}" Value="true">
                                                                <Setter Property="Visibility" Value="Visible" />
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Border.Style>

                                                <Viewbox Width="auto" Height="13">
                                                    <Path
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Data="M891.072 822.144V167.36a34.432 34.432 0 0 0-34.432-34.432H201.856C201.856 94.848 232.704 64 270.784 64h620.288C929.152 64 960 94.848 960 132.928v620.288c0 38.08-30.848 68.928-68.928 68.928z m-68.928-551.36v620.288c0 38.08-30.848 68.928-68.928 68.928H132.928A68.928 68.928 0 0 1 64 891.072V270.784c0-38.08 30.848-68.928 68.928-68.928h620.288c38.08 0 68.928 30.848 68.928 68.928z m-137.856 137.856H201.856a34.432 34.432 0 0 0 0 68.864h482.432a34.432 34.432 0 0 0 0-68.864z m0 206.72H201.856a34.432 34.432 0 0 0 0 68.864h482.432a34.432 34.432 0 0 0 0-68.864z"
                                                        Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                                </Viewbox>
                                            </Border>


                                            <!--  标签戳  -->

                                            <ItemsControl
                                                Grid.Column="2"
                                                Margin="5,5"
                                                HorizontalAlignment="Right"
                                                ItemsSource="{Binding TagStamp}"
                                                Tag="{Binding DataID}"
                                                Visibility="{Binding Path=DisplayStamp, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Label
                                                            Margin="2,0"
                                                            Padding="4"
                                                            Background="{Binding BackgroundBrush}"
                                                            BorderThickness="0"
                                                            Content="{Binding TagName}"
                                                            Foreground="{Binding ForegroundBrush}"
                                                            Tag="{Binding TagID}">
                                                            <Label.ContextMenu>
                                                                <ContextMenu>
                                                                    <MenuItem Click="DeleteVideoTagStamp" Header="删除该标记" />
                                                                </ContextMenu>
                                                            </Label.ContextMenu>
                                                        </Label>

                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>

                                        </Grid>

                                        <!--  日期  -->
                                        <TextBox
                                            Grid.Row="2"
                                            Margin="0,0"
                                            Padding="10,5"
                                            HorizontalAlignment="Left"
                                            Background="Transparent"
                                            FontSize="15"
                                            Foreground="{DynamicResource Global.Foreground}"
                                            Opacity="0.5"
                                            Style="{StaticResource ReadOnlyNoWrapTextBox}"
                                            Text="{Binding ReleaseDate, Mode=OneWay}"
                                            TextAlignment="Left"
                                            Visibility="{Binding Path=DisplayDate, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}" />

                                        <!--  评分  -->
                                        <StackPanel
                                            Grid.Row="3"
                                            Width="auto"
                                            Margin="15,5,0,10"
                                            HorizontalAlignment="Left"
                                            Cursor="Hand"
                                            PreviewMouseLeftButtonDown="StackPanel_PreviewMouseLeftButtonDown"
                                            Tag="{Binding DataID, Mode=OneWay}"
                                            Visibility="{Binding Path=DisplayFavorites, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}">
                                            <hc:Rate
                                                AllowClear="True"
                                                AllowHalf="True"
                                                Background="{DynamicResource Window.Title.Background}"
                                                DefaultValue="0"
                                                Foreground="{DynamicResource Common.HighLight.Deep.Background}"
                                                ItemHeight="15"
                                                ItemMargin="3 0"
                                                ValueChanged="Rate_ValueChanged"
                                                Value="{Binding Grade, Mode=TwoWay}" />
                                        </StackPanel>

                                        <TextBox
                                            Grid.Row="4"
                                            Width="{Binding Path=GlobalImageWidth, Source={x:Static p:Settings.Default}, Converter={StaticResource BiggerWidthConverter}, Mode=OneWay}"
                                            Height="35"
                                            Margin="0,5,0,15"
                                            Padding="10,0"
                                            HorizontalAlignment="Center"
                                            Background="Transparent"
                                            FontSize="14"
                                            Foreground="{DynamicResource Global.Foreground}"
                                            IsEnabled="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}"
                                            MouseLeftButtonDown="CopyText"
                                            Opacity="0.5"
                                            Style="{StaticResource ReadOnlyNoWrapTextBox}"
                                            Text="{Binding Title, Mode=OneWay}"
                                            TextAlignment="Left"
                                            TextWrapping="Wrap"
                                            ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}"
                                            Visibility="{Binding Path=DisplayTitle, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}" />


                                    </Grid>
                                </Grid>

                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>



            </Grid>
        </Popup>

        <Grid Margin="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="30" />
                <RowDefinition Height="*" />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>

            <Border
                x:Name="TitleBorder"
                Grid.Row="0"
                Background="{DynamicResource Window.Title.Background}"
                BorderThickness="0"
                MouseMove="MoveWindow"
                PreviewMouseLeftButtonDown="TopBorder_MouseLeftButtonUp">
                <Border.ContextMenu>
                    <ContextMenu>
                        <MenuItem Click="MinWindow" Header="最小化" />
                        <MenuItem
                            Name="MaxMenuItem"
                            Click="OnMaxWindow"
                            Header="最大化" />
                        <MenuItem Click="CloseWindow" Header="关闭" />
                    </ContextMenu>
                </Border.ContextMenu>
                <Grid Panel.ZIndex="50">


                    <StackPanel
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Orientation="Horizontal">

                        <Border
                            Name="SideTriggerBorder"
                            Margin="5,0"
                            CornerRadius="0"
                            MouseUp="ShowSideGrid"
                            Style="{StaticResource ToolsBarBorderStyle}"
                            ToolTip="{x:Static lang:Resources.Sorting}">

                            <Viewbox Width="auto" Height="14">
                                <Path
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M897.427256 249.003144 126.57172 249.003144c-34.673707 0-62.73174-28.088732-62.73174-62.73174s28.058033-62.73174 62.73174-62.73174l770.855536 0c34.673707 0 62.73174 28.088732 62.73174 62.73174S932.101987 249.003144 897.427256 249.003144z M897.427256 574.73174 126.57172 574.73174c-34.673707 0-62.73174-28.088732-62.73174-62.73174s28.058033-62.73174 62.73174-62.73174l770.855536 0c34.673707 0 62.73174 28.088732 62.73174 62.73174S932.101987 574.73174 897.427256 574.73174z M897.427256 900.460336 126.57172 900.460336c-34.673707 0-62.73174-28.088732-62.73174-62.73174 0-34.643008 28.058033-62.73174 62.73174-62.73174l770.855536 0c34.673707 0 62.73174 28.088732 62.73174 62.73174C960.16002 872.371604 932.101987 900.460336 897.427256 900.460336z"
                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                            </Viewbox>
                        </Border>
                        <Image
                            Height="20"
                            Margin="10,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Source="/Resources/Picture/Jvedio.png" />
                        <Image
                            Height="20"
                            Margin="0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Source="/Resources/Picture/Title.png"
                            ToolTip="Jvedio" />
                    </StackPanel>

                    <StackPanel
                        Name="TitleStackPanel"
                        Grid.Column="1"
                        Height="30"
                        HorizontalAlignment="Right"
                        Orientation="Horizontal">
                        <Button
                            Name="themeButton"
                            Width="40"
                            Click="ShowThemes"
                            Style="{StaticResource NormalButton}"
                            Tag="{DynamicResource Window.Title.Hover.Background}">
                            <Viewbox
                                Width="15"
                                Height="auto"
                                VerticalAlignment="Center">
                                <Path
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M758.35 121.71H704.7c-14.19 0-27.88 6.14-37.04 17.11-27.48 32.81-106.09 54.05-155.61 54.05s-128.13-21.24-155.61-54.05c-9.26-10.98-22.85-17.11-37.04-17.11h-53.75c-13.08 0-25.57 5.23-34.83 14.7L52.56 317.69c-11.48 11.67-11.48 30.5 0 42.17l108.7 110.62c11.48 11.68 30 11.68 41.47 0l3.62-3.62c3.93-3.93 10.57-1.21 10.57 4.43V856.9c0 25.06 19.93 45.39 44.59 45.39h500.95c24.66 0 44.59-20.33 44.59-45.39V471.19c0-5.64 6.64-8.46 10.57-4.43l3.62 3.63c11.48 11.67 30 11.67 41.47 0l108.7-110.62c11.48-11.67 11.48-30.5 0-42.17L793.18 136.31c-9.26-9.36-21.84-14.6-34.83-14.6z"
                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                            </Viewbox>
                        </Button>

                        <Popup
                            x:Name="themesPopup"
                            Width="500"
                            MinHeight="500"
                            MaxHeight="600"
                            AllowsTransparency="True"
                            HorizontalOffset="-300"
                            Placement="Bottom"
                            PlacementTarget="{Binding ElementName=themeButton}"
                            PopupAnimation="Fade"
                            StaysOpen="True"
                            VerticalOffset="0">
                            <Grid Margin="5">
                                <Border
                                    Margin="5"
                                    Background="{DynamicResource Menu.Background}"
                                    CornerRadius="0 0 5 5"
                                    Effect="{StaticResource PopupDropShadowEffect}" />
                                <Grid Margin="5">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="auto" />
                                    </Grid.RowDefinitions>
                                    <TabControl
                                        Background="Transparent"
                                        ItemContainerStyle="{StaticResource FlatTabItem}"
                                        Style="{StaticResource FlatTabControl}">
                                        <TabItem Header="纯色">
                                            <ListBox
                                                Name="colorsListBox"
                                                d:ItemsSource="{d:SampleData ItemCount=5}"
                                                Background="Transparent"
                                                ItemsSource="{Binding ThemesColor}"
                                                Style="{StaticResource NormalListBox}">
                                                <ListBox.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ListBox.ItemsPanel>
                                                <ListBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border
                                                            Width="20"
                                                            Height="20"
                                                            Background="AliceBlue">
                                                            <TextBlock Text="123" />
                                                        </Border>
                                                    </DataTemplate>
                                                </ListBox.ItemTemplate>
                                            </ListBox>
                                        </TabItem>
                                        <TabItem Header="渐变" />
                                        <TabItem Header="图像" />
                                        <TabItem Header="自定义" />
                                    </TabControl>
                                    <StackPanel
                                        Grid.Row="1"
                                        Margin="5"
                                        HorizontalAlignment="Right">
                                        <Button Click="CloseThemePopup" Content="关闭" />
                                    </StackPanel>



                                </Grid>
                            </Grid>
                        </Popup>
                        <Button
                            Width="40"
                            Click="MinWindow"
                            Style="{StaticResource NormalButton}"
                            Tag="{DynamicResource Window.Title.Hover.Background}">
                            <Viewbox
                                Width="12"
                                Height="auto"
                                VerticalAlignment="Center">
                                <Path
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M512 0h6144c307.2 0 512 204.8 512 512s-204.8 512-512 512H512c-307.2 0-512-204.8-512-512s204.8-512 512-512z"
                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                            </Viewbox>
                        </Button>
                        <Button
                            Name="ButtonMax"
                            Width="40"
                            Click="OnMaxWindow"
                            Style="{StaticResource NormalButton}"
                            Tag="{DynamicResource Window.Title.Hover.Background}">
                            <Viewbox
                                Width="12"
                                Height="auto"
                                VerticalAlignment="Center">
                                <Path
                                    x:Name="MaxPath"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M834.688 1024H189.312A189.568 189.568 0 0 1 0 834.688V189.312A189.568 189.568 0 0 1 189.312 0h645.376A189.568 189.568 0 0 1 1024 189.312v645.376A189.482667 189.482667 0 0 1 834.688 1024zM189.312 99.712a89.6 89.6 0 0 0-89.6 89.6v645.376a89.6 89.6 0 0 0 89.6 89.6h645.376a89.6 89.6 0 0 0 89.6-89.6V189.312a89.6 89.6 0 0 0-89.6-89.6z"
                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                            </Viewbox>
                        </Button>
                        <Button
                            Name="ButtonClose"
                            Width="40"
                            Click="CloseWindow"
                            Style="{StaticResource NormalButton}"
                            Tag="{DynamicResource Window.Title.Close.Hover.Background}">
                            <Viewbox
                                Width="12"
                                Height="auto"
                                VerticalAlignment="Center">
                                <Path
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M610.218667 505.6l398.08-387.413333a49.664 49.664 0 0 0 0-71.338667l-2.133334-2.133333a52.992 52.992 0 0 0-73.301333 0L534.784 432.64 136.704 44.373333a52.992 52.992 0 0 0-73.386667 0L61.269333 46.592a48.810667 48.810667 0 0 0 0 71.338667l398.165334 387.669333-398.165334 387.498667a49.664 49.664 0 0 0 0 71.253333l2.218667 2.133333c20.48 19.626667 52.821333 19.626667 73.301333 0l398.08-387.413333 398.08 387.413333c20.48 19.626667 52.906667 19.626667 73.386667 0l2.048-2.133333a49.664 49.664 0 0 0 0-71.253333l-398.08-387.413334z"
                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                            </Viewbox>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <Grid Grid.Row="1">


                <chao:WaitingPanel
                    Panel.ZIndex="5"
                    Cancel="WaitingPanel_Cancel"
                    NoticeText="{x:Static lang:Resources.Wait}"
                    ShowCancelButton="Visible"
                    ShowProgressBar="Collapsed"
                    Visibility="{Binding IsScanning, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Hidden}" />

                <chao:WaitingPanel
                    x:Name="LoadSearchWaitingPanel"
                    Panel.ZIndex="5"
                    Cancel="CancelLoadActor"
                    NoticeText="{x:Static lang:Resources.Wait}"
                    ShowCancelButton="Visible"
                    ShowProgressBar="Visible"
                    Visibility="Hidden" />



                <!--  主界面  -->

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition
                            Name="SideGridColumn"
                            Width="{Binding SideGridWidth, FallbackValue=200, Mode=OneWay}"
                            MaxWidth="500" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <!--  侧边栏  -->
                    <Border
                        x:Name="SideBorder"
                        Grid.Column="0"
                        Background="{DynamicResource Window.Side.Background}"
                        IsEnabled="{Binding IsLoadingMovie, Converter={StaticResource OppositeBooleanConverter}}"
                        SizeChanged="SideBorder_SizeChanged">
                        <Grid>

                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="auto" />

                            </Grid.RowDefinitions>
                            <Grid Grid.Row="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <Border
                                    Grid.Column="0"
                                    Margin="5"
                                    VerticalAlignment="Center"
                                    MouseLeftButtonDown="GoToStartUp"
                                    Style="{StaticResource RoundBorder}"
                                    Tag="{DynamicResource Window.Title.Hover.Background}"
                                    ToolTip="返回">
                                    <Viewbox Width="auto" Height="14">
                                        <Path
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Data="M795.91835938 490.13457031c-49.66523437-60.0609375-111.53320313-102.77578125-179.10878907-123.73857422a439.74755859 439.74755859 0 0 0-102.54902344-19.37988281V162.25859375a30.79335937 30.79335937 0 0 0-11.46972656-27.40429688c-7.91015625-5.47910156-17.74160156-4.12382812-24.40898437 3.27832032L139.31914062 448.32324219a35.08769531 35.08769531 0 0 0-8.92792968 23.33496093c0 9.4359375 3.84257812 18.24960937 10.28320312 23.39121094l340.41972657 312.50742188a17.96748047 17.96748047 0 0 0 23.10820312 3.27832031 32.60039063 32.60039063 0 0 0 11.41347656-27.34804688v-174.3046875c128.03203125 4.63183594 213.74472656 49.77773437 273.80390625 130.0078125 28.81582031 36.66972656 49.94824219 81.36210937 61.47421875 130.29257813 2.71142578 13.78652344 12.825 23.50371094 24.40898438 23.39121094h2.48554687c12.20449219-1.29902344 21.58242187-13.73027344 21.75292969-28.75957032 1.35527344-159.33339844-33.22265625-284.65136719-103.62304688-374.26289062v0.22675781z"
                                            Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                    </Viewbox>
                                </Border>


                                <ComboBox
                                    x:Name="DatabaseComboBox"
                                    Grid.Column="1"
                                    Height="30"
                                    Margin="5"
                                    HorizontalAlignment="Stretch"
                                    Background="{DynamicResource Window.Side.Background}"
                                    BorderBrush="{DynamicResource Window.Side.Hover.Background}"
                                    DisplayMemberPath="Name"
                                    FontSize="16"
                                    Foreground="{DynamicResource Global.Foreground}"
                                    ItemContainerStyle="{StaticResource BaseComboBoxItemStyle}"
                                    ItemsSource="{Binding DataBases}"
                                    SelectedValuePath="DBId"
                                    Style="{StaticResource NormalComboBox}"
                                    Tag="{DynamicResource Window.Side.Hover.Background}"
                                    ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}" />
                            </Grid>



                            <ScrollViewer
                                Grid.Row="1"
                                Width="{Binding ElementName=SideBorder, Path=ActualWidth}"
                                VerticalScrollBarVisibility="Hidden">
                                <Grid Width="{Binding ElementName=SideBorder, Path=ActualWidth}">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="auto" />
                                        <RowDefinition Height="auto" />
                                        <RowDefinition Height="auto" />
                                    </Grid.RowDefinitions>

                                    <chao:TogglePanel
                                        Grid.Row="0"
                                        Width="{Binding ElementName=SideBorder, Path=ActualWidth}"
                                        Padding="0,5"
                                        FontSize="15"
                                        Header="默认"
                                        IsExpanded="True"
                                        IsSelected="False"
                                        LineWidth="0"
                                        Style="{StaticResource BaseTogglePanel}">
                                        <StackPanel Height="auto" VerticalAlignment="Stretch">
                                            <chao:PathRadioButton
                                                Name="AllRadioButton"
                                                Command="{Binding SelectCommand}"
                                                CommandParameter="All"
                                                MainText="{x:Static lang:Resources.AllVideo}"
                                                Path="M63.465962 793.139052c0 55.038524 44.620243 99.708909 99.709933 99.708909l697.969529 0c55.04057 0 99.709933-44.669362 99.709933-99.708909L960.855356 194.878432c0-55.089689-44.669362-99.709933-99.709933-99.709933L163.174871 95.1685c-55.089689 0-99.709933 44.620243-99.709933 99.709933L63.464939 793.139052zM761.435491 494.00823 362.59576 743.283574 362.59576 244.732887 761.435491 494.00823z"
                                                Style="{StaticResource BasePathRadioButton}"
                                                SubText="{Binding AllVideoCount}" />
                                            <chao:PathRadioButton
                                                Command="{Binding SelectCommand}"
                                                CommandParameter="Favorite"
                                                MainText="{x:Static lang:Resources.Favorites}"
                                                Path="M335.008 916.629333c-35.914667 22.314667-82.88 10.773333-104.693333-25.557333a77.333333 77.333333 0 0 1-8.96-57.429333l46.485333-198.24a13.141333 13.141333 0 0 0-4.021333-12.864l-152.16-132.586667c-31.605333-27.52-35.253333-75.648-8.234667-107.733333a75.68 75.68 0 0 1 51.733333-26.752L354.848 339.2c4.352-0.362667 8.245333-3.232 10.026667-7.594667l76.938666-188.170666c16.032-39.2 60.618667-57.92 99.52-41.461334a76.309333 76.309333 0 0 1 40.832 41.461334l76.938667 188.16c1.781333 4.373333 5.674667 7.253333 10.026667 7.605333l199.712 16.277333c41.877333 3.413333 72.885333 40.458667 69.568 82.517334a76.938667 76.938667 0 0 1-26.08 51.978666l-152.16 132.586667c-3.541333 3.082667-5.141333 8.074667-4.021334 12.853333l46.485334 198.24c9.621333 41.013333-15.36 82.336-56.138667 92.224a75.285333 75.285333 0 0 1-57.525333-9.237333l-170.976-106.24a11.296 11.296 0 0 0-12.010667 0l-170.986667 106.24z"
                                                Style="{StaticResource BasePathRadioButton}"
                                                SubText="{Binding FavoriteVideoCount}" />
                                            <chao:PathRadioButton
                                                Command="{Binding SelectCommand}"
                                                CommandParameter="RecentWatch"
                                                MainText="{x:Static lang:Resources.RecentPlay}"
                                                Path="M514.941447 890.533617c75.021176-0.60418 145.170347-21.660501 204.945616-58.36123l65.26431 98.08286a509.889473 509.889473 0 0 1-270.209926 77.026541C235.59169 1007.281788 9.306945 783.413764 9.306945 507.791926 9.306945 232.170089 235.59169 8.302065 514.941447 8.302065c279.966793 0 506.868572 223.868024 506.868572 499.489861 0 7.828632 0 15.040229-0.617035 22.868861l-118.933503-1.20836c0.60418-7.211597 0.60418-13.831869 0.60418-21.056321 0-211.231661-173.823912-382.150366-387.922214-382.150365-214.085448 0-387.318034 171.522885-387.318034 382.150365s173.232586 382.137511 387.318034 382.137511z m444.046693-194.378891L820.528049 514.219374h276.303147L958.975285 696.154726zM696.09265 529.452427c-4.884861 9.641172-14.654582 19.860815-24.411449 29.489133l-176.883377 101.707941c-34.15546 19.256635-78.671967 9.628318-98.198555-24.077221-4.884861-9.628318-9.756867-24.064366-10.965226-33.692684V394.051801c1.20836-38.51327 30.491815-72.822989 75.008321-72.822989 14.654582 0 24.398594 4.820586 34.15546 9.641173l176.883377 101.695086c34.168315 19.256635 44.529362 63.194672 24.398594 96.887356z"
                                                Style="{StaticResource BasePathRadioButton}"
                                                SubText="{Binding RecentWatchCount}">
                                                <chao:PathRadioButton.ContextMenu>
                                                    <ContextMenu>
                                                        <MenuItem Click="ClearRecentWatched" Header="{x:Static lang:Resources.Clear}" />
                                                    </ContextMenu>
                                                </chao:PathRadioButton.ContextMenu>
                                            </chao:PathRadioButton>
                                            <chao:PathRadioButton
                                                Click="ShowActorNotice"
                                                Command="{Binding ShowActorsCommand}"
                                                MainText="影片演员"
                                                Path="M501.8624 532.992c120.2176 0 220.8768-97.8944 220.8768-215.2448 0-120.2176-97.8944-215.2448-220.8768-215.2448s-218.112 95.0272-218.112 215.2448 97.8944 215.2448 218.112 215.2448zM417.9968 572.1088C264.192 572.1088 149.504 675.6352 149.504 826.5728v16.7936c0 78.336 122.9824 78.336 279.552 78.336h164.9664c148.1728 0 279.552 0 279.552-78.336v-16.7936c0-150.9376-114.5856-254.464-268.3904-254.464H417.9968z"
                                                Style="{StaticResource BasePathRadioButton}"
                                                SubText="{Binding AllActorCount}" />
                                            <chao:PathRadioButton
                                                Command="{Binding ShowLabelsCommand}"
                                                MainText="我的标签"
                                                Path="M1009.37559 308.860541l-279.669985-271.075961a136.280853 136.280853 0 0 0-186.679716-1.544011L8.27357 534.460996a25.898606 25.898606 0 0 0-8.215305 20.043015v339.420313a129.900882 129.900882 0 0 0 129.75522 129.959147h351.189758a26.044267 26.044267 0 0 0 18.586401-7.807454l512.11653-523.390725a129.667824 129.667824 0 0 0-2.330584-183.824751zM279.932176 874.318293a116.529161 116.529161 0 1 1 116.529161-116.529161 116.529161 116.529161 0 0 1-116.529161 116.529161z"
                                                Style="{StaticResource BasePathRadioButton}"
                                                SubText="{Binding AllLabelCount}" />
                                            <chao:PathRadioButton
                                                Command="{Binding ShowClassifyCommand}"
                                                MainText="{x:Static lang:Resources.AutoClassification}"
                                                Path="M928.687158 816.316632l64.053895 56.966736-53.733053 60.416-55.457684-49.313684a202.105263 202.105263 0 1 1 45.136842-68.042105zM134.736842 134.736842v242.526316h242.526316V134.736842H134.736842zM53.894737 53.894737h404.210526v404.210526H53.894737V53.894737z m80.842105 565.894737v242.526315h242.526316v-242.526315H134.736842z m-80.842105-80.842106h404.210526v404.210527H53.894737V538.947368zM619.789474 134.736842v242.526316h242.526315V134.736842h-242.526315z m-80.842106-80.842105h404.210527v404.210526H538.947368V53.894737z m202.105264 808.421052a121.263158 121.263158 0 1 0 0-242.526315 121.263158 121.263158 0 0 0 0 242.526315z"
                                                Style="{StaticResource BasePathRadioButton}"
                                                SubText="" />
                                        </StackPanel>
                                    </chao:TogglePanel>
                                    <Grid Grid.Row="1">
                                        <ToggleButton
                                            Width="23"
                                            Height="23"
                                            Margin="0,5,60,0"
                                            Padding="0"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Top"
                                            Panel.ZIndex="20"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Click="SetTagStampsSelected"
                                            IsChecked="True"
                                            Style="{StaticResource FlatToggleButton}">
                                            <Border
                                                Margin="0"
                                                CornerRadius="5"
                                                Tag="{DynamicResource Window.Title.Hover.Background}">
                                                <Viewbox
                                                    Width="14"
                                                    Height="auto"
                                                    VerticalAlignment="Center">
                                                    <Path
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Data="M412.16 738.304a51.2 51.2 0 0 1 0 69.12l-3.072 3.328L210.432 998.4a51.2 51.2 0 0 1-67.072 2.816L140.032 998.4 16.384 880.64a51.2 51.2 0 0 1 67.072-76.8l3.328 2.816 88.832 84.224 164.096-153.6a51.2 51.2 0 0 1 72.448 2.304zM972.8 824.576a51.2 51.2 0 0 1 0 102.4H563.2a51.2 51.2 0 0 1 0-102.4zM412.16 379.904a51.2 51.2 0 0 1 0 69.376l-3.072 3.072L210.432 640a51.2 51.2 0 0 1-67.072 2.816L140.032 640 16.384 522.24a51.2 51.2 0 0 1 67.072-76.8l3.328 2.816 88.832 84.48 164.096-153.6a51.2 51.2 0 0 1 72.448 2.048zM972.8 466.176a51.2 51.2 0 0 1 0 102.4H563.2a51.2 51.2 0 0 1 0-102.4zM412.16 21.76a51.2 51.2 0 0 1 0 69.12l-2.56 3.072L210.432 281.6a51.2 51.2 0 0 1-67.072 2.816L140.032 281.6 16.384 163.84a51.2 51.2 0 0 1 67.072-76.8l3.328 3.072L175.616 174.08l164.096-153.6a51.2 51.2 0 0 1 72.448 1.28zM972.8 108.032a51.2 51.2 0 0 1 44.288 76.8 51.2 51.2 0 0 1-44.288 25.6H563.2a51.2 51.2 0 0 1-44.288-25.6 51.2 51.2 0 0 1 44.288-76.8z m0 0"
                                                        Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                                </Viewbox>

                                            </Border>
                                        </ToggleButton>
                                        <Border
                                            Width="25"
                                            Height="25"
                                            Margin="0,5,30,0"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Top"
                                            Panel.ZIndex="20"
                                            CornerRadius="5"
                                            PreviewMouseLeftButtonUp="ShowHelpTagStamp"
                                            Style="{StaticResource RoundBorder}"
                                            Tag="{DynamicResource Window.Title.Hover.Background}">
                                            <Viewbox
                                                Width="14"
                                                Height="auto"
                                                VerticalAlignment="Center">
                                                <Path
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Data="M563.363941 572.337203c-0.662107-10.635221 5.985569-21.937638 19.948145-33.908274 13.962576-11.964496 29.591164-25.264407 46.879625-39.893592 17.288461-14.628162 33.242474-31.083949 47.872273-49.365314 14.630823-18.286482 22.606806-39.397289 23.936137-63.332421 1.330354-25.932626-1.329331-50.199309-7.977007-72.810283-6.647676-22.604834-17.620026-42.050722-32.910909-58.33971-15.297023-16.290011-35.079386-29.258371-59.347087-38.900985-24.267702-9.636474-52.694294-14.45727-85.274661-14.45727-40.563514 0-74.308452 7.148817-101.239931 21.441335-26.925339 14.293541-48.705279 31.581276-65.326516 51.864228-16.621237 20.276812-28.26081 41.222867-34.908486 62.829977-6.647676 21.60711-9.641996 39.727817-8.974772 54.358025 0.662107 17.282618 6.150328 29.92045 16.455454 37.897122 10.305126 7.976672 21.442235 12.135388 33.413373 12.466939 11.964998 0.331551 22.937348-2.989077 32.910909-9.973142 9.973561-6.984065 14.960341-17.121959 14.960341-30.416753 0-7.982812 2.493902-17.790178 7.480682-29.424146s11.805356-22.771633 20.450609-33.411971c8.643207-10.635221 19.115139-19.615757 31.416819-26.924209 12.30168-7.315616 26.098473-10.971889 41.39038-10.971889 29.921706 0 53.857842 7.480368 71.81455 22.440082 17.950567 14.959713 26.263233 33.742499 24.934925 56.348356 0 11.302417-3.325885 21.772886-9.973561 31.4155-6.652793 9.642614-15.131241 18.948561-25.43739 27.929096-10.304103 8.974395-21.276452 17.949814-32.910909 26.924209-11.639573 8.974395-22.606806 18.286482-32.917049 27.929096-10.304103 9.636474-18.949356 20.111037-25.927574 31.4155-6.984358 11.302417-10.806567 23.603581-11.474814 36.898375l0.998789 37.903262c0 9.973142 4.656239 19.444864 13.962576 28.4254 9.311454 8.975419 21.613134 13.796214 36.906064 14.458293 15.29293-0.662079 27.427804-5.64865 36.403599-14.959713 8.974772-9.30697 13.134686-19.947308 12.467463-31.911804L563.365987 572.337203zM512.496324 817.685098c17.289484 0 31.753501-5.814426 43.387957-17.453511 11.639573-11.633968 17.454243-25.761734 17.454243-42.387389 0-17.287735-5.81467-31.747051-17.454243-43.386136-11.634456-11.633968-26.098473-17.453511-43.387957-17.453511-17.283344 0-31.747361 5.819542-43.381817 17.453511-11.639573 11.639085-17.454243 26.098401-17.454243 43.386136 0 16.625656 5.81467 30.753421 17.454243 42.387389C480.748964 811.870672 495.212981 817.685098 512.496324 817.685098zM511.503676 65.687048c61.834849 0 119.851582 11.799744 174.04099 35.403325 54.194524 23.604604 101.570473 55.522548 142.127847 95.746668 40.56249 40.225143 72.476657 87.433328 95.750687 141.625578 23.27403 54.187133 34.908486 112.201431 34.908486 174.033685 0 61.838394-11.634456 119.6818-34.908486 173.543521-23.27403 53.855582-55.188196 101.063767-95.750687 141.619438-40.557374 40.560788-87.933322 72.473615-142.127847 95.746668-54.189408 23.273053-112.206141 34.907021-174.04099 34.907021-61.840989 0-119.686823-11.633968-173.550806-34.907021-53.857842-23.273053-101.068009-55.18588-141.625382-95.746668-40.56249-40.555671-72.476657-87.763856-95.750687-141.619438C77.302771 632.17708 65.668315 574.333674 65.668315 512.496304c0-61.832254 11.634456-119.846552 34.908486-174.033685 23.27403-54.19225 55.188196-101.400435 95.750687-141.625578 40.557374-40.22412 87.76754-72.142064 141.625382-95.746668C391.816852 77.486792 449.662687 65.687048 511.503676 65.687048z"
                                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                            </Viewbox>
                                        </Border>

                                        <Border
                                            Margin="5"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Top"
                                            Panel.ZIndex="6"
                                            PreviewMouseLeftButtonDown="NewTagStamp"
                                            Style="{StaticResource RoundBorder}"
                                            Tag="{DynamicResource Window.Title.Hover.Background}"
                                            ToolTip="{x:Static lang:Resources.Add}">

                                            <Viewbox Width="auto" Height="14">
                                                <Path
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Data="M867.7 423.8H599.8V155.9c0-49.3-40-89.3-89.3-89.3s-89.3 40-89.3 89.3v267.9H153.3c-49.3 0-89.3 40-89.3 89.3s40 89.3 89.3 89.3h267.9v267.9c0 49.3 40 89.3 89.3 89.3s89.3-40 89.3-89.3V602.4h267.9c49.3 0 89.3-40 89.3-89.3s-40-89.3-89.3-89.3z"
                                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                            </Viewbox>
                                        </Border>
                                        <chao:TogglePanel
                                            Height="auto"
                                            Padding="0,5"
                                            FontSize="15"
                                            Header="标记"
                                            IsExpanded="True"
                                            IsSelected="False"
                                            LineWidth="0"
                                            Style="{StaticResource BaseTogglePanel}">


                                            <ItemsControl
                                                x:Name="TagStampItemsControl"
                                                Background="Transparent"
                                                ItemsSource="{Binding TagStamps}">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>

                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <StackPanel>
                                                            <chao:PathCheckButton
                                                                Name="pathCheckButton"
                                                                Height="30"
                                                                Margin="0"
                                                                CheckedBrush="{DynamicResource Window.Side.Hover.Background}"
                                                                Click="PathCheckButton_Click"
                                                                CornerRadius="0"
                                                                Fill="{Binding BackgroundBrush}"
                                                                FontSize="12"
                                                                Foreground="{DynamicResource Global.Foreground}"
                                                                IsChecked="{Binding Selected, Mode=TwoWay}"
                                                                MainText="{Binding TagName}"
                                                                Path="M121.6 247.872h780.8c23.488 0 42.496 19.008 42.496 42.496v417.92a42.496 42.496 0 0 1-42.496 42.496H121.6a42.496 42.496 0 0 1-42.496-42.496v-417.92a42.496 42.496 0 0 1 42.496-42.496z"
                                                                PathHeight="20"
                                                                PathMargin="5 -5 5 0"
                                                                SubText="{Binding Count}"
                                                                Tag="{Binding TagID}">
                                                                <chao:PathCheckButton.ContextMenu>
                                                                    <ContextMenu>
                                                                        <MenuItem Click="EditTagStamp" Header="{x:Static lang:Resources.Edit}" />
                                                                        <MenuItem Click="DeleteTagStamp" Header="{x:Static lang:Resources.Delete}" />
                                                                    </ContextMenu>
                                                                </chao:PathCheckButton.ContextMenu>
                                                            </chao:PathCheckButton>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>


                                        </chao:TogglePanel>
                                    </Grid>

                                    <!--  快速访问  -->
                                    <Grid x:Name="ListGrid" Grid.Row="2">
                                        <Border
                                            Margin="5"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Top"
                                            Panel.ZIndex="6"
                                            Background="{DynamicResource Control.Disabled.Background}"
                                            IsEnabled="False"
                                            PreviewMouseLeftButtonDown="NewList"
                                            Style="{StaticResource RoundBorder}"
                                            Tag="{DynamicResource Window.Title.Hover.Background}"
                                            ToolTip="{x:Static lang:Resources.Add}">
                                            <Viewbox Width="auto" Height="14">
                                                <Path
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Data="M867.7 423.8H599.8V155.9c0-49.3-40-89.3-89.3-89.3s-89.3 40-89.3 89.3v267.9H153.3c-49.3 0-89.3 40-89.3 89.3s40 89.3 89.3 89.3h267.9v267.9c0 49.3 40 89.3 89.3 89.3s89.3-40 89.3-89.3V602.4h267.9c49.3 0 89.3-40 89.3-89.3s-40-89.3-89.3-89.3z"
                                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                            </Viewbox>
                                        </Border>

                                        <chao:TogglePanel
                                            Padding="0,5"
                                            FontSize="15"
                                            Header="快速访问"
                                            IsExpanded="True"
                                            IsSelected="False"
                                            LineWidth="0"
                                            Style="{StaticResource BaseTogglePanel}">
                                            <StackPanel>

                                                <ItemsControl
                                                    x:Name="MyListItemsControl"
                                                    Background="Transparent"
                                                    ItemsSource="{Binding MyList}">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <StackPanel />
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>

                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <chao:PathRadioButton
                                                                MainText="{Binding Name}"
                                                                Path="M506.88 88.669091c-231.330909 0-418.909091 187.578182-418.909091 418.909091s187.578182 418.909091 418.909091 418.909091 418.909091-187.578182 418.909091-418.909091-187.578182-418.909091-418.909091-418.909091z m178.036364 661.178182c-8.843636 8.378182-20.247273 12.567273-31.650909 12.567272-12.567273 0-24.901818-4.887273-33.978182-14.894545l-177.338182-190.836364V299.52c0-25.6 20.945455-46.545455 46.545454-46.545455s46.545455 20.945455 46.545455 46.545455v220.625455l152.436364 163.84c17.221818 18.850909 16.290909 48.407273-2.56 65.861818z"
                                                                Style="{StaticResource BasePathRadioButton}"
                                                                SubText="{Binding Number}" />
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </StackPanel>

                                        </chao:TogglePanel>

                                    </Grid>
                                </Grid>
                            </ScrollViewer>

                            <Grid
                                Grid.Row="2"
                                Margin="0,0,5,5"
                                VerticalAlignment="Bottom"
                                Cursor="Hand">
                                <Image
                                    Height="20"
                                    Margin="20,0"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    Source="/Resources/Picture/Title.png"
                                    ToolTip="Jvedio" />


                                <Border
                                    x:Name="SettingsBorder"
                                    Width="30"
                                    Height="auto"
                                    Margin="0"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    MouseUp="ShowSettingsPopup"
                                    Style="{StaticResource RoundBorder}"
                                    Tag="{DynamicResource Window.Title.Hover.Background}"
                                    ToolTip="{x:Static lang:Resources.Settings}">
                                    <Border.ContextMenu>
                                        <ContextMenu
                                            Width="auto"
                                            Margin="10,5"
                                            Panel.ZIndex="7"
                                            HorizontalOffset="-45"
                                            VerticalOffset="-5">
                                            <MenuItem Command="cmd:OpenWindow.Settings" Header="{x:Static lang:Resources.Settings}" />
                                            <MenuItem Header="{x:Static lang:Resources.Scan}">
                                                <MenuItem Click="ImportVideoByPaths" Header="扫描多个文件夹" />
                                                <MenuItem Click="ImportVideo" Header="扫描网络磁盘" />
                                            </MenuItem>
                                            <MenuItem Header="{x:Static lang:Resources.MovieManagement}">
                                                <MenuItem Click="DeleteNotExistVideo" Header="{x:Static lang:Resources.DeleteMovieNotExist}" />
                                                <MenuItem Click="DeleteNotInScanPath" Header="{x:Static lang:Resources.DeleteMovieNotInScan}" />
                                                <MenuItem
                                                    Click="ExportToNFO"
                                                    Header="{x:Static lang:Resources.exportnfo}"
                                                    IsEnabled="False" />
                                            </MenuItem>

                                            <MenuItem
                                                Click="ShowStatistic"
                                                Header="{x:Static lang:Resources.Statistic}"
                                                IsEnabled="False"
                                                Visibility="Collapsed" />

                                            <MenuItem
                                                Click="ShowSponsor"
                                                Header="赞助我"
                                                Visibility="Collapsed" />


                                            <MenuItem Header="Jvedio">

                                                <MenuItem
                                                    Command="cmd:OpenWindow.About"
                                                    CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"
                                                    Header="{x:Static lang:Resources.About}" />
                                                <MenuItem Click="OpenHelp" Header="{x:Static lang:Resources.Help}" />
                                                <MenuItem Click="OpenFeedBack" Header="{x:Static lang:Resources.FeedBack}" />
                                                <MenuItem Click="OpenJvedioWebPage" Header="{x:Static lang:Resources.WebSite}" />
                                                <MenuItem
                                                    Command="cmd:OpenWindow.Thanks"
                                                    CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"
                                                    Header="{x:Static lang:Resources.Thanks}" />

                                            </MenuItem>


                                            <MenuItem Header="{x:Static lang:Resources.OpenPath}">
                                                <MenuItem Click="OpenLogPath" Header="{x:Static lang:Resources.Log}" />
                                                <MenuItem Click="OpenImageSavePath" Header="{x:Static lang:Resources.Picture}" />
                                                <MenuItem Click="OpenApplicationPath" Header="{x:Static lang:Resources.SoftWare}" />
                                            </MenuItem>

                                            <MenuItem
                                                Command="cmd:OpenWindow.Upgrade"
                                                CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"
                                                Header="{x:Static lang:Resources.CheckUpgrade}" />

                                        </ContextMenu>
                                    </Border.ContextMenu>
                                    <Viewbox
                                        Width="20"
                                        Height="auto"
                                        VerticalAlignment="Center">
                                        <Path Data="M940 596l-76-57.6c0.8-8 1.6-16.8 1.6-26.4s-0.8-18.4-1.6-26.4l76-57.6c20.8-16 26.4-44 12.8-68l-84.8-143.2c-9.6-16.8-28-27.2-47.2-27.2-6.4 0-12 0.8-18.4 3.2L712 228c-15.2-10.4-31.2-19.2-47.2-26.4l-13.6-92c-4-26.4-26.4-45.6-53.6-45.6H426.4c-27.2 0-49.6 19.2-53.6 44.8L360 201.6c-16 7.2-31.2 16-47.2 26.4l-90.4-35.2c-6.4-2.4-12.8-3.2-19.2-3.2-19.2 0-37.6 9.6-46.4 26.4L71.2 360c-13.6 22.4-8 52 12.8 68l76 57.6c-0.8 9.6-1.6 18.4-1.6 26.4s0 16.8 1.6 26.4l-76 57.6c-20.8 16-26.4 44-12.8 68l84.8 143.2c9.6 16.8 28 27.2 47.2 27.2 6.4 0 12-0.8 18.4-3.2L312 796c15.2 10.4 31.2 19.2 47.2 26.4l13.6 92c3.2 25.6 26.4 45.6 53.6 45.6h171.2c27.2 0 49.6-19.2 53.6-44.8l13.6-92.8c16-7.2 31.2-16 47.2-26.4l90.4 35.2c6.4 2.4 12.8 3.2 19.2 3.2 19.2 0 37.6-9.6 46.4-26.4l85.6-144.8c12.8-23.2 7.2-51.2-13.6-67.2zM704 512c0 105.6-86.4 192-192 192S320 617.6 320 512s86.4-192 192-192 192 86.4 192 192z" Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                    </Viewbox>
                                </Border>


                                <!--<Border
                                    x:Name="SettingsBorder"
                                    Height="30"
                                    HorizontalAlignment="Right"
                                    ContextMenu="{StaticResource SettingsContextMenu}"
                                    CornerRadius="3"
                                    MouseUp="ShowSettingsPopup"
                                    Style="{StaticResource BorderStyle}"
                                    ToolTip="{x:Static lang:Resources.Settings}">
                                    <Image Margin="4" Source="{Binding Themes, Mode=OneWay, ConverterParameter=menu, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                </Border>-->
                            </Grid>

                        </Grid>

                    </Border>

                    <!--  左右调节  -->
                    <GridSplitter
                        Grid.Column="0"
                        Width="5"
                        Panel.ZIndex="10"
                        Style="{StaticResource HoverSpliter}" />
                    <Grid Grid.Column="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <Grid Grid.Row="0">
                            <!--  搜索  -->
                            <chao:SearchBox
                                Name="searchBox"
                                Width="auto"
                                Height="30"
                                Margin="0"
                                Padding="0"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Top"
                                Background="{DynamicResource Window.Detail.Background}"
                                BorderBrush="#326CF3"
                                BorderThickness="0"
                                Foreground="{DynamicResource Global.Foreground}"
                                HideClearButtonOnMouseLeave="False"
                                PlaceHolder="搜索"
                                PlaceHolderForeground="{DynamicResource TextBox.PlaceHolder.Foreground}"
                                PreviewKeyDown="searchBox_PreviewKeyDown"
                                PreviewKeyUp="SearchBar_PreviewKeyUp"
                                Search="doSearch"
                                SearchOnTextChanged="False"
                                ShowClearButton="True"
                                ShowSearchButton="True"
                                Text="{Binding SearchText, Mode=TwoWay}"
                                TextPadding="5 0"
                                Visibility="{Binding DisplaySearchBox, Source={x:Static p:Settings.Default}, Converter={StaticResource bool2VisibilityConverter}}" />

                            <Popup
                                x:Name="searchResultPopup"
                                Width="{Binding ElementName=searchBox, Path=ActualWidth}"
                                MinHeight="300"
                                AllowsTransparency="True"
                                HorizontalOffset="-5"
                                IsOpen="{Binding Searching}"
                                Placement="Bottom"
                                PlacementTarget="{Binding ElementName=searchBox}"
                                PopupAnimation="Fade"
                                StaysOpen="False"
                                VerticalOffset="-5">
                                <Grid Margin="5">
                                    <Border
                                        Margin="5"
                                        Background="{DynamicResource Menu.Background}"
                                        CornerRadius="0 0 5 5"
                                        Effect="{StaticResource PopupDropShadowEffect}" />
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="auto" />
                                        </Grid.RowDefinitions>

                                        <TabControl
                                            Name="searchTabControl"
                                            Grid.Row="0"
                                            Margin="10,10,10,0"
                                            Background="Transparent"
                                            FocusVisualStyle="{x:Null}"
                                            ItemContainerStyle="{StaticResource FlatTabItem}"
                                            SelectedIndex="{Binding SearchSelectedIndex, Mode=TwoWay}"
                                            Style="{StaticResource FlatTabControl}">
                                            <TabItem Header="识别码" />
                                            <TabItem Header="名称" />
                                            <TabItem Header="路径" />
                                            <TabItem Header="演员" />
                                            <TabItem Header="标签" />
                                            <TabItem Header="类别" />
                                            <TabItem Header="系列" />
                                            <TabItem Header="发行商" />
                                            <TabItem Header="导演" />
                                        </TabControl>
                                        <Grid
                                            Grid.Row="1"
                                            Margin="5"
                                            Background="{DynamicResource Menu.Background}"
                                            Visibility="Collapsed">
                                            <TabControl TabStripPlacement="Bottom">
                                                <TabItem Header="2022-07">
                                                    <WrapPanel Orientation="Horizontal" />
                                                </TabItem>
                                                <TabItem Header="2022-06" />
                                            </TabControl>



                                        </Grid>
                                    </Grid>
                                </Grid>
                            </Popup>




                        </Grid>
                        <ItemsControl Grid.Row="1" ItemsSource="{Binding Notices}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border
                                        Name="msgBorder"
                                        Height="30"
                                        Background="{DynamicResource Window.Title.Background}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="50" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="auto" />
                                            </Grid.ColumnDefinitions>
                                            <Border>
                                                <Border.Style>
                                                    <Style TargetType="Border">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding NoticeType}" Value="Warning">
                                                                <Setter Property="Background" Value="Yellow" />
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding NoticeType}" Value="Error">
                                                                <Setter Property="Background" Value="Red" />
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding NoticeType}" Value="Hint">
                                                                <Setter Property="Background" Value="Green" />
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Border.Style>
                                                <TextBlock
                                                    Grid.Column="0"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    FontFamily="微软雅黑"
                                                    FontSize="13"
                                                    FontWeight="Bold"
                                                    TextAlignment="Center">
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="Foreground" Value="{DynamicResource Global.Background}" />
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding NoticeType}" Value="Warning">
                                                                    <Setter Property="Text" Value="警告" />
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding NoticeType}" Value="Error">
                                                                    <Setter Property="Text" Value="严重" />
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding NoticeType}" Value="Hint">
                                                                    <Setter Property="Text" Value="提示" />
                                                                    <Setter Property="Foreground" Value="{DynamicResource Global.Foreground}" />
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </Border>
                                            <TextBox
                                                Grid.Column="1"
                                                Height="auto"
                                                Margin="5"
                                                Padding="0"
                                                VerticalAlignment="Center"
                                                Background="Transparent"
                                                FontFamily="微软雅黑"
                                                FontSize="12"
                                                Foreground="{DynamicResource Global.Foreground}"
                                                Style="{StaticResource ReadOnlyNoWrapTextBox}"
                                                Text="{Binding Message}"
                                                ToolTip="{Binding Message}" />
                                            <Button
                                                Grid.Column="2"
                                                Width="20"
                                                Height="20"
                                                Margin="5,0"
                                                Background="{Binding Path=Background, ElementName=msgBorder}"
                                                Click="HideMsg"
                                                Style="{StaticResource RoundNormalButton}"
                                                Tag="{DynamicResource Window.Title.Hover.Background}">
                                                <Viewbox
                                                    Width="12"
                                                    Height="auto"
                                                    VerticalAlignment="Center">
                                                    <Path
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Data="M610.218667 505.6l398.08-387.413333a49.664 49.664 0 0 0 0-71.338667l-2.133334-2.133333a52.992 52.992 0 0 0-73.301333 0L534.784 432.64 136.704 44.373333a52.992 52.992 0 0 0-73.386667 0L61.269333 46.592a48.810667 48.810667 0 0 0 0 71.338667l398.165334 387.669333-398.165334 387.498667a49.664 49.664 0 0 0 0 71.253333l2.218667 2.133333c20.48 19.626667 52.821333 19.626667 73.301333 0l398.08-387.413333 398.08 387.413333c20.48 19.626667 52.906667 19.626667 73.386667 0l2.048-2.133333a49.664 49.664 0 0 0 0-71.253333l-398.08-387.413334z"
                                                        Fill="{DynamicResource Global.Foreground}" />
                                                </Viewbox>
                                            </Button>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Vertical" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>

                        <TabControl
                            Grid.Row="2"
                            Background="Transparent"
                            FocusVisualStyle="{x:Null}"
                            ItemContainerStyle="{StaticResource FlatTabItem}"
                            SelectedIndex="{Binding TabSelectedIndex, FallbackValue=0}"
                            Style="{StaticResource HeaderHideTabControlStyle}">
                            <TabItem Header="影片">
                                <!--  影片  -->
                                <Grid HorizontalAlignment="Stretch">

                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="auto" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="auto" />
                                    </Grid.RowDefinitions>


                                    <!--  工具栏  -->
                                    <Grid
                                        Grid.Row="0"
                                        Panel.ZIndex="4"
                                        Background="Transparent"
                                        IsEnabled="{Binding IsLoadingMovie, Converter={StaticResource OppositeBooleanConverter}}"
                                        Visibility="{Binding DisplayFunBar, Converter={StaticResource BoolToVis}, Mode=TwoWay, Source={x:Static p:Settings.Default}}">

                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto" />
                                            <RowDefinition Height="auto" />
                                        </Grid.RowDefinitions>




                                        <Grid Grid.Row="0">



                                            <StackPanel Orientation="Horizontal" />



                                            <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">


                                                <Button
                                                    Margin="5,0"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Center"
                                                    Content="{x:Static lang:Resources.LoadFromNet}"
                                                    IsEnabled="False"
                                                    Style="{StaticResource FlatButton}"
                                                    Visibility="Collapsed" />
                                                <Button
                                                    Width="auto"
                                                    MinWidth="0"
                                                    Click="ImportVideo"
                                                    Style="{StaticResource ButtonPrimary}">
                                                    <StackPanel Orientation="Horizontal">
                                                        <Image
                                                            Height="13"
                                                            Margin="0,0,5,0"
                                                            Source="/Resources/Picture/导入.png" />
                                                        <TextBlock Text="导入视频" />
                                                    </StackPanel>
                                                </Button>
                                                <Button
                                                    Width="auto"
                                                    MinWidth="0"
                                                    Command="{Binding AddNewMovie}"
                                                    Style="{StaticResource ButtonPrimary}"
                                                    Visibility="{Binding TeenMode, Converter={StaticResource BoolToOppositeVisibilityConverter}}">
                                                    <StackPanel Orientation="Horizontal">
                                                        <Image
                                                            Height="13"
                                                            Margin="0,0,5,0"
                                                            Source="/Resources/Picture/新增.png" />
                                                        <TextBlock Text="识别码" />
                                                    </StackPanel>
                                                </Button>


                                                <chao:Switch
                                                    Height="25"
                                                    Background="{DynamicResource Window.Side.Background}"
                                                    CheckedBackground="{DynamicResource CheckBox.Checked.Background}"
                                                    Click="SetSelectMode"
                                                    IsChecked="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />

                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    Style="{StaticResource BaseTextBlock}"
                                                    Text="{x:Static lang:Resources.MultiSelect}" />

                                                <Border
                                                    MouseLeftButtonUp="RandomDisplay"
                                                    Style="{StaticResource ToolsBarBorderStyle}"
                                                    ToolTip="{x:Static lang:Resources.ToolTip_RandomShow}">

                                                    <Viewbox Width="auto" Height="18">
                                                        <Path
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Data="M927.9656 226.555186a27.839408 27.839408 0 0 0 14.079701-41.91911 44.159062 44.159062 0 0 0-18.879599-14.0797c-74.622414-32.639306-149.308827-64.638626-223.931241-95.99796L523.238201 0h-23.935492l-15.99966 7.03985c-114.877559 48.318973-229.115131 95.99796-343.288705 145.596906l-43.775069 18.879599a29.119381 29.119381 0 0 0-19.839579 27.199422 28.479395 28.479395 0 0 0 19.199592 27.839409c1.599966 0 4.735899 1.919959 6.399864 2.879939C232.108387 287.99388 362.601614 346.232643 492.838847 405.111391a39.679157 39.679157 0 0 0 38.079191 0L863.96696 255.99456c22.399524-9.919789 42.879089-20.159572 63.99864-29.439374zM352.105837 223.99524a107.77371 107.77371 0 0 1-118.397484 0 31.99932 31.99932 0 0 1 0-55.358824 88.95811 88.95811 0 0 1 50.942918-17.599626 105.597756 105.597756 0 0 1 67.454566 17.599626 31.99932 31.99932 0 0 1 0 55.358824z m218.555356 0a106.493737 106.493737 0 0 1-119.03747 0 31.99932 31.99932 0 0 1 0-54.718837 100.733859 100.733859 0 0 1 63.99864-17.599626c18.687603 0.063999 36.863217 5.887875 52.158891 16.639646a31.99932 31.99932 0 0 1 2.879939 55.678817z m219.77133 0a107.77371 107.77371 0 0 1-118.397484 0 31.99932 31.99932 0 0 1 0-55.358824c16.767644-12.799728 37.503203-19.263591 58.558756-18.239612 20.927555-1.023978 41.599116 5.18389 58.558755 17.599626a31.99932 31.99932 0 0 1 1.279973 55.99881zM470.503321 437.110711a2911.938121 2911.938121 0 0 1-86.718157-39.03917C281.131346 351.99252 180.333488 307.833459 78.959642 262.394424a31.99932 31.99932 0 0 0-29.439375-1.919959 34.239272 34.239272 0 0 0-17.279632 33.919279v495.98946a61.758688 61.758688 0 0 0 39.359163 62.078681c124.797348 55.294825 248.570718 110.717647 372.344088 167.036451 26.879429 11.77575 46.399014 0 46.399014-30.079361V475.509895a31.99932 31.99932 0 0 0-21.119551-37.759197l1.279972-0.639987z m-185.212064 243.194833a31.99932 31.99932 0 0 1-54.398844 2.81594 95.99796 95.99796 0 0 1-21.119551-75.134404 134.397144 134.397144 0 0 1 14.399694-42.879089 31.99932 31.99932 0 0 1 54.078851-4.159911c14.271697 16.511649 22.207528 37.6312 22.399524 59.518735 1.151976 20.991554-4.22391 41.919109-15.359674 59.77473zM945.565226 262.394424L555.30152 437.430705a36.479225 36.479225 0 0 0-23.359504 36.479224v514.805061a29.119381 29.119381 0 0 0 44.479055 29.439374l377.143985-169.276403a59.518735 59.518735 0 0 0 38.399184-56.638796V293.753758c0-28.799388-20.479565-42.495097-46.399014-31.359334z m-241.530867 578.163714a31.99932 31.99932 0 0 1-55.03883-2.879939 109.117681 109.117681 0 0 1 7.03985-118.077491 31.99932 31.99932 0 0 1 55.03883 4.159912c9.599796 16.831642 14.207698 36.031234 13.439715 55.358824a95.99796 95.99796 0 0 1-20.479565 61.438694z m170.492377-293.113771a31.99932 31.99932 0 0 1-56.574798-3.455927 109.757668 109.757668 0 0 1 5.439885-115.517545 31.99932 31.99932 0 0 1 58.494757 4.799898c8.639816 14.59169 12.991724 31.359334 12.479734 48.318973a104.317783 104.317783 0 0 1-21.439544 65.918599h1.599966z"
                                                            Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                                    </Viewbox>
                                                </Border>
                                                <Border
                                                    MouseLeftButtonUp="ShowFilterGrid"
                                                    Style="{StaticResource ToolsBarBorderStyle}"
                                                    ToolTip="{x:Static lang:Resources.Filter}"
                                                    Visibility="Collapsed">

                                                    <Viewbox Width="auto" Height="18">
                                                        <Path
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Data="M452.923077 512v275.692308l118.153846-98.461539v-177.230769l177.230769-177.230769H275.692308l177.230769 177.230769zM0 512C0 229.218462 229.238154 0 512 0c282.781538 0 512 229.238154 512 512 0 282.781538-229.238154 512-512 512C229.218462 1024 0 794.761846 0 512z"
                                                            Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                                    </Viewbox>
                                                </Border>





                                                <Border
                                                    VerticalAlignment="Center"
                                                    Background="{DynamicResource Window.Side.Background}"
                                                    CornerRadius="5">
                                                    <StackPanel Name="ViewModeStackPanel" Orientation="Horizontal">
                                                        <chao:PathRadioButton
                                                            CornerRadius="5,0,0,5"
                                                            Path="M886.680128 13.86578H136.468464c-37.340302 0-62.274379 24.934078-62.274379 62.274379v871.841311c0 37.340302 24.934078 62.274379 62.274379 62.27438h750.211664c37.340302 0 62.274379-24.934078 62.27438-62.27438V76.140159c0-37.340302-24.934078-62.274379-62.27438-62.274379zM136.468464 76.140159h750.211664V617.878608L710.682029 451.002732 442.731916 730.021143 318.061527 617.878608 136.468464 792.295522V76.140159z m0 871.841311v-78.572752l184.025656-170.524765L599.75579 947.98147H136.468464z m549.401117 0l-200.688918-181.836322 225.501366-234.258701 175.998099 164.321654v251.65174H685.869581z m0 0"
                                                            PathHeight="18"
                                                            Style="{StaticResource PathGroupRadioButton}"
                                                            ToolTip="{x:Static lang:Resources.Thumbnail}" />
                                                        <chao:PathRadioButton
                                                            Padding="0,0,0,0"
                                                            CornerRadius="0"
                                                            Path="M934.4 107.52H89.6c-20.48 0-35.84 15.36-35.84 35.84V883.2c0 20.48 15.36 35.84 35.84 35.84h844.8c20.48 0 35.84-15.36 35.84-35.84V143.36c0-20.48-15.36-35.84-35.84-35.84z m-35.84 739.84H125.44V176.64h775.68v670.72h-2.56z m0 0 M335.36 440.32c38.4 0 71.68-30.72 71.68-71.68 0-38.4-30.72-71.68-71.68-71.68-38.4 0-71.68 30.72-71.68 71.68 2.56 40.96 33.28 71.68 71.68 71.68z m0 0M652.8 396.8L445.44 691.2 337.92 540.16 158.72 793.6h704L652.8 396.8z m0 0"
                                                            PathHeight="19"
                                                            Style="{StaticResource PathGroupRadioButton}"
                                                            ToolTip="{x:Static lang:Resources.Poster}" />
                                                        <chao:PathRadioButton
                                                            CornerRadius="0"
                                                            Path="M1024 170.666667v682.666666H0V170.666667h1024zM85.333333 256v512h853.333334V256H85.333333z m354.133334 280.106667c0 82.730667-51.477333 133.333333-136.469334 133.333333-92.501333 0-148.117333-59.776-148.117333-158.72 0-97.706667 55.829333-158.144 146.026667-158.144 73.344 0 127.936 42.709333 135.424 106.24h-75.413334c-7.509333-26.453333-29.994667-42.474667-60.010666-42.474667-42.688 0-68.117333 34.986667-68.117334 93.525334 0 59.584 28.117333 95.850667 71.893334 95.850666 34.773333 0 58.944-20.416 60.8-50.837333l0.213333-5.013333h-54.997333v-52.48H439.466667v38.741333zM573.013333 661.333333h-76.48V360.704h76.458667V661.333333z m147.285334 0H643.84V360.704h204.586667v61.461333h-128.128v68.544h116.245333v58.538667h-116.266667V661.333333z"
                                                            PathHeight="19"
                                                            Style="{StaticResource PathGroupRadioButton}"
                                                            ToolTip="GIF"
                                                            Visibility="Collapsed" />
                                                        <chao:PathRadioButton
                                                            CornerRadius="0,5,5,0"
                                                            Path="M64 480h352V128H64v352z m64-288h224v224H128V192zM64 928h352V576H64v352z m64-288h224v224H128v-224zM526.848 224H928a32 32 0 1 0 0-64H526.848a32 32 0 0 0 0 64zM928 608H526.848a32 32 0 1 0 0 64H928a32 32 0 1 0 0-64zM928 384H526.848a32 32 0 0 0 0 64H928a32 32 0 1 0 0-64zM928 832H526.848a32 32 0 1 0 0 64H928a32 32 0 1 0 0-64z"
                                                            PathHeight="19"
                                                            Style="{StaticResource PathGroupRadioButton}"
                                                            Visibility="Collapsed" />
                                                    </StackPanel>
                                                </Border>


                                                <Border
                                                    Name="SortBorder"
                                                    MouseUp="ShowContextMenu"
                                                    Style="{StaticResource ToolsBarBorderStyle}"
                                                    ToolTip="{x:Static lang:Resources.Sorting}">
                                                    <Border.ContextMenu>
                                                        <ContextMenu HorizontalOffset="-50">
                                                            <MenuItem Header="{x:Static lang:Resources.ID}" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.Favorites}" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.FileSize}" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.ImportDate}" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.CreatedDate}" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.Title}" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.ViewNumber}" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.ReleaseDate}" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.Rating}" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.Duration}" IsCheckable="True" />
                                                        </ContextMenu>
                                                    </Border.ContextMenu>
                                                    <Viewbox Width="auto" Height="18">
                                                        <Path
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Data="M44.032 451.584c-22.528 0-40.96 18.432-40.96 40.96v38.912c0 22.528 18.432 40.96 40.96 40.96h519.68c22.528 0 40.96-18.432 40.96-40.96v-38.912c0-22.528-18.432-40.96-40.96-40.96H44.032z m0 302.592c-22.528 0-40.96 18.432-40.96 40.96v38.912c0 22.528 18.432 40.96 40.96 40.96h519.68c22.528 0 40.96-18.432 40.96-40.96v-38.912c0-22.528-18.432-40.96-40.96-40.96H44.032z m519.68-484.352c22.528 0 40.96-18.432 40.96-40.96v-38.912c0-22.528-18.432-40.96-40.96-40.96H44.032c-22.528 0-40.96 18.432-40.96 40.96v38.912c0 22.528 18.432 40.96 40.96 40.96h519.68z m170.496-120.832c-22.528 0-40.96 18.432-40.96 40.96V834.56c0 22.528 18.432 40.96 40.96 40.96h38.912c15.36 0 28.16-8.192 35.328-20.48l212.48-212.48c0-22.528-18.432-40.96-40.96-40.96H814.08V189.952c0-22.528-18.432-40.96-40.96-40.96h-38.912z"
                                                            Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                                    </Viewbox>
                                                </Border>


                                            </StackPanel>


                                        </Grid>






                                    </Grid>





                                    <!--  等待  -->
                                    <Grid
                                        Grid.Row="1"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Panel.ZIndex="10"
                                        Visibility="{Binding IsLoadingMovie, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Hidden}">
                                        <Grid MinWidth="150" MaxWidth="250">
                                            <Border
                                                Margin="5"
                                                Background="{DynamicResource Global.Foreground}"
                                                CornerRadius="5"
                                                Effect="{StaticResource NormalBlurEffect}" />

                                            <Border
                                                Margin="5"
                                                Background="{DynamicResource Window.InnerDialog.Background}"
                                                CornerRadius="5">

                                                <Grid Margin="5">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*" />
                                                        <RowDefinition Height="auto" />
                                                    </Grid.RowDefinitions>
                                                    <StackPanel
                                                        Grid.Row="0"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                        <hc:LoadingCircle Height="30" Foreground="{DynamicResource Global.Foreground}" />
                                                        <TextBlock
                                                            Grid.Row="0"
                                                            MaxHeight="300"
                                                            Margin="10"
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Background="Transparent"
                                                            FontSize="18"
                                                            Foreground="{DynamicResource Global.Foreground}"
                                                            Style="{StaticResource BaseTextBlock}"
                                                            Text="{x:Static lang:Resources.Loading}" />

                                                    </StackPanel>


                                                </Grid>


                                            </Border>
                                        </Grid>

                                    </Grid>

                                    <!--  导航栏  -->
                                    <Grid
                                        Grid.Row="1"
                                        MinWidth="40"
                                        MinHeight="50"
                                        Margin="20"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Panel.ZIndex="4"
                                        Opacity="0"
                                        Visibility="{Binding DisplayNavigation, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToVisibilityConverter}}">
                                        <Rectangle
                                            Margin="{Binding MainGridThickness, Converter={StaticResource SmallerThicknessConverter}, ConverterParameter=-5, FallbackValue=5}"
                                            Effect="{StaticResource ZeroShadowEffect}"
                                            Fill="{DynamicResource Window.Side.Background}"
                                            Opacity="0.5"
                                            RadiusX="2"
                                            RadiusY="2"
                                            Stroke="#5AC6FC"
                                            StrokeThickness="1" />
                                        <ScrollViewer Margin="0,10" VerticalScrollBarVisibility="Hidden">
                                            <ItemsControl HorizontalAlignment="Center" ItemsSource="{Binding LettersNavigation}">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Button
                                                            Click="NavigationToLetter"
                                                            Content="{Binding}"
                                                            Style="{StaticResource NavigateButton}" />
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>

                                        </ScrollViewer>

                                    </Grid>



                                    <!--  信息展示：演员信息+影片展示  -->
                                    <Grid Grid.Row="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>



                                        <!--  演员  -->
                                        <Grid
                                            x:Name="ActorInfoGrid"
                                            Grid.Column="0"
                                            Margin="10"
                                            Visibility="{Binding ShowActorGrid, FallbackValue=Visible}">
                                            <Border
                                                Margin="5"
                                                Background="{DynamicResource Window.Title.Background}"
                                                CornerRadius="5"
                                                Effect="{StaticResource NormalDropShadowEffect}" />


                                            <Border
                                                Width="27"
                                                Height="27"
                                                Margin="5"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Panel.ZIndex="5"
                                                CornerRadius="20"
                                                MouseLeftButtonUp="HideActressGrid"
                                                Style="{StaticResource CloseBorderStyle}">
                                                <Image
                                                    Width="20"
                                                    Height="20"
                                                    Source="{Binding Themes, Mode=OneWay, ConverterParameter=close, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                            </Border>

                                            <Grid Margin="10">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="auto" />
                                                    <RowDefinition Height="auto" />
                                                    <RowDefinition Height="auto" />
                                                    <RowDefinition Height="*" />
                                                </Grid.RowDefinitions>



                                                <StackPanel Grid.Row="0">
                                                    <Image
                                                        Width="120"
                                                        Margin="0,20"
                                                        VerticalAlignment="Top"
                                                        AllowDrop="True"
                                                        DragOver="Image_DragOver"
                                                        Drop="Image_Drop"
                                                        Source="{Binding CurrentActorInfo.SmallImage}"
                                                        Tag="{Binding CurrentActorInfo.ActorID, Mode=OneWay}">
                                                        <Image.ContextMenu>
                                                            <ContextMenu>
                                                                <MenuItem Click="OpenActorPath" Header="{x:Static lang:Resources.OpenPath}" />
                                                                <MenuItem
                                                                    Click="OpenWebsite"
                                                                    Header="{x:Static lang:Resources.Menu_OpenWebSite}"
                                                                    Visibility="Collapsed" />
                                                                <MenuItem
                                                                    Click="ClearActressInfo"
                                                                    Header="{x:Static lang:Resources.Clear}"
                                                                    Visibility="Collapsed" />
                                                            </ContextMenu>
                                                        </Image.ContextMenu>
                                                    </Image>
                                                    <TextBox
                                                        Width="auto"
                                                        MaxWidth="200"
                                                        MaxHeight="50"
                                                        HorizontalAlignment="Center"
                                                        Background="Transparent"
                                                        ContextMenu="{StaticResource CopyContextMenu}"
                                                        FontSize="20"
                                                        FontWeight="Normal"
                                                        Foreground="{DynamicResource Global.Foreground}"
                                                        IsReadOnly="True"
                                                        Style="{StaticResource ActorTextBox}"
                                                        Text="{Binding CurrentActorInfo.ActorName, Mode=OneWay}"
                                                        TextAlignment="Center" />


                                                </StackPanel>



                                                <StackPanel
                                                    Grid.Row="1"
                                                    IsEnabled="False"
                                                    Orientation="Horizontal"
                                                    Visibility="Collapsed">
                                                    <Border MouseLeftButtonUp="EditActress" Style="{StaticResource ActorInfoBorderStyle}">
                                                        <Image
                                                            Height="15"
                                                            Margin="5"
                                                            Source="pack://application:,,,/Resources/Picture/edit.png" />
                                                    </Border>
                                                    <Border MouseLeftButtonUp="BeginDownLoadActress" Style="{StaticResource ActorInfoBorderStyle}">
                                                        <Image
                                                            Height="20"
                                                            Margin="5"
                                                            Source="pack://application:,,,/Resources/Picture/download.png" />
                                                    </Border>
                                                    <Border
                                                        PreviewMouseLeftButtonUp="LoadActorOtherMovie"
                                                        Style="{StaticResource ActorInfoBorderStyle}"
                                                        Tag="{Binding CurrentActorInfo.ActorName, Mode=OneWay}"
                                                        ToolTip="{x:Static lang:Resources.LoadActorOtherMovie}"
                                                        Visibility="Visible">
                                                        <Image
                                                            Height="17"
                                                            Margin="5"
                                                            Source="pack://application:,,,/Resources/Picture/其他.png" />
                                                    </Border>

                                                </StackPanel>

                                                <hc:Rate
                                                    Grid.Row="2"
                                                    Margin="5"
                                                    VerticalAlignment="Center"
                                                    AllowClear="True"
                                                    AllowHalf="True"
                                                    Background="{DynamicResource Window.Side.Background}"
                                                    Count="5"
                                                    Foreground="{DynamicResource Common.HighLight.Deep.Background}"
                                                    ToolTip="{x:Static lang:Resources.DoubleClickToCancel}"
                                                    ValueChanged="ActorRate_ValueChanged"
                                                    Visibility="Visible"
                                                    Value="{Binding CurrentActorInfo.Grade, Mode=TwoWay}" />



                                                <ScrollViewer
                                                    Grid.Row="3"
                                                    Margin="0,5"
                                                    VerticalScrollBarVisibility="Visible">
                                                    <StackPanel>

                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Birthday}" />
                                                            <TextBox
                                                                Style="{StaticResource ActorTextBox}"
                                                                Text="{Binding CurrentActorInfo.Birthday, Mode=TwoWay}"
                                                                ToolTip="【0000-00-00】" />
                                                        </StackPanel>

                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Age}" />
                                                            <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding CurrentActorInfo.Age, Mode=TwoWay}" />
                                                        </StackPanel>

                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Birthplace}" />
                                                            <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding CurrentActorInfo.BirthPlace, Mode=TwoWay}" />
                                                        </StackPanel>

                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Height}" />
                                                            <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding CurrentActorInfo.Height, Mode=TwoWay}" />
                                                        </StackPanel>

                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Cup}" />
                                                            <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding CurrentActorInfo.Cup, Mode=TwoWay}" />
                                                        </StackPanel>

                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Chest}" />
                                                            <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding CurrentActorInfo.Chest, Mode=TwoWay}" />
                                                        </StackPanel>


                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Waist}" />
                                                            <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding CurrentActorInfo.Waist, Mode=TwoWay}" />
                                                        </StackPanel>

                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Hipline}" />
                                                            <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding CurrentActorInfo.Hipline, Mode=TwoWay}" />
                                                        </StackPanel>

                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Hobby}" />
                                                            <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding CurrentActorInfo.Hobby, Mode=TwoWay}" />
                                                        </StackPanel>

                                                    </StackPanel>
                                                </ScrollViewer>
                                            </Grid>
                                        </Grid>

                                        <!--  影片  -->
                                        <Grid
                                            Grid.Column="1"
                                            Panel.ZIndex="2"
                                            AllowDrop="True"
                                            DragOver="Grid_DragOver"
                                            Drop="Grid_Drop"
                                            FocusVisualStyle="{x:Null}">
                                            <Grid.ContextMenu>
                                                <ContextMenu IsEnabled="{Binding IsLoadingMovie, Converter={StaticResource OppositeBooleanConverter}}">
                                                    <MenuItem
                                                        Click="SelectAll"
                                                        FontWeight="Bold"
                                                        Header="选中/取消当前页" />
                                                    <Separator />
                                                    <MenuItem Name="DataExistMenuItem" Header="是否存在">
                                                        <MenuItem
                                                            Header="默认"
                                                            IsCheckable="True"
                                                            IsChecked="True" />
                                                        <MenuItem Header="不存在" IsCheckable="True" />
                                                        <MenuItem Header="存在" IsCheckable="True" />
                                                    </MenuItem>
                                                    <MenuItem
                                                        Click="LoadData"
                                                        Header="{x:Static lang:Resources.ShowSubSection}"
                                                        IsCheckable="True"
                                                        IsChecked="{Binding OnlyShowSubSection, Source={x:Static p:Settings.Default}, Mode=TwoWay}" />

                                                    <MenuItem Name="VideoTypeMenuItem" Header="{x:Static lang:Resources.VideoType}">
                                                        <MenuItem Header="{x:Static lang:Resources.Normal}" IsCheckable="True" />
                                                        <MenuItem Header="无修正" IsCheckable="True" />
                                                        <MenuItem Header="修正" IsCheckable="True" />
                                                        <MenuItem Header="{x:Static lang:Resources.Europe}" IsCheckable="True" />
                                                    </MenuItem>
                                                    <MenuItem Name="PictureFilterType" Header="图片存在">
                                                        <MenuItem
                                                            Header="默认"
                                                            IsCheckable="True"
                                                            IsChecked="True" />
                                                        <MenuItem Header="无图" IsCheckable="True" />
                                                        <MenuItem Header="有图" IsCheckable="True" />
                                                    </MenuItem>
                                                    <Separator />
                                                    <MenuItem Header="全部影片">
                                                        <MenuItem Click="GenerateAllScreenShot" Header="{x:Static lang:Resources.Menu_GenerateScreenShot}" />
                                                        <MenuItem Click="DownloadAllVideo" Header="{x:Static lang:Resources.SyncInfo}" />
                                                    </MenuItem>
                                                </ContextMenu>
                                            </Grid.ContextMenu>

                                            <Border
                                                x:Name="dragOverBorder"
                                                Panel.ZIndex="99"
                                                Background="{DynamicResource Window.Title.Background}"
                                                DragLeave="Grid_DragLeave"
                                                Opacity="0.8"
                                                Visibility="Collapsed" />

                                            <Canvas
                                                x:Name="DragSelectCanvas"
                                                Panel.ZIndex="-1"
                                                Background="Transparent" />
                                            <!--  影片  -->
                                            <ItemsControl
                                                x:Name="MovieItemsControl"
                                                Background="{DynamicResource Window.Background}"
                                                FocusVisualStyle="{x:Null}"
                                                ItemsSource="{Binding CurrentVideoList}"
                                                ScrollViewer.ScrollChanged="ScrollViewer_ScrollChanged"
                                                Style="{StaticResource ItemsControlVirtualizedWrapPanelStyle}">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>

                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <!--  影片加载动画  -->
                                                        <DataTemplate.Triggers>
                                                            <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                                                <BeginStoryboard>
                                                                    <Storyboard>
                                                                        <DoubleAnimation
                                                                            FillBehavior="Stop"
                                                                            Storyboard.TargetName="rootGrid"
                                                                            Storyboard.TargetProperty="(UIElement.Opacity)"
                                                                            From="0"
                                                                            To="1"
                                                                            Duration="0:0:0.3" />
                                                                    </Storyboard>
                                                                </BeginStoryboard>
                                                            </EventTrigger>
                                                        </DataTemplate.Triggers>

                                                        <Grid
                                                            Name="rootGrid"
                                                            Width="{Binding GlobalImageWidth, Source={x:Static p:Settings.Default}, Mode=OneWay}"
                                                            Margin="10"
                                                            Tag="{Binding DataID, Mode=OneWay}">
                                                            <Border
                                                                Name="rootBorder"
                                                                MinWidth="200"
                                                                Margin="0"
                                                                Background="{DynamicResource ListBoxItem.Background}"
                                                                BorderThickness="2"
                                                                CornerRadius="3"
                                                                Effect="{StaticResource BlueDropShadowEffect}"
                                                                MouseLeftButtonDown="CanShowDetails"
                                                                MouseLeftButtonUp="ShowDetails"
                                                                Opacity="{Binding MovieOpacity, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                Style="{StaticResource SimpleBorder}" />
                                                            <Grid Margin="0" Tag="{Binding id, Mode=OneWay}">

                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="auto" />
                                                                    <RowDefinition Height="auto" />
                                                                    <RowDefinition Height="auto" />
                                                                    <RowDefinition Height="auto" />
                                                                    <RowDefinition Height="auto" />
                                                                </Grid.RowDefinitions>
                                                                <!--  图片  -->
                                                                <Grid Grid.Row="0">
                                                                    <media:GifImage
                                                                        x:Name="GifImage"
                                                                        Margin="2"
                                                                        HorizontalAlignment="Center"
                                                                        VerticalAlignment="Center"
                                                                        BigImageSource="{Binding BigImage, Mode=OneWay}"
                                                                        ContextMenuOpening="ContextMenu_ContextMenuOpening"
                                                                        Cursor="Hand"
                                                                        GifSource="{Binding GifUri, Mode=OneWay}"
                                                                        MouseEnter="BorderMouseEnter"
                                                                        MouseLeave="BorderMouseLeave"
                                                                        MouseLeftButtonDown="CanShowDetails"
                                                                        MouseLeftButtonUp="ShowDetails"
                                                                        SmallImageSource="{Binding SmallImage, Mode=OneWay}"
                                                                        Stretch="{Binding Path=MainImageAutoMode, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToImageStretchConverter}, Mode=OneWay}"
                                                                        Style="{StaticResource GifImageStyle}">
                                                                        <Image.ContextMenu>
                                                                            <ContextMenu Opacity="0.9" PreviewKeyUp="ContextMenu_PreviewKeyUp">


                                                                                <MenuItem Click="DownLoadSelectMovie" Header="{x:Static lang:Resources.Menu_SyncInfo}" />

                                                                                <MenuItem
                                                                                    Click="DownLoadWithUrl"
                                                                                    Header="{x:Static lang:Resources.Menu_CustomUrl}"
                                                                                    Visibility="Collapsed" />


                                                                                <MenuItem Click="EditInfo" Header="{x:Static lang:Resources.Menu_EditInfo}" />
                                                                                <MenuItem Click="AddToPlayerList" Header="添加到播放列表" />
                                                                                <MenuItem Name="TagMenuItems" Header="添加标记" />
                                                                                <MenuItem Header="{x:Static lang:Resources.Menu_Advance}">
                                                                                    <MenuItem Click="AddDataAssociation" Header="影片关联" />
                                                                                    <MenuItem Click="GenerateScreenShot" Header="{x:Static lang:Resources.Menu_GenerateScreenShot}" />
                                                                                    <MenuItem Click="GenerateGif" Header="{x:Static lang:Resources.Menu_GenerateGif}" />
                                                                                    <MenuItem
                                                                                        Click="TranslateMovie"
                                                                                        Header="{x:Static lang:Resources.Menu_Translate}"
                                                                                        Visibility="Collapsed" />
                                                                                    <MenuItem
                                                                                        Click="GenerateSmallImage"
                                                                                        Header="{x:Static lang:Resources.Menu_GenerateThumbnail}"
                                                                                        Visibility="Collapsed" />
                                                                                    <MenuItem
                                                                                        Click="GenerateActor"
                                                                                        Header="{x:Static lang:Resources.Menu_GenerateActressImage}"
                                                                                        Visibility="Collapsed" />
                                                                                    <MenuItem Click="RenameFile" Header="{x:Static lang:Resources.Menu_RenameFile}" />
                                                                                    <MenuItem
                                                                                        Click="ReMoveZero"
                                                                                        Header="{x:Static lang:Resources.Menu_RemoveZero}"
                                                                                        Visibility="Collapsed" />

                                                                                </MenuItem>


                                                                                <Separator />
                                                                                <MenuItem
                                                                                    Click="OpenWeb"
                                                                                    Header="访问所在网址"
                                                                                    Icon="pack://application:,,,/Resources/menuitem/openwebsite.png" />

                                                                                <MenuItem Header="{x:Static lang:Resources.OpenPath}" Visibility="{Binding EditMode, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToOppositeVisibilityConverter}}">
                                                                                    <MenuItem
                                                                                        Command="cmd:File.OpenSelectFile"
                                                                                        CommandParameter="{Binding Path}"
                                                                                        Header="{x:Static lang:Resources.Movie}" />
                                                                                    <MenuItem Click="OpenPath" Header="{x:Static lang:Resources.Poster}" />
                                                                                    <MenuItem Click="OpenPath" Header="{x:Static lang:Resources.Thumbnail}" />
                                                                                    <MenuItem Click="OpenPath" Header="{x:Static lang:Resources.Preview}" />
                                                                                    <MenuItem Click="OpenPath" Header="{x:Static lang:Resources.ScreenShot}" />
                                                                                    <MenuItem Click="OpenPath" Header="GIF" />

                                                                                </MenuItem>

                                                                                <MenuItem Click="CopyFile" Header="{x:Static lang:Resources.Menu_CopyFile}" />

                                                                                <Separator />
                                                                                <MenuItem
                                                                                    Click="DeleteID"
                                                                                    Header="{x:Static lang:Resources.Menu_DeleteInfo}"
                                                                                    ToolTip="{x:Static lang:Resources.ToolTip_DeleteInfo}" />
                                                                                <MenuItem
                                                                                    Click="DeleteFile"
                                                                                    Header="{x:Static lang:Resources.Menu_DeleteFile}"
                                                                                    Icon="pack://application:,,,/Resources/menuitem/clear.png"
                                                                                    ToolTip="{x:Static lang:Resources.ToolTip_DeleteFile}" />



                                                                            </ContextMenu>
                                                                        </Image.ContextMenu>
                                                                    </media:GifImage>
                                                                    <!--  分段视频  -->

                                                                    <StackPanel
                                                                        HorizontalAlignment="Right"
                                                                        VerticalAlignment="Bottom"
                                                                        Panel.ZIndex="3"
                                                                        Orientation="Horizontal">
                                                                        <Button
                                                                            Height="auto"
                                                                            Margin="5"
                                                                            Padding="5"
                                                                            Click="ViewAssoDatas"
                                                                            Cursor="Hand"
                                                                            IsEnabled="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}"
                                                                            Style="{StaticResource RoundNormalButton}"
                                                                            Tag="{DynamicResource Button.Hover.Background}"
                                                                            Visibility="{Binding HasAssociation, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}">

                                                                            <Image
                                                                                Width="20"
                                                                                Height="20"
                                                                                Source="/Resources/Picture/asso.png" />
                                                                        </Button>
                                                                        <Button
                                                                            Height="auto"
                                                                            Margin="0,5,5,5"
                                                                            Padding="5"
                                                                            Click="ShowSubSection"
                                                                            Cursor="Hand"
                                                                            IsEnabled="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}"
                                                                            Style="{StaticResource RoundNormalButton}"
                                                                            Tag="{DynamicResource Button.Hover.Background}"
                                                                            Visibility="{Binding HasSubSection, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}">
                                                                            <Button.ContextMenu>
                                                                                <ContextMenu
                                                                                    Width="100"
                                                                                    HorizontalOffset="-50"
                                                                                    VerticalOffset="10" />
                                                                            </Button.ContextMenu>
                                                                            <Image
                                                                                Width="20"
                                                                                Height="20"
                                                                                Source="/Resources/Picture/subsection1.png" />
                                                                        </Button>

                                                                    </StackPanel>

                                                                    <!--  播放按钮  -->
                                                                    <Canvas
                                                                        Width="40"
                                                                        Height="40"
                                                                        Margin="10,0,10,0"
                                                                        HorizontalAlignment="Center"
                                                                        VerticalAlignment="Center"
                                                                        Cursor="Hand"
                                                                        MouseLeftButtonUp="PlayVideo"
                                                                        Opacity="0.5"
                                                                        Style="{StaticResource HoverCanvas}"
                                                                        ToolTip="{Binding id, Mode=OneWay}">
                                                                        <Ellipse
                                                                            Canvas.Left="3"
                                                                            Canvas.Top="3"
                                                                            Width="40"
                                                                            Height="40"
                                                                            Fill="#DD744C" />
                                                                        <Polygon
                                                                            Cursor="Hand"
                                                                            Fill="#F6F7F7"
                                                                            Points="15,38 35,25 15,10"
                                                                            Stroke="{DynamicResource Menu.Background}" />
                                                                    </Canvas>
                                                                </Grid>


                                                                <!--  标签戳+ID  -->
                                                                <Grid
                                                                    Name="idGrid"
                                                                    Grid.Row="1"
                                                                    Width="auto"
                                                                    HorizontalAlignment="Stretch"
                                                                    Background="Transparent"
                                                                    IsEnabled="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}">
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="auto" />
                                                                        <ColumnDefinition Width="auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <TextBox
                                                                        Grid.Column="0"
                                                                        Width="auto"
                                                                        Margin="0,5"
                                                                        Padding="10,0,0,0"
                                                                        HorizontalAlignment="Left"
                                                                        VerticalAlignment="Center"
                                                                        FontFamily="微软雅黑"
                                                                        FontSize="15"
                                                                        Foreground="{DynamicResource Global.Foreground}"
                                                                        Style="{StaticResource ReadOnlyNoWrapTextBox}"
                                                                        Text="{Binding VID, Mode=OneWay}"
                                                                        TextAlignment="Left"
                                                                        Visibility="{Binding Path=DisplayID, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                                                                    <Border
                                                                        Grid.Column="1"
                                                                        MouseLeftButtonDown="CopyVID"
                                                                        Tag="{Binding VID}">
                                                                        <Border.Style>
                                                                            <Style BasedOn="{StaticResource ToolsBarBorderStyle}" TargetType="Border">
                                                                                <Setter Property="Visibility" Value="Hidden" />
                                                                                <Setter Property="Margin" Value="0" />
                                                                                <Style.Triggers>
                                                                                    <DataTrigger Binding="{Binding ElementName=idGrid, Path=IsMouseOver}" Value="true">
                                                                                        <Setter Property="Visibility" Value="Visible" />
                                                                                    </DataTrigger>
                                                                                </Style.Triggers>
                                                                            </Style>
                                                                        </Border.Style>

                                                                        <Viewbox Width="auto" Height="13">
                                                                            <Path
                                                                                HorizontalAlignment="Center"
                                                                                VerticalAlignment="Center"
                                                                                Data="M891.072 822.144V167.36a34.432 34.432 0 0 0-34.432-34.432H201.856C201.856 94.848 232.704 64 270.784 64h620.288C929.152 64 960 94.848 960 132.928v620.288c0 38.08-30.848 68.928-68.928 68.928z m-68.928-551.36v620.288c0 38.08-30.848 68.928-68.928 68.928H132.928A68.928 68.928 0 0 1 64 891.072V270.784c0-38.08 30.848-68.928 68.928-68.928h620.288c38.08 0 68.928 30.848 68.928 68.928z m-137.856 137.856H201.856a34.432 34.432 0 0 0 0 68.864h482.432a34.432 34.432 0 0 0 0-68.864z m0 206.72H201.856a34.432 34.432 0 0 0 0 68.864h482.432a34.432 34.432 0 0 0 0-68.864z"
                                                                                Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                                                        </Viewbox>
                                                                    </Border>


                                                                    <!--  标签戳  -->

                                                                    <ItemsControl
                                                                        Grid.Column="2"
                                                                        Margin="5,5"
                                                                        HorizontalAlignment="Right"
                                                                        ItemsSource="{Binding TagStamp}"
                                                                        Tag="{Binding DataID}"
                                                                        Visibility="{Binding Path=DisplayStamp, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}">
                                                                        <ItemsControl.ItemsPanel>
                                                                            <ItemsPanelTemplate>
                                                                                <StackPanel Orientation="Horizontal" />
                                                                            </ItemsPanelTemplate>
                                                                        </ItemsControl.ItemsPanel>
                                                                        <ItemsControl.ItemTemplate>
                                                                            <DataTemplate>
                                                                                <Label
                                                                                    Margin="2,0"
                                                                                    Padding="4"
                                                                                    Background="{Binding BackgroundBrush}"
                                                                                    BorderThickness="0"
                                                                                    Content="{Binding TagName}"
                                                                                    Foreground="{Binding ForegroundBrush}"
                                                                                    Tag="{Binding TagID}">
                                                                                    <Label.ContextMenu>
                                                                                        <ContextMenu>
                                                                                            <MenuItem Click="DeleteVideoTagStamp" Header="删除该标记" />
                                                                                        </ContextMenu>
                                                                                    </Label.ContextMenu>
                                                                                </Label>

                                                                            </DataTemplate>
                                                                        </ItemsControl.ItemTemplate>
                                                                    </ItemsControl>


                                                                </Grid>

                                                                <!--  日期  -->
                                                                <TextBox
                                                                    Grid.Row="2"
                                                                    Margin="0,0"
                                                                    Padding="10,5"
                                                                    HorizontalAlignment="Left"
                                                                    Background="Transparent"
                                                                    FontSize="15"
                                                                    Foreground="{DynamicResource Global.Foreground}"
                                                                    IsEnabled="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}"
                                                                    Opacity="0.5"
                                                                    Style="{StaticResource ReadOnlyNoWrapTextBox}"
                                                                    Text="{Binding ReleaseDate, Mode=OneWay}"
                                                                    TextAlignment="Left"
                                                                    Visibility="{Binding Path=DisplayDate, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}" />

                                                                <!--  评分  -->
                                                                <StackPanel
                                                                    Grid.Row="3"
                                                                    Width="auto"
                                                                    Margin="15,5,0,10"
                                                                    HorizontalAlignment="Left"
                                                                    Cursor="Hand"
                                                                    IsEnabled="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}"
                                                                    PreviewMouseLeftButtonDown="StackPanel_PreviewMouseLeftButtonDown"
                                                                    Tag="{Binding DataID, Mode=OneWay}"
                                                                    Visibility="{Binding Path=DisplayFavorites, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}">
                                                                    <hc:Rate
                                                                        AllowClear="True"
                                                                        AllowHalf="True"
                                                                        Background="{DynamicResource Window.Title.Background}"
                                                                        DefaultValue="0"
                                                                        Foreground="{DynamicResource Common.HighLight.Deep.Background}"
                                                                        ItemHeight="15"
                                                                        ItemMargin="3 0"
                                                                        ValueChanged="Rate_ValueChanged"
                                                                        Value="{Binding Grade, Mode=TwoWay}" />
                                                                </StackPanel>

                                                                <TextBox
                                                                    Grid.Row="4"
                                                                    Width="{Binding Path=GlobalImageWidth, Source={x:Static p:Settings.Default}, Converter={StaticResource BiggerWidthConverter}, Mode=OneWay}"
                                                                    Height="35"
                                                                    Margin="0,5,0,15"
                                                                    Padding="10,0"
                                                                    HorizontalAlignment="Center"
                                                                    Background="Transparent"
                                                                    FontSize="14"
                                                                    Foreground="{DynamicResource Global.Foreground}"
                                                                    IsEnabled="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}"
                                                                    MouseLeftButtonDown="CopyText"
                                                                    Opacity="0.5"
                                                                    Style="{StaticResource ReadOnlyNoWrapTextBox}"
                                                                    Text="{Binding Title, Mode=OneWay}"
                                                                    TextAlignment="Left"
                                                                    TextWrapping="Wrap"
                                                                    ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}"
                                                                    Visibility="{Binding Path=DisplayTitle, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}" />


                                                            </Grid>
                                                        </Grid>

                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>




                                            <!--</ScrollViewer>-->





                                            <!--  返回顶部  -->
                                            <Canvas
                                                Width="20"
                                                Height="20"
                                                Margin="0,0,70,40"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Bottom"
                                                Panel.ZIndex="5"
                                                Cursor="Hand"
                                                MouseLeftButtonUp="GotoTop"
                                                Visibility="{Binding GoToTopCanvas, FallbackValue=Hidden}">
                                                <Ellipse
                                                    Width="40"
                                                    Height="40"
                                                    Margin="0,0,5,5"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Bottom"
                                                    Style="{StaticResource BlueEllipse}" />
                                                <Image
                                                    Canvas.Left="9"
                                                    Canvas.Top="8"
                                                    Height="22"
                                                    HorizontalAlignment="Left"
                                                    Panel.ZIndex="2"
                                                    Source="{Binding Themes, Mode=OneWay, ConverterParameter=up, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                            </Canvas>

                                            <!--  去到底部  -->
                                            <Canvas
                                                Width="20"
                                                Height="20"
                                                Margin="10,10,70,40"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Panel.ZIndex="5"
                                                Cursor="Hand"
                                                MouseLeftButtonUp="GotoBottom"
                                                Visibility="{Binding GoToBottomCanvas}">
                                                <Ellipse
                                                    Width="40"
                                                    Height="40"
                                                    Margin="0,0,5,5"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Bottom"
                                                    Style="{StaticResource BlueEllipse}" />
                                                <Image
                                                    Canvas.Left="9"
                                                    Canvas.Top="10"
                                                    Height="22"
                                                    HorizontalAlignment="Left"
                                                    Panel.ZIndex="2"
                                                    RenderTransformOrigin="0.5,0.5"
                                                    Source="{Binding Themes, Mode=OneWay, ConverterParameter=up, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}">

                                                    <Image.RenderTransform>
                                                        <RotateTransform Angle="180" />
                                                    </Image.RenderTransform>

                                                </Image>
                                            </Canvas>
                                        </Grid>
                                    </Grid>


                                    <!--  底部  -->
                                    <Grid
                                        Grid.Row="2"
                                        HorizontalAlignment="Stretch"
                                        Panel.ZIndex="5"
                                        Visibility="{Binding DisplayPage, Converter={StaticResource BoolToVis}, Mode=TwoWay, Source={x:Static p:Settings.Default}}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>

                                        <Slider
                                            Grid.Column="0"
                                            Width="200"
                                            Margin="20,0,0,0"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            LargeChange="10"
                                            Maximum="800"
                                            Minimum="200"
                                            SmallChange="5"
                                            ValueChanged="ImageSizeSlider_ValueChanged"
                                            Value="{Binding Path=GlobalImageWidth, Source={x:Static p:Settings.Default}, Mode=TwoWay}" />

                                        <Grid Grid.Column="1" HorizontalAlignment="Right">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <Border
                                                Grid.Column="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Background="{DynamicResource Window.Side.Background}"
                                                CornerRadius="5">
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    FontSize="13"
                                                    Style="{StaticResource BaseTextBlock}">
                                                    <TextBlock.Text>
                                                        <MultiBinding StringFormat="{} {0}/{1}">
                                                            <Binding Path="CurrentCount" />
                                                            <Binding Path="TotalCount" />
                                                        </MultiBinding>
                                                    </TextBlock.Text>
                                                </TextBlock>
                                            </Border>


                                            <!--  页码  -->
                                            <chao:Pagination
                                                Name="pagination"
                                                Grid.Column="1"
                                                CurrentPage="{Binding CurrentPage, Mode=OneWay}"
                                                CurrentPageChange="Pagination_CurrentPageChange"
                                                PageSize="{Binding PageSize, Source={x:Static p:Settings.Default}, Mode=TwoWay}"
                                                PageSizes="[10,20,40,50,100]"
                                                ShowCombobox="{Binding PaginationCombobox, Source={x:Static p:Settings.Default}}"
                                                Style="{StaticResource NormalPagination}"
                                                Total="{Binding TotalCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        </Grid>

                                        <!--<StackPanel
                                        Grid.Column="3"
                                        Width="auto"
                                        Height="40"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Background="Transparent"
                                        IsEnabled="{Binding IsLoadingMovie, Converter={StaticResource OppositeBooleanConverter}}"
                                        Orientation="Horizontal"
                                        Visibility="Visible">

                                        <Border
                                            Margin="5,0"
                                            Padding="3"
                                            VerticalAlignment="Center"
                                            BorderBrush="{DynamicResource Window.Side.Background}"
                                            BorderThickness="0"
                                            CornerRadius="3"
                                            Cursor="Hand"
                                            PreviewMouseLeftButtonDown="PreviousPage"
                                            Style="{StaticResource BorderStyle}"
                                            ToolTip="{x:Static lang:Resources.PreviewPage}">
                                            <Image
                                                Width="20"
                                                Height="20"
                                                Source="{Binding Themes, Mode=OneWay, ConverterParameter=left, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                        </Border>




                                        <StackPanel
                                            Width="auto"
                                            Height="40"
                                            Orientation="Horizontal">
                                            <TextBox
                                                Margin="10,1,10,1"
                                                Padding="10,0"
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Center"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                GotFocus="TextBox_GotFocus"
                                                PreviewKeyDown="GoToPage"
                                                Style="{StaticResource BaseTextBox}"
                                                Text="{Binding CurrentPage}" />
                                            <TextBlock
                                                Margin="10,1,10,1"
                                                Padding="10,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                FontSize="15"
                                                Foreground="{DynamicResource Global.Foreground}"
                                                Text="{Binding TotalPage, StringFormat=/\{0\}}" />
                                        </StackPanel>

                                        <Border
                                            Margin="5,0"
                                            Padding="3"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            BorderBrush="{DynamicResource Window.Side.Background}"
                                            BorderThickness="0"
                                            CornerRadius="3"
                                            Cursor="Hand"
                                            PreviewMouseLeftButtonDown="NextPage"
                                            Style="{StaticResource BorderStyle}"
                                            ToolTip="{x:Static lang:Resources.NextPage}">
                                            <Image
                                                Width="20"
                                                Height="20"
                                                Source="{Binding Themes, Mode=OneWay, ConverterParameter=right, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}"
                                                Visibility="Visible" />
                                        </Border>

                                    </StackPanel>-->

                                    </Grid>

                                </Grid>

                            </TabItem>
                            <TabItem Header="演员">
                                <Grid>

                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="auto" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="auto" />
                                    </Grid.RowDefinitions>


                                    <!--  工具栏  -->
                                    <Grid
                                        Grid.Row="0"
                                        Panel.ZIndex="4"
                                        Background="Transparent"
                                        IsEnabled="{Binding IsLoadingMovie, Converter={StaticResource OppositeBooleanConverter}}"
                                        Visibility="{Binding DisplayFunBar, Converter={StaticResource BoolToVis}, Mode=TwoWay, Source={x:Static p:Settings.Default}}">

                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto" />
                                            <RowDefinition Height="auto" />
                                        </Grid.RowDefinitions>




                                        <Grid Grid.Row="0">

                                            <Button
                                                Margin="10,5"
                                                HorizontalAlignment="Left"
                                                Click="NewActor"
                                                Content="新增演员"
                                                Style="{StaticResource ButtonPrimary}" />

                                            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                                <chao:Switch
                                                    Height="25"
                                                    Background="{DynamicResource Window.Side.Background}"
                                                    CheckedBackground="{DynamicResource CheckBox.Checked.Background}"
                                                    Click="SetActorSelectMode"
                                                    IsChecked="{Binding ActorEditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />



                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    Style="{StaticResource BaseTextBlock}"
                                                    Text="{x:Static lang:Resources.MultiSelect}" />





                                                <Border
                                                    VerticalAlignment="Center"
                                                    Background="{DynamicResource Window.Side.Background}"
                                                    CornerRadius="5">
                                                    <StackPanel Name="ActorViewModeStackPanel" Orientation="Horizontal">
                                                        <chao:PathRadioButton
                                                            CornerRadius="5,0,0,5"
                                                            Path="M886.680128 13.86578H136.468464c-37.340302 0-62.274379 24.934078-62.274379 62.274379v871.841311c0 37.340302 24.934078 62.274379 62.274379 62.27438h750.211664c37.340302 0 62.274379-24.934078 62.27438-62.27438V76.140159c0-37.340302-24.934078-62.274379-62.27438-62.274379zM136.468464 76.140159h750.211664V617.878608L710.682029 451.002732 442.731916 730.021143 318.061527 617.878608 136.468464 792.295522V76.140159z m0 871.841311v-78.572752l184.025656-170.524765L599.75579 947.98147H136.468464z m549.401117 0l-200.688918-181.836322 225.501366-234.258701 175.998099 164.321654v251.65174H685.869581z m0 0"
                                                            PathHeight="17"
                                                            Style="{StaticResource PathGroupRadioButton}"
                                                            ToolTip="{x:Static lang:Resources.Thumbnail}" />
                                                        <chao:PathRadioButton
                                                            CornerRadius="0,5,5,0"
                                                            Path="M64 480h352V128H64v352z m64-288h224v224H128V192zM64 928h352V576H64v352z m64-288h224v224H128v-224zM526.848 224H928a32 32 0 1 0 0-64H526.848a32 32 0 0 0 0 64zM928 608H526.848a32 32 0 1 0 0 64H928a32 32 0 1 0 0-64zM928 384H526.848a32 32 0 0 0 0 64H928a32 32 0 1 0 0-64zM928 832H526.848a32 32 0 1 0 0 64H928a32 32 0 1 0 0-64z"
                                                            PathHeight="17"
                                                            Style="{StaticResource PathGroupRadioButton}" />
                                                    </StackPanel>
                                                </Border>

                                                <Border
                                                    Name="ActorSortBorder"
                                                    MouseUp="ShowContextMenu"
                                                    Style="{StaticResource ToolsBarBorderStyle}"
                                                    ToolTip="{x:Static lang:Resources.Sorting}">
                                                    <Border.ContextMenu>
                                                        <ContextMenu HorizontalOffset="-50">
                                                            <MenuItem Header="我的评分" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.Name}" IsCheckable="True" />
                                                            <MenuItem Header="作品数量" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.Country}" IsCheckable="True" />
                                                            <MenuItem Header="民族" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.Actress_Birthday}" IsCheckable="True" />
                                                            <MenuItem Header="血型" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.Height}" IsCheckable="True" />
                                                            <MenuItem Header="体重" IsCheckable="True" />
                                                            <MenuItem Header="性别" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.Actress_Hobby}" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.Actress_Cup}" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.Actress_Chest}" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.Actress_Waist}" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.Actress_Hipline}" IsCheckable="True" />
                                                            <MenuItem Header="打分" IsCheckable="True" />
                                                            <MenuItem Header="{x:Static lang:Resources.Actress_Age}" IsCheckable="True" />

                                                        </ContextMenu>
                                                    </Border.ContextMenu>
                                                    <Viewbox Width="auto" Height="18">
                                                        <Path
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Data="M44.032 451.584c-22.528 0-40.96 18.432-40.96 40.96v38.912c0 22.528 18.432 40.96 40.96 40.96h519.68c22.528 0 40.96-18.432 40.96-40.96v-38.912c0-22.528-18.432-40.96-40.96-40.96H44.032z m0 302.592c-22.528 0-40.96 18.432-40.96 40.96v38.912c0 22.528 18.432 40.96 40.96 40.96h519.68c22.528 0 40.96-18.432 40.96-40.96v-38.912c0-22.528-18.432-40.96-40.96-40.96H44.032z m519.68-484.352c22.528 0 40.96-18.432 40.96-40.96v-38.912c0-22.528-18.432-40.96-40.96-40.96H44.032c-22.528 0-40.96 18.432-40.96 40.96v38.912c0 22.528 18.432 40.96 40.96 40.96h519.68z m170.496-120.832c-22.528 0-40.96 18.432-40.96 40.96V834.56c0 22.528 18.432 40.96 40.96 40.96h38.912c15.36 0 28.16-8.192 35.328-20.48l212.48-212.48c0-22.528-18.432-40.96-40.96-40.96H814.08V189.952c0-22.528-18.432-40.96-40.96-40.96h-38.912z"
                                                            Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                                    </Viewbox>
                                                </Border>

                                            </StackPanel>


                                        </Grid>





                                    </Grid>
                                    <!--  演员展示  -->

                                    <Grid Grid.Row="1">

                                        <Grid.ContextMenu>
                                            <ContextMenu>

                                                <MenuItem
                                                    Click="SelectAllActor"
                                                    Header="{x:Static lang:Resources.SelectAll}"
                                                    Icon="pack://application:,,,/Resources/menuitem/selectall.png" />
                                            </ContextMenu>
                                        </Grid.ContextMenu>


                                        <ScrollViewer
                                            x:Name="ActorScrollViewer"
                                            CanContentScroll="True"
                                            FocusVisualStyle="{x:Null}"
                                            IsDeferredScrollingEnabled="False"
                                            VerticalScrollBarVisibility="Auto">


                                            <ItemsControl
                                                x:Name="ActorItemsControl"
                                                Margin="5,5,5,5"
                                                Background="Transparent"
                                                ItemContainerStyle="{StaticResource ActorContainerStyle}"
                                                ItemsSource="{Binding CurrentActorList}"
                                                ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                <ItemsControl.Resources>
                                                    <ItemsPanelTemplate x:Key="WrapTemplate">
                                                        <WrapPanel />
                                                    </ItemsPanelTemplate>
                                                    <ItemsPanelTemplate x:Key="VerticalStackTemplate">
                                                        <VirtualizingStackPanel Orientation="Vertical" />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.Resources>
                                                <ItemsControl.Style>
                                                    <Style TargetType="ItemsControl">
                                                        <Setter Property="ItemsPanel" Value="{DynamicResource WrapTemplate}" />
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding ActorViewMode, Source={x:Static p:Settings.Default}}" Value="1">
                                                                <Setter Property="ItemsPanel" Value="{DynamicResource VerticalStackTemplate}" />
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </ItemsControl.Style>
                                            </ItemsControl>
                                        </ScrollViewer>
                                    </Grid>

                                    <!--  底部  -->
                                    <Grid
                                        Grid.Row="2"
                                        Panel.ZIndex="5"
                                        Visibility="{Binding DisplayPage, Converter={StaticResource BoolToVis}, Mode=TwoWay, Source={x:Static p:Settings.Default}}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="auto" />
                                            <ColumnDefinition Width="auto" />
                                        </Grid.ColumnDefinitions>

                                        <Border
                                            Grid.Column="1"
                                            VerticalAlignment="Center"
                                            Background="{DynamicResource Window.Title.Background}"
                                            CornerRadius="5">
                                            <TextBlock VerticalAlignment="Center" Style="{StaticResource BaseTextBlock}">
                                                <TextBlock.Text>
                                                    <MultiBinding StringFormat="{} {0}/{1}">
                                                        <Binding Path="CurrentActorCount" />
                                                        <Binding Path="ActorTotalCount" />
                                                    </MultiBinding>
                                                </TextBlock.Text>
                                            </TextBlock>
                                        </Border>


                                        <!--  页码  -->
                                        <chao:Pagination
                                            Name="actorPagination"
                                            Grid.Column="2"
                                            CurrentPage="1"
                                            CurrentPageChange="CurrentActorPageChange"
                                            PageSizeChange="ActorPageSizeChange"
                                            Style="{StaticResource NormalPagination}"
                                            Total="{Binding ActorTotalCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                    </Grid>

                                </Grid>

                            </TabItem>

                            <TabItem Header="标签（清单）">
                                <Grid Margin="10" HorizontalAlignment="Stretch">
                                    <ItemsControl
                                        Name="LabelListItemsControl"
                                        Margin="5"
                                        Background="Transparent"
                                        ItemsSource="{Binding LabelList}"
                                        ScrollViewer.VerticalScrollBarVisibility="Auto">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <WrapPanel Orientation="Horizontal" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Style="{StaticResource RoundBorderStyle}">
                                                    <TextBlock
                                                        MouseUp="Label_MouseDown"
                                                        Style="{StaticResource GenreTextBlock}"
                                                        Text="{Binding}" />
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>


                                </Grid>


                            </TabItem>
                            <TabItem Header="其他分类">
                                <Grid
                                    Margin="5"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch"
                                    Background="Transparent">

                                    <!--  等待  -->
                                    <Grid
                                        Grid.Row="1"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Panel.ZIndex="10"
                                        Visibility="{Binding IsLoadingClassify, Converter={StaticResource BoolToVisibilityConverter}}">
                                        <Grid MinWidth="150" MaxWidth="250">
                                            <Border
                                                Margin="5"
                                                Background="{DynamicResource Global.Foreground}"
                                                CornerRadius="5"
                                                Effect="{StaticResource NormalBlurEffect}" />

                                            <Border
                                                Margin="5"
                                                Background="{DynamicResource Window.InnerDialog.Background}"
                                                CornerRadius="5">

                                                <Grid Margin="5">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*" />
                                                        <RowDefinition Height="auto" />
                                                    </Grid.RowDefinitions>
                                                    <StackPanel
                                                        Grid.Row="0"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                        <hc:LoadingCircle Height="30" Foreground="{DynamicResource Global.Foreground}" />
                                                        <TextBlock
                                                            Grid.Row="0"
                                                            MaxHeight="300"
                                                            Margin="10"
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Background="Transparent"
                                                            FontSize="18"
                                                            Foreground="{DynamicResource Global.Foreground}"
                                                            Style="{StaticResource BaseTextBlock}"
                                                            Text="{x:Static lang:Resources.Loading}" />

                                                    </StackPanel>


                                                </Grid>


                                            </Border>
                                        </Grid>

                                    </Grid>



                                    <TabControl
                                        Grid.Row="1"
                                        Margin="5"
                                        Background="Transparent"
                                        BorderBrush="{DynamicResource Window.Foreground}"
                                        IsEnabled="{Binding IsLoadingClassify, Converter={StaticResource OppositeBooleanConverter}}"
                                        SelectedIndex="{Binding ClassifySelectedIndex, Mode=TwoWay}"
                                        SelectionChanged="ClassifyTabControl_SelectionChanged"
                                        Style="{DynamicResource BaseHcTabControlStyle}"
                                        TabStripPlacement="Top">



                                        <TabItem
                                            Background="Transparent"
                                            FontSize="15"
                                            Header="{x:Static lang:Resources.Genre}">
                                            <Grid Margin="10">
                                                <ItemsControl
                                                    Margin="5"
                                                    Background="Transparent"
                                                    ItemsSource="{Binding GenreList}"
                                                    ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <WrapPanel Name="LabelWrapPanel" Orientation="Horizontal" />
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>

                                                            <Border Style="{StaticResource RoundBorderStyle}">
                                                                <TextBlock
                                                                    ContextMenu="{StaticResource TextBlockContextMenu}"
                                                                    MouseLeftButtonUp="ShowSameString"
                                                                    Style="{StaticResource GenreTextBlock}"
                                                                    Text="{Binding}" />

                                                            </Border>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>




                                            </Grid>



                                        </TabItem>
                                        <TabItem
                                            Background="Transparent"
                                            FontSize="15"
                                            Header="{x:Static lang:Resources.Tag}">

                                            <Grid Margin="10">
                                                <ItemsControl
                                                    Margin="5"
                                                    Background="Transparent"
                                                    ItemsSource="{Binding SeriesList}"
                                                    ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <WrapPanel Name="LabelWrapPanel" Orientation="Horizontal" />
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>

                                                            <Border Style="{StaticResource RoundBorderStyle}">
                                                                <TextBlock
                                                                    ContextMenu="{StaticResource TextBlockContextMenu}"
                                                                    MouseLeftButtonUp="ShowSameString"
                                                                    Style="{StaticResource GenreTextBlock}"
                                                                    Text="{Binding}" />
                                                            </Border>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>


                                            </Grid>



                                        </TabItem>
                                        <TabItem
                                            Background="Transparent"
                                            FontSize="15"
                                            Header="{x:Static lang:Resources.Studio}">

                                            <Grid Margin="10">
                                                <ItemsControl
                                                    Margin="5"
                                                    Background="Transparent"
                                                    ItemsSource="{Binding StudioList}"
                                                    ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <WrapPanel Orientation="Horizontal" />
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border Style="{StaticResource RoundBorderStyle}">
                                                                <TextBlock
                                                                    ContextMenu="{StaticResource TextBlockContextMenu}"
                                                                    MouseLeftButtonUp="ShowSameString"
                                                                    Style="{StaticResource GenreTextBlock}"
                                                                    Text="{Binding}" />
                                                            </Border>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>


                                            </Grid>



                                        </TabItem>

                                        <TabItem
                                            Background="Transparent"
                                            FontSize="15"
                                            Header="{x:Static lang:Resources.Director}">

                                            <Grid Margin="10">
                                                <ItemsControl
                                                    Margin="5"
                                                    Background="Transparent"
                                                    ItemsSource="{Binding DirectorList}"
                                                    ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <WrapPanel Orientation="Horizontal" />
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>

                                                            <Border Style="{StaticResource RoundBorderStyle}">
                                                                <TextBlock
                                                                    ContextMenu="{StaticResource TextBlockContextMenu}"
                                                                    MouseLeftButtonUp="ShowSameString"
                                                                    Style="{StaticResource GenreTextBlock}"
                                                                    Text="{Binding}" />
                                                            </Border>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>


                                            </Grid>



                                        </TabItem>
                                    </TabControl>
                                </Grid>


                            </TabItem>
                        </TabControl>
                    </Grid>


                </Grid>

                <!--  首次运行显示扫描  -->
                <Grid
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Panel.ZIndex="10"
                    Visibility="{Binding ShowFirstRun, FallbackValue=Hidden}">
                    <Grid>
                        <Border
                            Margin="5"
                            Background="{DynamicResource Global.Foreground}"
                            CornerRadius="0"
                            Effect="{StaticResource NormalBlurEffect}" />

                        <Border
                            Margin="5"
                            Background="{DynamicResource Window.InnerDialog.Background}"
                            CornerRadius="0">

                            <StackPanel
                                Margin="40"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Panel.ZIndex="1"
                                FocusVisualStyle="{x:Null}"
                                Orientation="Horizontal"
                                Visibility="Visible">
                                <TextBlock
                                    Margin="20,0"
                                    VerticalAlignment="Center"
                                    FontSize="20"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="{x:Static lang:Resources.DragFileInOr}" />
                                <Button
                                    Click="ImportVideo"
                                    Content="{x:Static lang:Resources.Scan}"
                                    Style="{StaticResource ButtonStyleFill}" />
                            </StackPanel>


                        </Border>
                    </Grid>

                    <Button
                        Width="30"
                        Height="30"
                        Margin="5"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Background="{DynamicResource Window.Title.Background}"
                        Click="HideBeginScanGrid"
                        Style="{StaticResource CloseButton}"
                        Tag="{DynamicResource Window.Title.Close.Hover.Background}">
                        <Viewbox
                            Width="12"
                            Height="auto"
                            VerticalAlignment="Center">
                            <Path
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Data="M610.218667 505.6l398.08-387.413333a49.664 49.664 0 0 0 0-71.338667l-2.133334-2.133333a52.992 52.992 0 0 0-73.301333 0L534.784 432.64 136.704 44.373333a52.992 52.992 0 0 0-73.386667 0L61.269333 46.592a48.810667 48.810667 0 0 0 0 71.338667l398.165334 387.669333-398.165334 387.498667a49.664 49.664 0 0 0 0 71.253333l2.218667 2.133333c20.48 19.626667 52.821333 19.626667 73.301333 0l398.08-387.413333 398.08 387.413333c20.48 19.626667 52.906667 19.626667 73.386667 0l2.048-2.133333a49.664 49.664 0 0 0 0-71.253333l-398.08-387.413334z"
                                Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                        </Viewbox>
                    </Button>
                </Grid>








                <!--  标签  -->

                <!--<Grid
                    x:Name="LabelGrid"
                    Width="500"
                    Height="300"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Background="Transparent"
                    Visibility="Collapsed">
                    <Border
                        Margin="2"
                        Background="{DynamicResource Window.InnerDialog.Background}"
                        CornerRadius="5"
                        Effect="{StaticResource NormalDropShadowEffect}" />

                    <Border PreviewMouseLeftButtonUp="HideGrid" Style="{StaticResource GridCloseBorderStyle}">
                        <Image
                            Width="20"
                            Height="20"
                            Source="{Binding Themes, Mode=OneWay, ConverterParameter=close, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                    </Border>

                    <TextBlock
                        Height="auto"
                        Margin="20"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top"
                        Style="{StaticResource BaseTextBlock}"
                        Text="{x:Static lang:Resources.Choose}" />

                    <Grid
                        Margin="20,50,20,5"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="auto" />
                        </Grid.RowDefinitions>

                        <ScrollViewer
                            Grid.Row="0"
                            HorizontalScrollBarVisibility="Disabled"
                            VerticalScrollBarVisibility="Auto">
                            <ItemsControl
                                x:Name="LabelItemsControl"
                                Height="auto"
                                VerticalAlignment="Top"
                                Background="Transparent"
                                ItemsSource="{Binding LabelList}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel
                                            MaxWidth="400"
                                            VerticalAlignment="Top"
                                            Orientation="Horizontal" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>

                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <WrapPanel x:Name="LabelWrapPanel">
                                            <ToggleButton
                                                Margin="10"
                                                Padding="5"
                                                BorderThickness="0"
                                                Content="{Binding}"
                                                FontSize="15"
                                                Foreground="{DynamicResource Global.Foreground}"
                                                Style="{StaticResource ToggleButtonStyle1}" />
                                        </WrapPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>


                        </ScrollViewer>


                        <StackPanel
                            Grid.Row="1"
                            HorizontalAlignment="Right"
                            Orientation="Horizontal">
                            <Button
                                Click="Button_Click"
                                Content="{x:Static lang:Resources.Confirm}"
                                Style="{StaticResource ButtonStyleFill}" />
                            <Button
                                Click="Button_Click_1"
                                Content="{x:Static lang:Resources.Cancel}"
                                Style="{StaticResource ButtonStyleFill}" />
                        </StackPanel>


                    </Grid>


                </Grid>-->

                <!--  删除标签  -->

                <!--<Grid
                    x:Name="LabelDelGrid"
                    Width="500"
                    Height="300"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Background="Transparent"
                    Visibility="Collapsed">
                    <Border
                        Margin="2"
                        Background="{DynamicResource Window.InnerDialog.Background}"
                        CornerRadius="5"
                        Effect="{StaticResource NormalDropShadowEffect}" />

                    <Border PreviewMouseLeftButtonUp="HideGrid" Style="{StaticResource GridCloseBorderStyle}">
                        <Image
                            Width="20"
                            Height="20"
                            Source="{Binding Themes, Mode=OneWay, ConverterParameter=close, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                    </Border>

                    <TextBlock
                        Height="auto"
                        Margin="20"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top"
                        Style="{StaticResource BaseTextBlock}"
                        Text="{x:Static lang:Resources.Menu_LabelManagement}" />

                    <Grid
                        Margin="20,50,20,5"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="auto" />
                        </Grid.RowDefinitions>

                        <ItemsControl
                            x:Name="LabelDelItemsControl"
                            Grid.Row="0"
                            Height="auto"
                            VerticalAlignment="Top"
                            Background="Transparent"
                            ItemsSource="{Binding CurrentMovieLabelList}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel
                                        MaxWidth="400"
                                        VerticalAlignment="Top"
                                        Orientation="Horizontal" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>

                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <WrapPanel x:Name="LabelWrapPanel">
                                        <ToggleButton
                                            Margin="10"
                                            Padding="5"
                                            BorderThickness="0"
                                            Content="{Binding}"
                                            FontSize="15"
                                            Foreground="{DynamicResource Global.Foreground}"
                                            Style="{StaticResource ToggleButtonStyle1}" />
                                    </WrapPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <StackPanel
                            Grid.Row="1"
                            HorizontalAlignment="Right"
                            Orientation="Horizontal">
                            <Button
                                Click="AddSingleLabel"
                                Content="{x:Static lang:Resources.Add}"
                                Style="{StaticResource ButtonStyleFill}" />
                            <Button
                                Click="ClearSingleLabel"
                                Content="{x:Static lang:Resources.Clear}"
                                Style="{StaticResource ButtonStyleFill}" />
                            <Button
                                Click="DeleteSingleLabel"
                                Content="{x:Static lang:Resources.Delete}"
                                Style="{StaticResource ButtonStyleFill}" />
                        </StackPanel>




                    </Grid>


                </Grid>-->


            </Grid>
            <Grid
                Grid.Row="2"
                Height="30"
                Background="{DynamicResource Window.Title.Background}"
                Visibility="{Binding DisplayStatusBar, Converter={StaticResource BoolToVis}, Mode=TwoWay, Source={x:Static p:Settings.Default}}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition Width="auto" />
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBox
                        Margin="10,0"
                        Padding="0"
                        VerticalContentAlignment="Center"
                        FontSize="12"
                        Style="{StaticResource ReadOnlyNoWrapTextBox}"
                        Text="就绪" />
                </StackPanel>
                <StackPanel
                    Grid.Column="2"
                    Margin="5,0"
                    Orientation="Horizontal">

                    <Grid>
                        <chao:PathMsg
                            Name="screenShotPathMsg"
                            MouseLeftButtonUp="ShowScreenShotPopup"
                            MsgCount="{Binding ScreenShotTasks.Count}"
                            Path="M443.972267 437.316267L200.157867 117.3504a39.355733 39.355733 0 0 1 5.5296-53.6576 36.4544 36.4544 0 0 1 51.8144 3.754667l254.088533 291.908266 254.0544-291.9424a36.932267 36.932267 0 0 1 51.882667-3.754666 39.287467 39.287467 0 0 1 5.597866 53.76l-243.8144 319.931733 151.381334 174.1824a185.002667 185.002667 0 0 1 223.675733 81.749333 184.0128 184.0128 0 0 1-43.008 233.984 184.388267 184.388267 0 0 1-237.704533-2.7648 183.978667 183.978667 0 0 1-37.341867-234.973866 32.768 32.768 0 0 1-3.754667-4.608l-120.968533-158.378667-67.6864-89.1904 0.068267-0.034133z m-49.493334 57.002666l70.929067 92.8768-74.205867 97.621334c-1.4336 1.365333-2.389333 3.310933-3.754666 4.676266a184.490667 184.490667 0 0 1-275.114667 237.738667 184.558933 184.558933 0 0 1 180.736-315.733333l101.376-117.213867zM240.776533 894.976a110.011733 110.011733 0 0 0 91.5456-64.443733 111.616 111.616 0 0 0-11.707733-111.616 111.5136 111.5136 0 0 0-102.7072-44.373334 110.523733 110.523733 0 0 0-96.221867 121.4464 110.045867 110.045867 0 0 0 119.0912 98.986667z m541.7984 0a110.421333 110.421333 0 0 0 102.7072-44.3392 110.660267 110.660267 0 0 0-25.258666-155.921067 110.011733 110.011733 0 0 0-54.613334-19.729066 110.455467 110.455467 0 0 0-119.534933 98.542933 111.274667 111.274667 0 0 0 96.699733 121.4464z"
                            Style="{StaticResource NormalPathMsg}" />
                        <Popup
                            x:Name="screenShotStatusPopup"
                            Width="500"
                            MaxHeight="600"
                            AllowsTransparency="True"
                            HorizontalOffset="-450"
                            Placement="Top"
                            PlacementTarget="{Binding ElementName=downloadPathMsg}"
                            PopupAnimation="Fade"
                            StaysOpen="True"
                            VerticalOffset="0">
                            <Grid Margin="5">
                                <Border
                                    Margin="5"
                                    Background="{DynamicResource Menu.Background}"
                                    CornerRadius="0 0 5 5"
                                    Effect="{StaticResource PopupDropShadowEffect}" />
                                <Grid Margin="5">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="auto" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="auto" />
                                    </Grid.RowDefinitions>
                                    <Grid
                                        Grid.Row="0"
                                        Height="35"
                                        Background="{DynamicResource Window.Title.Background}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="auto" />
                                            <ColumnDefinition Width="auto" />
                                        </Grid.ColumnDefinitions>

                                        <TextBlock
                                            Margin="10,0"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="截图任务" />

                                        <Button
                                            Grid.Column="1"
                                            BorderThickness="0"
                                            Click="ShowContextMenu"
                                            Content="清除列表"
                                            Style="{StaticResource FlatButton}">
                                            <Button.ContextMenu>
                                                <ContextMenu HorizontalOffset="-70" VerticalOffset="5">
                                                    <MenuItem
                                                        Click="RemoveCompleteScreenShot"
                                                        Header="已完成"
                                                        IsCheckable="False" />
                                                    <MenuItem
                                                        Click="RemoveCancelScreenShot"
                                                        Header="已取消"
                                                        IsCheckable="False" />
                                                </ContextMenu>
                                            </Button.ContextMenu>
                                        </Button>

                                        <Border
                                            Grid.Column="2"
                                            Margin="5,0"
                                            MouseLeftButtonUp="HideScreenShotPopup"
                                            Style="{StaticResource ToolsBarBorderStyle}">

                                            <Viewbox
                                                Width="15"
                                                Height="15"
                                                RenderTransformOrigin="0.5,0.5">
                                                <Viewbox.RenderTransform>
                                                    <RotateTransform Angle="90" />
                                                </Viewbox.RenderTransform>
                                                <Path
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Data="M312.889 995.556c-17.067 0-28.445-5.69-39.822-17.067-22.756-22.756-17.067-56.889 5.689-79.645L642.844 568.89c11.378-11.378 17.067-22.756 17.067-34.133 0-11.378-5.689-22.756-17.067-34.134L273.067 187.733c-22.756-22.755-28.445-56.889-5.69-79.644 22.756-22.756 56.89-28.445 79.645-5.689l364.09 312.889C745.243 443.733 768 489.244 768 534.756s-17.067 85.333-51.2 119.466L352.711 984.178c-11.378 5.689-28.444 11.378-39.822 11.378z"
                                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                            </Viewbox>
                                        </Border>


                                    </Grid>


                                    <ItemsControl
                                        Grid.Row="1"
                                        Margin="10"
                                        ItemsSource="{Binding ScreenShotTasks}"
                                        Style="{StaticResource ItemsControlVirtualizedStyle}">

                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Grid Name="rootGrid">
                                                    <Border
                                                        Margin="5"
                                                        Background="{DynamicResource Menu.Background}"
                                                        CornerRadius="0 0 5 5"
                                                        Effect="{StaticResource PopupDropShadowEffect}" />
                                                    <Grid Margin="5">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="auto" />
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="auto" />
                                                        </Grid.ColumnDefinitions>

                                                        <fa:ImageAwesome
                                                            Grid.Column="0"
                                                            Width="30"
                                                            Margin="10"
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center">
                                                            <fa:ImageAwesome.Style>
                                                                <Style TargetType="fa:ImageAwesome">
                                                                    <Style.Triggers>

                                                                        <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="Canceled">
                                                                            <Setter Property="Icon" Value="TimesCircle" />
                                                                            <Setter Property="Foreground" Value="Red" />
                                                                            <Setter Property="Spin" Value="False" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="WaitingToRun">
                                                                            <Setter Property="Icon" Value="Hourglass" />
                                                                            <Setter Property="Foreground" Value="{DynamicResource Control.Disabled.Background}" />
                                                                            <Setter Property="Spin" Value="False" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="RanToCompletion">
                                                                            <Setter Property="Icon" Value="CheckCircle" />
                                                                            <Setter Property="Foreground" Value="#20B759" />
                                                                            <Setter Property="Spin" Value="False" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="Running">
                                                                            <Setter Property="Icon" Value="Refresh" />
                                                                            <Setter Property="Foreground" Value="{DynamicResource Common.HighLight.Hover.Background}" />
                                                                            <Setter Property="Spin" Value="True" />
                                                                        </DataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </fa:ImageAwesome.Style>
                                                        </fa:ImageAwesome>


                                                        <StackPanel
                                                            Grid.Column="1"
                                                            MaxWidth="280"
                                                            Margin="5"
                                                            Orientation="Vertical">
                                                            <TextBlock
                                                                Margin="5"
                                                                HorizontalAlignment="Left"
                                                                FontSize="15"
                                                                FontWeight="Bold"
                                                                Text="{Binding Title}"
                                                                TextTrimming="WordEllipsis"
                                                                ToolTip="{Binding Title}" />
                                                            <ProgressBar
                                                                Height="2"
                                                                Margin="5,0"
                                                                Maximum="100"
                                                                Value="{Binding Progress}">
                                                                <ProgressBar.Style>
                                                                    <Style BasedOn="{StaticResource NormalStaticProgressBar}" TargetType="ProgressBar">
                                                                        <Style.Triggers>



                                                                            <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="RanToCompletion">
                                                                                <Setter Property="Visibility" Value="Hidden" />
                                                                            </DataTrigger>

                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </ProgressBar.Style>
                                                            </ProgressBar>
                                                            <Grid>
                                                                <TextBlock Margin="5" Text="{Binding CreateTime}" />
                                                                <TextBlock
                                                                    Margin="5"
                                                                    HorizontalAlignment="Right"
                                                                    Text="{Binding Progress, StringFormat=\{0\} %}">
                                                                    <TextBlock.Style>
                                                                        <Style TargetType="TextBlock">
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="RanToCompletion">
                                                                                    <Setter Property="Visibility" Value="Hidden" />
                                                                                </DataTrigger>

                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </TextBlock.Style>
                                                                </TextBlock>
                                                            </Grid>
                                                            <StackPanel Margin="5" Orientation="Horizontal">
                                                                <TextBlock Text="{Binding StatusText}" />
                                                                <TextBlock Foreground="Red" Text="{Binding Message, StringFormat='   {0} '}" />

                                                            </StackPanel>



                                                        </StackPanel>
                                                        <WrapPanel
                                                            Grid.Column="2"
                                                            Width="100"
                                                            VerticalAlignment="Center"
                                                            Orientation="Horizontal">
                                                            <WrapPanel.Style>
                                                                <Style TargetType="WrapPanel">
                                                                    <Setter Property="Visibility" Value="Hidden" />

                                                                    <Style.Triggers>
                                                                        <DataTrigger Binding="{Binding ElementName=rootGrid, Path=IsMouseOver}" Value="True">
                                                                            <Setter Property="Visibility" Value="Visible" />
                                                                        </DataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </WrapPanel.Style>
                                                            <Button
                                                                Click="CancelScreenShotTask"
                                                                Content="取消"
                                                                Tag="{Binding DataID}" />
                                                            <!--<Button
                                                                    Click="PauseDownloadTask"
                                                                    Content="暂停"
                                                                    IsEnabled="{Binding Running}"
                                                                    Tag="{Binding DataID}" />-->
                                                            <Button
                                                                Click="ShowScreenShotDetail"
                                                                Content="详情"
                                                                Tag="{Binding DataID}" />
                                                        </WrapPanel>
                                                    </Grid>
                                                </Grid>

                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>


                                    </ItemsControl>



                                    <StackPanel
                                        Grid.Row="2"
                                        Orientation="Vertical"
                                        Visibility="{Binding ScreenShotVisibility}">

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="auto" />
                                            </Grid.ColumnDefinitions>
                                            <ProgressBar
                                                Grid.Column="0"
                                                Height="4"
                                                Margin="10,0"
                                                Maximum="100"
                                                Minimum="0"
                                                Style="{StaticResource NormalStaticProgressBar}"
                                                Value="{Binding ScreenShotProgress}" />
                                            <TextBlock
                                                Grid.Column="1"
                                                Margin="10,0"
                                                Text="{Binding ScreenShotProgress, StringFormat=\{0\} %}" />
                                        </Grid>

                                        <StackPanel Orientation="Horizontal">
                                            <Button
                                                Click="CancelScreenShotTasks"
                                                Content="取消所有"
                                                Style="{StaticResource ButtonDanger}" />
                                        </StackPanel>
                                    </StackPanel>




                                </Grid>
                            </Grid>
                        </Popup>
                    </Grid>
                    <Grid>
                        <Border
                            Name="msgScan"
                            Width="30"
                            Height="30"
                            Margin="0"
                            MouseLeftButtonUp="ShowMsgScanPopup"
                            Style="{StaticResource FlatBorderStyle}">

                            <Viewbox Height="15" Margin="-5,0,0,0">
                                <Path Data="M232 64c-30.928 0-56 25.072-56 56v784c0 30.928 25.072 56 56 56h560c30.928 0 56-25.072 56-56V120c0-30.928-25.072-56-56-56H232z m0 840V120h560v784H232z m112-736h-64v64h64V168z m168 120c-123.712 0-224 100.288-224 224s100.288 224 224 224 224-100.288 224-224-100.288-224-224-224z m-168 224c0-92.784 75.216-168 168-168s168 75.216 168 168-75.216 168-168 168-168-75.216-168-168z m168-112c-61.856 0-112 50.144-112 112s50.144 112 112 112 112-50.144 112-112-50.144-112-112-112zM744 168h-64v64h64V168zM316 792v56h392v-56H316z" Fill="{DynamicResource Global.Foreground}" />

                            </Viewbox>
                        </Border>
                        <Viewbox
                            Height="14"
                            Margin="3"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom">
                            <Path RenderTransformOrigin="0.5,0.5">
                                <Path.RenderTransform>
                                    <RotateTransform CenterX="0" CenterY="0" />
                                </Path.RenderTransform>
                                <Path.Style>
                                    <Style TargetType="Path">
                                        <Setter Property="Visibility" Value="Hidden" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding ScanStatus}" Value="Scanning">
                                                <DataTrigger.EnterActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation
                                                                RepeatBehavior="Forever"
                                                                Storyboard.TargetProperty="RenderTransform.Angle"
                                                                From="0"
                                                                To="360"
                                                                Duration="0:0:1" />
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </DataTrigger.EnterActions>
                                                <DataTrigger.ExitActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation
                                                                Storyboard.TargetProperty="RenderTransform.Angle"
                                                                To="0"
                                                                Duration="0:0:0" />
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </DataTrigger.ExitActions>
                                                <Setter Property="Visibility" Value="Visible" />
                                                <Setter Property="Fill" Value="{DynamicResource Common.HighLight.Hover.Background}" />
                                                <Setter Property="Data" Value="M171.292444 548.977778a337.464889 337.464889 0 0 1 210.488889-367.445334c111.616-43.52 231.992889-22.698667 317.212445 39.480889L626.460444 338.488889l325.233778-1.251556L835.470222 0l-59.562666 96.426667C650.353778 15.075556 479.175111-11.491556 329.272889 46.933333 121.628444 127.886222 2.048 337.351111 25.6 549.034667h145.635556zM852.764444 465.009778a337.464889 337.464889 0 0 1-210.488888 367.502222c-102.627556 39.992889-215.836444 24.917333-302.819556-29.013333l65.536-106.211556-349.752889-20.48L203.093333 1024l62.065778-100.465778c125.553778 81.351111 279.608889 102.001778 429.511111 43.52 207.644444-80.952889 327.224889-290.304 303.616-502.044444h-145.635555z" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding ScanStatus}" Value="Complete">
                                                <Setter Property="Visibility" Value="Visible" />
                                                <Setter Property="Fill" Value="Green" />
                                                <Setter Property="Data" Value="M947.605 139.803c-15.766-15.763-39.836-14.107-57.1 0-133.71 109.263-541.798 419.618-541.798 419.618s-165.018-71.128-216.268-94.163c-20.338-9.14-41.328-15.766-57.101 0-15.763 15.763-15.763 41.326 0 57.087 0 0 242.992 244.252 244.157 245.415 8.052 8.052 18.652 11.867 29.212 11.693 10.554 0.175 21.154-3.64 29.211-11.693 1.159-1.163 427.18-428.238 569.686-570.87 15.759-15.772 15.768-41.324 0.001-57.087z m0 0" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding ScanStatus}" Value="None">
                                                <Setter Property="Visibility" Value="Hidden" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Path.Style>
                            </Path>

                        </Viewbox>

                        <Popup
                            x:Name="scanStatusPopup"
                            Width="350"
                            MaxHeight="600"
                            AllowsTransparency="True"
                            HorizontalOffset="-300"
                            Placement="Top"
                            PlacementTarget="{Binding ElementName=msgScan}"
                            PopupAnimation="Fade"
                            StaysOpen="True"
                            VerticalOffset="0">
                            <Grid Margin="5">
                                <Border
                                    Margin="5"
                                    Background="{DynamicResource Menu.Background}"
                                    CornerRadius="0 0 5 5"
                                    Effect="{StaticResource PopupDropShadowEffect}" />
                                <Grid Margin="5">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="auto" />
                                        <RowDefinition Height="*" />
                                    </Grid.RowDefinitions>
                                    <Grid
                                        Grid.Row="0"
                                        Height="35"
                                        Background="{DynamicResource Window.Title.Background}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="auto" />
                                            <ColumnDefinition Width="auto" />
                                        </Grid.ColumnDefinitions>

                                        <TextBlock
                                            Margin="10,0"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="扫描任务" />

                                        <Border
                                            Grid.Column="1"
                                            Margin="0"
                                            MouseLeftButtonUp="ClearScanTasks"
                                            Style="{StaticResource ToolsBarBorderStyle}">

                                            <Viewbox Width="15" Height="15">
                                                <Path
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Data="M187.118702 146.498562l771.355932 0.002047v60.796667l-771.355932-0.002046v-60.796668z m0 222.286666l771.355932 0.002046v60.796668l-771.355932-0.002047v-60.796667z m0 224.186945l406.576948 0.001023v60.796668l-406.576948-0.001023v-60.796668z m0 222.286666l406.576948 0.001023v60.796668l-406.576948-0.001024v-60.796667zM65.525366 146.497539h60.796668v60.796668H65.525366v-60.796668z m0 222.287689h60.796668v60.796667H65.525366v-60.796667z m0 224.186945h60.796668v60.796668H65.525366v-60.796668z m0 222.286666h60.796668v60.796667H65.525366v-60.796667z m873.494171 4.916986l-85.97614-85.97614 85.97614-85.976141-57.326637-57.326636-85.97614 85.97614-85.97614-85.97614-57.325613 57.325613 85.97614 85.97614-85.97614 85.97614 57.325613 57.326637 85.97614-85.97614 85.977164 85.97614"
                                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                            </Viewbox>
                                        </Border>
                                        <Border
                                            Grid.Column="2"
                                            Margin="5,0"
                                            MouseLeftButtonUp="HideScanPopup"
                                            Style="{StaticResource ToolsBarBorderStyle}">

                                            <Viewbox
                                                Width="15"
                                                Height="15"
                                                RenderTransformOrigin="0.5,0.5">
                                                <Viewbox.RenderTransform>
                                                    <RotateTransform Angle="90" />
                                                </Viewbox.RenderTransform>
                                                <Path
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Data="M312.889 995.556c-17.067 0-28.445-5.69-39.822-17.067-22.756-22.756-17.067-56.889 5.689-79.645L642.844 568.89c11.378-11.378 17.067-22.756 17.067-34.133 0-11.378-5.689-22.756-17.067-34.134L273.067 187.733c-22.756-22.755-28.445-56.889-5.69-79.644 22.756-22.756 56.89-28.445 79.645-5.689l364.09 312.889C745.243 443.733 768 489.244 768 534.756s-17.067 85.333-51.2 119.466L352.711 984.178c-11.378 5.689-28.444 11.378-39.822 11.378z"
                                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                            </Viewbox>
                                        </Border>


                                    </Grid>

                                    <ItemsControl
                                        Grid.Row="1"
                                        Margin="10"
                                        ItemsSource="{Binding ScanTasks}"
                                        Style="{StaticResource ItemsControlVirtualizedStyle}">

                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Grid Name="rootGrid">
                                                    <Border
                                                        Margin="5"
                                                        Background="{DynamicResource Menu.Background}"
                                                        CornerRadius="0 0 5 5"
                                                        Effect="{StaticResource PopupDropShadowEffect}" />
                                                    <Grid Margin="5">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="auto" />
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="auto" />
                                                        </Grid.ColumnDefinitions>
                                                        <fa:ImageAwesome
                                                            Grid.Column="0"
                                                            Width="30"
                                                            Margin="10"
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center">
                                                            <fa:ImageAwesome.Style>
                                                                <Style TargetType="fa:ImageAwesome">
                                                                    <Style.Triggers>

                                                                        <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="Canceled">
                                                                            <Setter Property="Icon" Value="TimesCircle" />
                                                                            <Setter Property="Foreground" Value="Red" />
                                                                            <Setter Property="Spin" Value="False" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="WaitingToRun">
                                                                            <Setter Property="Icon" Value="Hourglass" />
                                                                            <Setter Property="Foreground" Value="{DynamicResource Control.Disabled.Background}" />
                                                                            <Setter Property="Spin" Value="False" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="RanToCompletion">
                                                                            <Setter Property="Icon" Value="CheckCircle" />
                                                                            <Setter Property="Foreground" Value="#20B759" />
                                                                            <Setter Property="Spin" Value="False" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="Running">
                                                                            <Setter Property="Icon" Value="Refresh" />
                                                                            <Setter Property="Foreground" Value="{DynamicResource Common.HighLight.Hover.Background}" />
                                                                            <Setter Property="Spin" Value="True" />
                                                                        </DataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </fa:ImageAwesome.Style>

                                                        </fa:ImageAwesome>

                                                        <StackPanel
                                                            Grid.Column="1"
                                                            Margin="5"
                                                            Orientation="Vertical">
                                                            <TextBlock Margin="5,10" Text="{Binding CreateTime}" />

                                                            <Grid Width="180" HorizontalAlignment="Left">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="auto" />
                                                                    <ColumnDefinition Width="*" />
                                                                </Grid.ColumnDefinitions>
                                                                <!--<TextBlock
                                                                        Grid.Column="0"
                                                                        Margin="5,10"
                                                                        Text="{Binding StatusText}" />-->
                                                                <TextBlock
                                                                    Grid.Column="1"
                                                                    Margin="5,10"
                                                                    Text="{Binding Message}"
                                                                    TextTrimming="WordEllipsis" />
                                                            </Grid>

                                                        </StackPanel>
                                                        <StackPanel
                                                            Grid.Column="2"
                                                            Width="auto"
                                                            Margin="5,0"
                                                            VerticalAlignment="Center"
                                                            Orientation="Vertical">
                                                            <StackPanel.Style>
                                                                <Style TargetType="StackPanel">
                                                                    <Setter Property="Visibility" Value="Hidden" />

                                                                    <Style.Triggers>
                                                                        <DataTrigger Binding="{Binding ElementName=rootGrid, Path=IsMouseOver}" Value="True">
                                                                            <Setter Property="Visibility" Value="Visible" />
                                                                        </DataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </StackPanel.Style>
                                                            <Button
                                                                Click="CancelScanTask"
                                                                Content="取消"
                                                                IsEnabled="{Binding Running}"
                                                                Tag="{Binding CreateTime}" />
                                                            <Button
                                                                Click="ShowScanDetail"
                                                                Content="结果"
                                                                IsEnabled="{Binding Running, Converter={StaticResource OppositeBooleanConverter}}"
                                                                Tag="{Binding CreateTime}" />
                                                        </StackPanel>
                                                    </Grid>
                                                </Grid>

                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>


                                    </ItemsControl>







                                </Grid>
                            </Grid>
                        </Popup>

                    </Grid>
                    <Grid>
                        <chao:PathMsg
                            Name="downloadPathMsg"
                            MouseLeftButtonUp="ShowDownloadPopup"
                            MsgCount="{Binding DownLoadTasks.Count}"
                            Path="M942.545455 676.584727a34.909091 34.909091 0 0 1 34.90909 34.909091v139.636364c0 70.562909-57.437091 128-128 128h-674.90909a128.139636 128.139636 0 0 1-128-128v-139.636364a34.909091 34.909091 0 1 1 69.818181 0v139.636364c0 32.046545 26.088727 58.181818 58.181819 58.181818h674.90909c32.093091 0 58.181818-26.135273 58.181819-58.181818v-139.636364a34.909091 34.909091 0 0 1 34.909091-34.909091z m-455.214546 129.396364l-164.584727-164.561455a34.909091 34.909091 0 1 1 49.361454-49.361454l104.983273 104.96V81.454545a34.909091 34.909091 0 1 1 69.818182 0v615.563637l104.96-104.96a34.909091 34.909091 0 1 1 49.361454 49.361454l-164.538181 164.561455a34.792727 34.792727 0 0 1-24.669091 10.216727c-8.96 0-17.873455-3.397818-24.715637-10.216727z"
                            Style="{StaticResource NormalPathMsg}" />
                        <Popup
                            x:Name="downloadStatusPopup"
                            Width="500"
                            MaxHeight="600"
                            AllowsTransparency="True"
                            HorizontalOffset="-450"
                            Placement="Top"
                            PlacementTarget="{Binding ElementName=downloadPathMsg}"
                            PopupAnimation="Fade"
                            StaysOpen="True"
                            VerticalOffset="0">
                            <Grid Margin="5">
                                <Border
                                    Margin="5"
                                    Background="{DynamicResource Menu.Background}"
                                    CornerRadius="0 0 5 5"
                                    Effect="{StaticResource PopupDropShadowEffect}" />
                                <Grid Margin="5">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="auto" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="auto" />
                                    </Grid.RowDefinitions>
                                    <Grid
                                        Grid.Row="0"
                                        Height="35"
                                        Background="{DynamicResource Window.Title.Background}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="auto" />
                                            <ColumnDefinition Width="auto" />
                                        </Grid.ColumnDefinitions>

                                        <TextBlock
                                            Margin="10,0"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="下载任务" />

                                        <Button
                                            Grid.Column="1"
                                            BorderThickness="0"
                                            Click="ShowContextMenu"
                                            Content="清除列表"
                                            Style="{StaticResource FlatButton}">
                                            <Button.ContextMenu>
                                                <ContextMenu HorizontalOffset="-70" VerticalOffset="5">
                                                    <MenuItem
                                                        Click="RemoveCompleteTask"
                                                        Header="已完成"
                                                        IsCheckable="False" />
                                                    <MenuItem
                                                        Click="RemoveCancelTask"
                                                        Header="已取消"
                                                        IsCheckable="False" />
                                                </ContextMenu>
                                            </Button.ContextMenu>
                                        </Button>

                                        <Border
                                            Grid.Column="2"
                                            Margin="5,0"
                                            MouseLeftButtonUp="HideDownloadPopup"
                                            Style="{StaticResource ToolsBarBorderStyle}">

                                            <Viewbox
                                                Width="15"
                                                Height="15"
                                                RenderTransformOrigin="0.5,0.5">
                                                <Viewbox.RenderTransform>
                                                    <RotateTransform Angle="90" />
                                                </Viewbox.RenderTransform>
                                                <Path
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Data="M312.889 995.556c-17.067 0-28.445-5.69-39.822-17.067-22.756-22.756-17.067-56.889 5.689-79.645L642.844 568.89c11.378-11.378 17.067-22.756 17.067-34.133 0-11.378-5.689-22.756-17.067-34.134L273.067 187.733c-22.756-22.755-28.445-56.889-5.69-79.644 22.756-22.756 56.89-28.445 79.645-5.689l364.09 312.889C745.243 443.733 768 489.244 768 534.756s-17.067 85.333-51.2 119.466L352.711 984.178c-11.378 5.689-28.444 11.378-39.822 11.378z"
                                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                            </Viewbox>
                                        </Border>


                                    </Grid>

                                    <ItemsControl
                                        Grid.Row="1"
                                        Margin="10"
                                        ItemsSource="{Binding DownLoadTasks}"
                                        Style="{StaticResource ItemsControlVirtualizedStyle}">

                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Grid Name="rootGrid">
                                                    <Border
                                                        Margin="5"
                                                        Background="{DynamicResource Menu.Background}"
                                                        CornerRadius="0 0 5 5"
                                                        Effect="{StaticResource PopupDropShadowEffect}" />
                                                    <Grid Margin="5">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="auto" />
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="auto" />
                                                        </Grid.ColumnDefinitions>

                                                        <fa:ImageAwesome
                                                            Grid.Column="0"
                                                            Width="30"
                                                            Margin="10"
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center">
                                                            <fa:ImageAwesome.Style>
                                                                <Style TargetType="fa:ImageAwesome">
                                                                    <Style.Triggers>

                                                                        <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="Canceled">
                                                                            <Setter Property="Icon" Value="TimesCircle" />
                                                                            <Setter Property="Foreground" Value="Red" />
                                                                            <Setter Property="Spin" Value="False" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="WaitingToRun">
                                                                            <Setter Property="Icon" Value="Hourglass" />
                                                                            <Setter Property="Foreground" Value="{DynamicResource Control.Disabled.Background}" />
                                                                            <Setter Property="Spin" Value="False" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="RanToCompletion">
                                                                            <Setter Property="Icon" Value="CheckCircle" />
                                                                            <Setter Property="Foreground" Value="#20B759" />
                                                                            <Setter Property="Spin" Value="False" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="Running">
                                                                            <Setter Property="Icon" Value="Refresh" />
                                                                            <Setter Property="Foreground" Value="{DynamicResource Common.HighLight.Hover.Background}" />
                                                                            <Setter Property="Spin" Value="True" />
                                                                        </DataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </fa:ImageAwesome.Style>
                                                        </fa:ImageAwesome>


                                                        <StackPanel
                                                            Grid.Column="1"
                                                            MaxWidth="280"
                                                            Margin="5"
                                                            Orientation="Vertical">
                                                            <TextBlock
                                                                Margin="5"
                                                                HorizontalAlignment="Left"
                                                                FontSize="15"
                                                                FontWeight="Bold"
                                                                Text="{Binding Title}"
                                                                TextTrimming="WordEllipsis"
                                                                ToolTip="{Binding Title}" />
                                                            <ProgressBar
                                                                Height="2"
                                                                Margin="5,0"
                                                                Maximum="100"
                                                                Value="{Binding Progress}">
                                                                <ProgressBar.Style>
                                                                    <Style BasedOn="{StaticResource NormalStaticProgressBar}" TargetType="ProgressBar">
                                                                        <Style.Triggers>



                                                                            <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="RanToCompletion">
                                                                                <Setter Property="Visibility" Value="Hidden" />
                                                                            </DataTrigger>

                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </ProgressBar.Style>
                                                            </ProgressBar>
                                                            <Grid>
                                                                <TextBlock Margin="5" Text="{Binding CreateTime}" />
                                                                <TextBlock
                                                                    Margin="5"
                                                                    HorizontalAlignment="Right"
                                                                    Text="{Binding Progress, StringFormat=\{0\} %}">
                                                                    <TextBlock.Style>
                                                                        <Style TargetType="TextBlock">
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding Status, Mode=OneWay}" Value="RanToCompletion">
                                                                                    <Setter Property="Visibility" Value="Hidden" />
                                                                                </DataTrigger>

                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </TextBlock.Style>
                                                                </TextBlock>
                                                            </Grid>
                                                            <StackPanel Margin="5" Orientation="Horizontal">
                                                                <TextBlock Text="{Binding StatusText}" />
                                                                <TextBlock Foreground="Red" Text="{Binding Message, StringFormat='   {0} '}" />

                                                            </StackPanel>



                                                        </StackPanel>
                                                        <WrapPanel
                                                            Grid.Column="2"
                                                            Width="100"
                                                            VerticalAlignment="Center"
                                                            Orientation="Horizontal">
                                                            <WrapPanel.Style>
                                                                <Style TargetType="WrapPanel">
                                                                    <Setter Property="Visibility" Value="Hidden" />

                                                                    <Style.Triggers>
                                                                        <DataTrigger Binding="{Binding ElementName=rootGrid, Path=IsMouseOver}" Value="True">
                                                                            <Setter Property="Visibility" Value="Visible" />
                                                                        </DataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </WrapPanel.Style>
                                                            <Button
                                                                Click="CancelDownloadTask"
                                                                Content="取消"
                                                                IsEnabled="{Binding Running}"
                                                                Tag="{Binding DataID}" />
                                                            <Button
                                                                Click="RestartTask"
                                                                Content="重启"
                                                                IsEnabled="{Binding Running, Converter={StaticResource OppositeBooleanConverter}}"
                                                                Tag="{Binding DataID}" />
                                                            <Button
                                                                Click="ShowDownloadDetail"
                                                                Content="详情"
                                                                Tag="{Binding DataID}" />
                                                        </WrapPanel>
                                                    </Grid>
                                                </Grid>

                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>



                                    <StackPanel Grid.Row="2" Orientation="Vertical">

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="auto" />
                                            </Grid.ColumnDefinitions>
                                            <ProgressBar
                                                Grid.Column="0"
                                                Height="4"
                                                Margin="10,0"
                                                Maximum="100"
                                                Minimum="0"
                                                Style="{StaticResource NormalStaticProgressBar}"
                                                Visibility="{Binding DownLoadVisibility}"
                                                Value="{Binding DownLoadProgress}" />
                                            <TextBlock
                                                Grid.Column="1"
                                                Margin="10,0"
                                                Text="{Binding DownLoadProgress, StringFormat=\{0\} %}"
                                                Visibility="{Binding DownLoadVisibility}" />
                                        </Grid>

                                        <StackPanel Orientation="Horizontal">
                                            <Button
                                                Click="CancelDownloadTasks"
                                                Content="取消所有"
                                                Style="{StaticResource ButtonDanger}" />
                                            <TextBlock
                                                VerticalAlignment="Center"
                                                Text="{Binding Path=DownloadLongTaskDelay, StringFormat=为避免服务器限制，开始长暂停 {0} s}"
                                                Visibility="{Binding DisplayDownloadLongTaskDelay}" />
                                        </StackPanel>


                                    </StackPanel>




                                </Grid>
                            </Grid>
                        </Popup>
                    </Grid>
                    <Grid>
                        <chao:PathMsg
                            Name="msgPathMsg"
                            MouseLeftButtonUp="ShowMessage"
                            MsgCount="{Binding Message.Count}"
                            Path="M864 64H160C107.072 64 64 107.072 64 160v608c0 52.928 43.072 96 96 96h61.92v123.232L443.84 864H864c52.928 0 96-43.072 96-96V160c0-52.928-43.072-96-96-96z m32 704a32 32 0 0 1-32 32H443.84c-10.912 0-21.664 2.816-31.072 8.064l-126.88 70.4V864c0-35.296-28.704-64-64-64H160c-17.632 0-32-14.336-32-32V160c0-17.632 14.368-32 32-32h704c17.664 0 32 14.368 32 32v608z M640 520H256a32 32 0 1 0 0 64h384a32 32 0 1 0 0-64zM768 296H256a32 32 0 0 0 0 64h512a32 32 0 1 0 0-64z"
                            Style="{StaticResource NormalPathMsg}" />
                        <Popup
                            x:Name="msgPopup"
                            Width="350"
                            MaxHeight="600"
                            AllowsTransparency="True"
                            HorizontalOffset="-300"
                            Placement="Top"
                            PlacementTarget="{Binding ElementName=msgPathMsg}"
                            PopupAnimation="Fade"
                            StaysOpen="True"
                            VerticalOffset="0">
                            <Grid Margin="5">
                                <Border
                                    Margin="5"
                                    Background="{DynamicResource Menu.Background}"
                                    CornerRadius="0 0 5 5"
                                    Effect="{StaticResource PopupDropShadowEffect}" />
                                <Grid Margin="5">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="auto" />
                                        <RowDefinition Height="*" />
                                    </Grid.RowDefinitions>
                                    <Grid
                                        Grid.Row="0"
                                        Height="35"
                                        Background="{DynamicResource Window.Title.Background}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="auto" />
                                            <ColumnDefinition Width="auto" />
                                        </Grid.ColumnDefinitions>

                                        <TextBlock
                                            Margin="10,0"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="最近消息" />

                                        <Border
                                            Grid.Column="1"
                                            Margin="0"
                                            MouseLeftButtonUp="ClearMsg"
                                            Style="{StaticResource ToolsBarBorderStyle}">

                                            <Viewbox Width="15" Height="15">
                                                <Path
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Data="M187.118702 146.498562l771.355932 0.002047v60.796667l-771.355932-0.002046v-60.796668z m0 222.286666l771.355932 0.002046v60.796668l-771.355932-0.002047v-60.796667z m0 224.186945l406.576948 0.001023v60.796668l-406.576948-0.001023v-60.796668z m0 222.286666l406.576948 0.001023v60.796668l-406.576948-0.001024v-60.796667zM65.525366 146.497539h60.796668v60.796668H65.525366v-60.796668z m0 222.287689h60.796668v60.796667H65.525366v-60.796667z m0 224.186945h60.796668v60.796668H65.525366v-60.796668z m0 222.286666h60.796668v60.796667H65.525366v-60.796667z m873.494171 4.916986l-85.97614-85.97614 85.97614-85.976141-57.326637-57.326636-85.97614 85.97614-85.97614-85.97614-57.325613 57.325613 85.97614 85.97614-85.97614 85.97614 57.325613 57.326637 85.97614-85.97614 85.977164 85.97614"
                                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                            </Viewbox>
                                        </Border>
                                        <Border
                                            Grid.Column="2"
                                            Margin="5,0"
                                            MouseLeftButtonUp="HideMsgPopup"
                                            Style="{StaticResource ToolsBarBorderStyle}">

                                            <Viewbox
                                                Width="15"
                                                Height="15"
                                                RenderTransformOrigin="0.5,0.5">
                                                <Viewbox.RenderTransform>
                                                    <RotateTransform x:Name="rotateTransform" Angle="90" />
                                                </Viewbox.RenderTransform>
                                                <Path
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Data="M312.889 995.556c-17.067 0-28.445-5.69-39.822-17.067-22.756-22.756-17.067-56.889 5.689-79.645L642.844 568.89c11.378-11.378 17.067-22.756 17.067-34.133 0-11.378-5.689-22.756-17.067-34.134L273.067 187.733c-22.756-22.755-28.445-56.889-5.69-79.644 22.756-22.756 56.89-28.445 79.645-5.689l364.09 312.889C745.243 443.733 768 489.244 768 534.756s-17.067 85.333-51.2 119.466L352.711 984.178c-11.378 5.689-28.444 11.378-39.822 11.378z"
                                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                            </Viewbox>
                                        </Border>


                                    </Grid>

                                    <ItemsControl
                                        Grid.Row="1"
                                        Margin="10"
                                        ItemsSource="{Binding Message}"
                                        Style="{StaticResource ItemsControlVirtualizedStyle}">

                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <chao:MessageCard
                                                    Width="280"
                                                    Height="80"
                                                    Margin="0,10"
                                                    Foreground="{DynamicResource Global.Foreground}"
                                                    Message="{Binding Text}"
                                                    MessageType="{Binding Type}" />
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>


                                    </ItemsControl>







                                </Grid>
                            </Grid>
                        </Popup>
                    </Grid>
                </StackPanel>






            </Grid>
        </Grid>
    </Grid>
</chao:BaseWindow>
