<Window
    x:Class="Jvedio.Window_Details"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cmd="clr-namespace:Jvedio.Core.Command"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:local="clr-namespace:Jvedio"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:media="clr-namespace:Jvedio.Core.Media"
    xmlns:p="clr-namespace:Jvedio.Properties"
    xmlns:super="https://github.com/SuperStudio/SuperControls"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    Title="{Binding CurrentVideo.Title, TargetNullValue=Detail}"
    Width="1230"
    Height="720"
    AllowsTransparency="True"
    Background="{DynamicResource Window.Detail.Background}"
    Closing="Window_Closing"
    ContentRendered="Window_ContentRendered"
    Foreground="{DynamicResource Window.Detail.Foreground}"
    ResizeMode="NoResize"
    WindowStartupLocation="CenterScreen"
    WindowStyle="None"
    mc:Ignorable="d">

    <Window.Resources>



        <local:VidioTypeToIntConverter x:Key="VidioTypeToIntConverter" />


        <Style x:Key="HoverCanvas" TargetType="{x:Type Canvas}">
            <Setter Property="Visibility" Value="Hidden" />
            <Style.Triggers>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}" Value="False" />
                        <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType={x:Type Grid}, Mode=FindAncestor}}" Value="True" />
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Visibility" Value="Visible" />
                </MultiDataTrigger>
                <DataTrigger Binding="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}" Value="True">
                    <Setter Property="Visibility" Value="Hidden" />
                </DataTrigger>
            </Style.Triggers>
        </Style>


        <Style x:Key="ExtraPic" TargetType="Image">

            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Width" Value="auto" />
            <Setter Property="Height" Value="{Binding ElementName=scrollViewer, Path=ActualHeight, Converter={StaticResource SmallerValueConverter}, ConverterParameter=20, Mode=OneWay}" />
            <Setter Property="Source" Value="{Binding}" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding}" Value="{x:Null}">
                    <Setter Property="Source" Value="pack://application:,,,/Resources/Picture/NoPrinting_S.png" />
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="BigImage" TargetType="Image">

            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Margin" Value="10" />
            <Setter Property="Stretch" Value="Uniform" />
            <Setter Property="Source" Value="{Binding CurrentVideo.BigImage, UpdateSourceTrigger=Explicit}" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding CurrentVideo.BigImage}" Value="{x:Null}">
                    <Setter Property="Source" Value="pack://application:,,,/Resources/Picture/NoPrinting_B.png" />
                </DataTrigger>
            </Style.Triggers>
        </Style>


        <Style
            x:Key="ViewTextBox"
            BasedOn="{StaticResource ReadOnlyWrapTextBox}"
            TargetType="TextBox">

            <Setter Property="FontSize" Value="16" />

            <Setter Property="Foreground" Value="{DynamicResource Window.Foreground}" />
            <Setter Property="ContextMenu" Value="{StaticResource CopyContextMenu}" />
            <Setter Property="Margin" Value="0,5" />
            <Setter Property="Padding" Value="0" />
        </Style>



        <Style x:Key="BaseTextBlock" TargetType="TextBlock">
            <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}" />

            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontFamily" Value="微软雅黑" />

            <Setter Property="Foreground" Value="{DynamicResource Window.Sub.Foreground}" />
            <Setter Property="Margin" Value="0,0" />
            <Setter Property="Opacity" Value="0.9" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>





        <!--  如果 tag 为空则不显示  -->
        <Style x:Key="InfoStackPanel" TargetType="StackPanel">

            <Setter Property="Orientation" Value="Horizontal" />
            <Setter Property="Margin" Value="0,5,0,0" />
            <Style.Triggers>
                <Trigger Property="Tag" Value="">
                    <Setter Property="Visibility" Value="Collapsed" />
                </Trigger>
            </Style.Triggers>
        </Style>


    </Window.Resources>



    <Grid
        x:Name="rootGrid"
        Focusable="True"
        PreviewKeyUp="Grid_PreviewKeyUp">

        <Image
            x:Name="BgImage"
            Margin="0"
            Source="{x:Null}"
            Stretch="UniformToFill" />



        <!--  影片关联弹框  -->
        <Popup
            x:Name="AssoDataPopup"
            Width="690"
            Height="auto"
            AllowsTransparency="True"
            HorizontalOffset="-5"
            Placement="MousePoint"
            PopupAnimation="Fade"
            StaysOpen="True"
            VerticalOffset="0">
            <Grid Margin="5">
                <Border
                    Margin="5"
                    Background="{DynamicResource Menu.Background}"
                    CornerRadius="5"
                    Effect="{StaticResource PopupDropShadowEffect}" />

                <StackPanel
                    Margin="25,10"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    Panel.ZIndex="10"
                    Opacity="0.8"
                    Orientation="Horizontal">
                    <Button Click="HideAssoPopup" Content="{DynamicResource Close}" />
                    <Border
                        Padding="10,5"
                        VerticalAlignment="Center"
                        Background="{DynamicResource Window.Title.Background}"
                        CornerRadius="5">
                        <TextBlock Text="{Binding ViewAssociationDatas.Count}" />
                    </Border>
                </StackPanel>


                <ScrollViewer
                    Grid.Row="1"
                    Margin="5"
                    CanContentScroll="True"
                    FocusVisualStyle="{x:Null}"
                    HorizontalScrollBarVisibility="Auto"
                    IsDeferredScrollingEnabled="False"
                    PreviewMouseWheel="ScrollViewer_MouseWheel"
                    VerticalScrollBarVisibility="Hidden">
                    <ItemsControl
                        Name="assoItemsControl"
                        Margin="5,5,5,5"
                        Background="Transparent"
                        ItemsSource="{Binding ViewAssociationDatas}"
                        ScrollViewer.VerticalScrollBarVisibility="Auto">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <!--  影片加载动画  -->
                                <DataTemplate.Triggers>
                                    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <DoubleAnimation
                                                    FillBehavior="Stop"
                                                    Storyboard.TargetName="rootGrid"
                                                    Storyboard.TargetProperty="(UIElement.Opacity)"
                                                    From="0"
                                                    To="1"
                                                    Duration="0:0:0.3" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </DataTemplate.Triggers>

                                <Grid
                                    Name="rootGrid"
                                    Margin="10"
                                    Tag="{Binding DataID, Mode=OneWay}">
                                    <Border Name="rootBorder">
                                        <Border.Style>
                                            <Style BasedOn="{StaticResource SimpleBorder}" TargetType="Border">
                                                <Setter Property="Effect" Value="{StaticResource BlueDropShadowEffect}" />
                                                <Setter Property="BorderThickness" Value="2" />
                                                <Setter Property="CornerRadius" Value="3" />
                                                <Setter Property="Margin" Value="0" />
                                                <Setter Property="MinWidth" Value="200" />
                                                <Setter Property="Background" Value="{DynamicResource ListBoxItem.Background}" />

                                            </Style>
                                        </Border.Style>
                                    </Border>
                                    <Grid Margin="0" Tag="{Binding id, Mode=OneWay}">

                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto" />
                                            <RowDefinition Height="auto" />
                                            <RowDefinition Height="auto" />
                                            <RowDefinition Height="auto" />
                                            <RowDefinition Height="auto" />
                                        </Grid.RowDefinitions>
                                        <!--  图片  -->
                                        <Grid Grid.Row="0">

                                            <media:GifImage
                                                x:Name="gifImage"
                                                Width="{Binding BigImage_Width, Source={x:Static p:Settings.Default}, Mode=OneWay}"
                                                Height="{Binding BigImage_Height, Source={x:Static p:Settings.Default}, Mode=OneWay}"
                                                Margin="2"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                BigImageSource="{Binding BigImage, Mode=OneWay}"
                                                Cursor="Hand"
                                                MouseLeftButtonUp="ShowDetails"
                                                SourceType="BigImage"
                                                Stretch="{Binding Path=MainImageAutoMode, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToImageStretchConverter}, Mode=OneWay}" />

                                            <Button
                                                Height="auto"
                                                Margin="0,5,5,5"
                                                Padding="5"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Bottom"
                                                Click="ShowAssoSubSection"
                                                Cursor="Hand"
                                                IsEnabled="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}"
                                                Style="{StaticResource RoundNormalButton}"
                                                Tag="{DynamicResource Button.Hover.Background}"
                                                Visibility="{Binding HasSubSection, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}">
                                                <Button.ContextMenu>
                                                    <ContextMenu
                                                        Width="100"
                                                        HorizontalOffset="-50"
                                                        VerticalOffset="10" />
                                                </Button.ContextMenu>
                                                <Image
                                                    Width="20"
                                                    Height="20"
                                                    Source="/Resources/Picture/subsection1.png" />
                                            </Button>

                                            <Canvas
                                                Width="40"
                                                Height="40"
                                                Margin="10,0,10,0"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                Cursor="Hand"
                                                MouseLeftButtonUp="PlayAssoVideo"
                                                Opacity="0.5"
                                                Style="{StaticResource HoverCanvas}"
                                                ToolTip="{Binding id, Mode=OneWay}">
                                                <Ellipse
                                                    Canvas.Left="3"
                                                    Canvas.Top="3"
                                                    Width="40"
                                                    Height="40"
                                                    Fill="#DD744C" />
                                                <Polygon
                                                    Cursor="Hand"
                                                    Fill="#F6F7F7"
                                                    Points="15,38 35,25 15,10"
                                                    Stroke="{DynamicResource Menu.Background}" />
                                            </Canvas>

                                        </Grid>


                                        <!--  ID  -->

                                        <!--  标签戳+ID  -->
                                        <Grid
                                            Name="idGrid"
                                            Grid.Row="1"
                                            Width="auto"
                                            HorizontalAlignment="Stretch"
                                            Background="Transparent"
                                            IsEnabled="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="auto" />
                                                <ColumnDefinition Width="auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>

                                            <TextBox
                                                Grid.Column="0"
                                                Width="auto"
                                                Margin="0,5"
                                                Padding="10,0,0,0"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                FontFamily="微软雅黑"
                                                FontSize="15"
                                                Foreground="{DynamicResource Window.Foreground}"
                                                Style="{StaticResource ReadOnlyNoWrapTextBox}"
                                                Text="{Binding VID, Mode=OneWay}"
                                                TextAlignment="Left"
                                                Visibility="{Binding Path=DisplayID, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                                            <Border
                                                Grid.Column="1"
                                                MouseLeftButtonDown="CopyVID"
                                                Tag="{Binding VID}">
                                                <Border.Style>
                                                    <Style BasedOn="{StaticResource ToolsBarBorderStyle}" TargetType="Border">
                                                        <Setter Property="Visibility" Value="Hidden" />
                                                        <Setter Property="Margin" Value="0" />
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding ElementName=idGrid, Path=IsMouseOver}" Value="true">
                                                                <Setter Property="Visibility" Value="Visible" />
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Border.Style>

                                                <Viewbox Width="auto" Height="13">
                                                    <Path
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Data="M891.072 822.144V167.36a34.432 34.432 0 0 0-34.432-34.432H201.856C201.856 94.848 232.704 64 270.784 64h620.288C929.152 64 960 94.848 960 132.928v620.288c0 38.08-30.848 68.928-68.928 68.928z m-68.928-551.36v620.288c0 38.08-30.848 68.928-68.928 68.928H132.928A68.928 68.928 0 0 1 64 891.072V270.784c0-38.08 30.848-68.928 68.928-68.928h620.288c38.08 0 68.928 30.848 68.928 68.928z m-137.856 137.856H201.856a34.432 34.432 0 0 0 0 68.864h482.432a34.432 34.432 0 0 0 0-68.864z m0 206.72H201.856a34.432 34.432 0 0 0 0 68.864h482.432a34.432 34.432 0 0 0 0-68.864z"
                                                        Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                                </Viewbox>
                                            </Border>


                                            <!--  标签戳  -->

                                            <ItemsControl
                                                Grid.Column="2"
                                                Margin="5,5"
                                                HorizontalAlignment="Right"
                                                ItemsSource="{Binding TagStamp}"
                                                Tag="{Binding DataID}"
                                                Visibility="{Binding Path=DisplayStamp, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Label
                                                            Margin="2,0"
                                                            Padding="4"
                                                            Background="{Binding BackgroundBrush}"
                                                            BorderThickness="0"
                                                            Content="{Binding TagName}"
                                                            Foreground="{Binding ForegroundBrush}"
                                                            Tag="{Binding TagID}">
                                                            <Label.ContextMenu>
                                                                <ContextMenu>
                                                                    <MenuItem Click="DeleteVideoTagStamp" Header="{DynamicResource DeleteTagStamp}" />
                                                                </ContextMenu>
                                                            </Label.ContextMenu>
                                                        </Label>

                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>

                                        </Grid>

                                        <!--  日期  -->
                                        <TextBox
                                            Grid.Row="2"
                                            Margin="0,0"
                                            Padding="10,5"
                                            HorizontalAlignment="Left"
                                            Background="Transparent"
                                            FontSize="15"
                                            Foreground="{DynamicResource Window.Foreground}"
                                            Opacity="0.5"
                                            Style="{StaticResource ReadOnlyNoWrapTextBox}"
                                            Text="{Binding ReleaseDate, Mode=OneWay}"
                                            TextAlignment="Left"
                                            Visibility="{Binding Path=DisplayDate, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}" />

                                        <!--  评分  -->
                                        <StackPanel
                                            Grid.Row="3"
                                            Width="auto"
                                            Margin="15,5,0,10"
                                            HorizontalAlignment="Left"
                                            Cursor="Hand"
                                            PreviewMouseLeftButtonDown="StackPanel_PreviewMouseLeftButtonDown"
                                            Tag="{Binding DataID, Mode=OneWay}"
                                            Visibility="{Binding Path=DisplayFavorites, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}">
                                            <hc:Rate
                                                AllowClear="True"
                                                AllowHalf="True"
                                                Background="{DynamicResource Window.Title.Background}"
                                                DefaultValue="0"
                                                Foreground="{DynamicResource Common.HighLight.Deep.Background}"
                                                ItemHeight="15"
                                                ItemMargin="3 0"
                                                ValueChanged="AssoDataRate_ValueChanged"
                                                Value="{Binding Grade, Mode=TwoWay}" />
                                        </StackPanel>

                                        <TextBox
                                            Grid.Row="4"
                                            Width="{Binding Path=GlobalImageWidth, Source={x:Static p:Settings.Default}, Converter={StaticResource BiggerWidthConverter}, Mode=OneWay}"
                                            Height="35"
                                            Margin="0,5,0,15"
                                            Padding="10,0"
                                            HorizontalAlignment="Center"
                                            Background="Transparent"
                                            FontSize="14"
                                            Foreground="{DynamicResource Window.Foreground}"
                                            IsEnabled="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}"
                                            MouseLeftButtonDown="CopyText"
                                            Opacity="0.5"
                                            Style="{StaticResource ReadOnlyNoWrapTextBox}"
                                            Text="{Binding Title, Mode=OneWay}"
                                            TextAlignment="Left"
                                            TextWrapping="Wrap"
                                            ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}"
                                            Visibility="{Binding Path=DisplayTitle, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}" />


                                    </Grid>
                                </Grid>

                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>



            </Grid>
        </Popup>


        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto" MinWidth="50" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>



            <Grid
                x:Name="PreviousGrid"
                Grid.Column="0"
                PreviewMouseWheel="Border_PreviewMouseWheel">
                <Border
                    x:Name="PreviousBorder"
                    Width="30"
                    Height="60"
                    Margin="5,0"
                    CornerRadius="10"
                    Cursor="Hand"
                    MouseLeftButtonUp="PreviousMovie"
                    ToolTip="{DynamicResource Previous}">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Setter Property="Background" Value="{DynamicResource Window.Side.Background}" />
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="{DynamicResource Window.Title.Background}" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>

                    <Image
                        Canvas.Left="9"
                        Canvas.Top="11"
                        Width="20"
                        Height="20"
                        Cursor="Hand"
                        Source="{Binding Themes, Mode=OneWay, ConverterParameter=left, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                </Border>

                <StackPanel
                    x:Name="ImageChangeStackPanel"
                    Margin="0,20"
                    VerticalAlignment="Bottom"
                    Orientation="Vertical">
                    <RadioButton
                        Height="30"
                        Margin="5,5,5,0"
                        Background="{DynamicResource Window.Side.Background}"
                        Click="ExtraImageRadioButton_Click"
                        FocusVisualStyle="{x:Null}"
                        GroupName="ExtraImageView"
                        IsChecked="{Binding ShowScreenShot, Mode=TwoWay, Converter={StaticResource OppositeBooleanConverter}}"
                        Style="{StaticResource FlatRadioButton}"
                        ToolTip="{DynamicResource Poster}">
                        <Image
                            Width="22"
                            Height="22"
                            Source="/Resources/Picture/图像.png" />
                    </RadioButton>
                    <RadioButton
                        Height="30"
                        Margin="5,5,5,0"
                        Click="ScreenShotRadioButton_Click"
                        FocusVisualStyle="{x:Null}"
                        GroupName="ExtraImageView"
                        IsChecked="{Binding ShowScreenShot, Mode=TwoWay}"
                        Style="{StaticResource FlatRadioButton}"
                        ToolTip="{DynamicResource ScreenShot}">
                        <Image
                            Width="22"
                            Height="22"
                            Source="/Resources/Picture/视频.png" />
                    </RadioButton>
                </StackPanel>


            </Grid>

            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" MinHeight="45" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!--  标题  -->
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="auto" MinWidth="50" />
                        <ColumnDefinition Width="auto" MinWidth="50" />
                    </Grid.ColumnDefinitions>

                    <Grid
                        x:Name="MouseMoveGrid"
                        Grid.Column="0"
                        Background="Transparent"
                        MouseMove="MoveWindow" />

                    <TextBox
                        x:Name="TitleTextBox"
                        Grid.Column="0"
                        Margin="0,0,50,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Background="Transparent"
                        FocusVisualStyle="{x:Null}"
                        FontSize="16"
                        FontWeight="Bold"
                        Foreground="{DynamicResource Window.Sub.Foreground}"
                        Style="{StaticResource ViewTextBox}"
                        Text="{Binding CurrentVideo.Title}"
                        TextAlignment="Left"
                        TextWrapping="NoWrap"
                        ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}">
                        <TextBox.ContextMenu>
                            <ContextMenu>
                                <MenuItem
                                    Click="TranslateMovie"
                                    Header="{DynamicResource Translate}"
                                    Visibility="Collapsed" />
                                <MenuItem Command="ApplicationCommands.Copy" Header="{DynamicResource Copy}" />
                                <MenuItem Command="ApplicationCommands.SelectAll" Header="{DynamicResource SelectAllText}" />
                            </ContextMenu>
                        </TextBox.ContextMenu>
                    </TextBox>

                    <StackPanel
                        Grid.Column="2"
                        VerticalAlignment="Top"
                        Orientation="Horizontal">
                        <Border
                            Margin="10,5"
                            Padding="5"
                            CornerRadius="3"
                            Cursor="Hand"
                            MouseLeftButtonUp="DownLoadInfo"
                            Style="{StaticResource BorderStyle}">
                            <TextBlock
                                Grid.Column="1"
                                Style="{StaticResource BaseTextBlock}"
                                Text="{DynamicResource SyncInfo}" />
                        </Border>
                        <Border
                            Margin="10,5"
                            Padding="5"
                            CornerRadius="3"
                            Cursor="Hand"
                            Style="{StaticResource BorderStyle}">
                            <TextBlock
                                Grid.Column="1"
                                MouseLeftButtonUp="EditInfo"
                                Style="{StaticResource BaseTextBlock}"
                                Text="{DynamicResource Edit}" />
                        </Border>



                        <Button
                            Width="60"
                            Height="auto"
                            VerticalAlignment="Stretch"
                            super:CommonExt.HoverBackground="{DynamicResource Window.Title.Hover.Deep.Background}"
                            Click="CloseWindow"
                            Style="{StaticResource FlatButton}">
                            <Image
                                Width="24"
                                Height="24"
                                Source="{Binding Themes, Mode=OneWay, ConverterParameter=close, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                        </Button>
                    </StackPanel>



                </Grid>



                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="400" />
                    </Grid.ColumnDefinitions>


                    <!--  图片  -->
                    <Grid Grid.Column="0">

                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="200" />
                        </Grid.RowDefinitions>

                        <Button
                            Height="auto"
                            Margin="5,5,15,70"
                            Padding="5"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Panel.ZIndex="19"
                            Click="ViewAssoDatas"
                            Cursor="Hand"
                            IsEnabled="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}, Converter={StaticResource OppositeBooleanConverter}}"
                            Style="{StaticResource RoundNormalButton}"
                            Tag="{DynamicResource Button.Hover.Background}"
                            Visibility="{Binding CurrentVideo.HasAssociation, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}">

                            <Image
                                Width="32"
                                Height="32"
                                Source="/Resources/Picture/asso.png" />
                        </Button>

                        <StackPanel
                            Margin="20"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Panel.ZIndex="10"
                            Orientation="Horizontal">
                            <Canvas
                                Width="40"
                                Height="40"
                                VerticalAlignment="Center"
                                FocusVisualStyle="{x:Null}"
                                PreviewMouseLeftButtonUp="PlayVedio">
                                <Canvas.ContextMenu>
                                    <ContextMenu
                                        Width="100"
                                        HorizontalOffset="-50"
                                        VerticalOffset="10"
                                        Visibility="Collapsed" />
                                </Canvas.ContextMenu>
                                <Ellipse
                                    Canvas.Left="3"
                                    Canvas.Top="3"
                                    Width="40"
                                    Height="40"
                                    Style="{StaticResource OrangeEllipse}" />
                                <Image
                                    Canvas.Left="11"
                                    Canvas.Top="38"
                                    Height="28"
                                    Cursor="Hand"
                                    Source="{Binding Themes, Mode=OneWay, ConverterParameter=triangle, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}">
                                    <Image.RenderTransform>
                                        <RotateTransform x:Name="rotateTransform" Angle="-90" />
                                    </Image.RenderTransform>
                                </Image>
                            </Canvas>

                        </StackPanel>

                        <!--  大图  -->
                        <Grid
                            x:Name="ImageGrid"
                            Grid.Row="0"
                            HorizontalAlignment="Stretch"
                            AllowDrop="True"
                            Background="Transparent"
                            DragOver="BigImage_DragOver"
                            Drop="BigImage_Drop"
                            MouseLeftButtonDown="Grid_MouseLeftButtonDown"
                            MouseMove="MoveWindow"
                            PreviewMouseWheel="Grid_PreviewMouseWheel">
                            <Grid.ContextMenu>
                                <ContextMenu Opacity="0.8" PreviewKeyUp="ContextMenu_PreviewKeyUp">
                                    <MenuItem Click="DownLoad" Header="{DynamicResource Menu_SyncInfo}" />
                                    <MenuItem
                                        Header="{DynamicResource Menu_SyncExtra}"
                                        IsEnabled="False"
                                        Visibility="{Binding ShowSecret, Source={x:Static p:Settings.Default}, Mode=OneWay, Converter={StaticResource bool2VisibilityConverter}}">
                                        <MenuItem Click="DownLoadMagnets" Header="{DynamicResource SyncMagnets}" />
                                    </MenuItem>
                                    <MenuItem Header="{DynamicResource Menu_Advance}">
                                        <MenuItem Click="GetScreenShot" Header="{DynamicResource Menu_GenerateScreenShot}" />
                                        <MenuItem
                                            Click="GetScreenGif"
                                            Header="{DynamicResource Menu_GenerateGif}"
                                            Visibility="Collapsed" />

                                        <MenuItem
                                            Click="TranslateMovie"
                                            Header="{DynamicResource Menu_Translate}"
                                            IsEnabled="False"
                                            Visibility="Collapsed" />
                                        <MenuItem
                                            Header="{DynamicResource Menu_GenerateThumbnail}"
                                            IsEnabled="False"
                                            Visibility="Collapsed" />
                                        <MenuItem
                                            Header="{DynamicResource Menu_GenerateActressImage}"
                                            IsEnabled="False"
                                            Visibility="Collapsed" />
                                    </MenuItem>
                                    <MenuItem Header="{DynamicResource OpenPath}">
                                        <MenuItem
                                            Command="cmd:File.OpenSelectFile"
                                            CommandParameter="{Binding CurrentVideo.Path}"
                                            Header="{DynamicResource Movie}" />
                                        <MenuItem Click="OpenPath" Header="{DynamicResource Poster}" />
                                        <MenuItem Click="OpenPath" Header="{DynamicResource Thumbnail}" />
                                        <MenuItem Click="OpenPath" Header="Gif" />
                                        <MenuItem Click="OpenPath" Header="{DynamicResource Preview}" />
                                        <MenuItem Click="OpenPath" Header="{DynamicResource ScreenShot}" />
                                    </MenuItem>




                                    <MenuItem
                                        Click="OpenWeb"
                                        Header="{DynamicResource ViewWebsite}"
                                        Icon="pack://application:,,,/Resources/menuitem/openwebsite.png" />
                                    <MenuItem x:Name="OpenOtherUrlMenuItem" Header="{DynamicResource OpenOtherUrl}" />

                                    <MenuItem
                                        x:Name="CopyMagnetsMenuItem"
                                        Header="{DynamicResource CopyMagnets}"
                                        Visibility="{Binding TeenMode, Source={x:Static p:Settings.Default}, Mode=OneWay, Converter={StaticResource BoolToOppositeVisibilityConverter}}" />

                                    <MenuItem Click="CopyFile" Header="{DynamicResource Menu_CopyFile}" />

                                    <MenuItem Click="DeleteID" Header="{DynamicResource Menu_DeleteInfo}" />
                                    <MenuItem
                                        Click="DeleteFile"
                                        Header="{DynamicResource Menu_DeleteFile}"
                                        Icon="pack://application:,,,/Resources/menuitem/clear.png" />

                                </ContextMenu>
                            </Grid.ContextMenu>
                            <Image x:Name="BigImage" Style="{StaticResource BigImage}" />
                        </Grid>

                        <!--  预览图  -->
                        <Grid x:Name="ThumbGrid" Grid.Row="1">
                            <ProgressBar
                                x:Name="ProgressBar"
                                Width="auto"
                                Height="10"
                                Margin="10,-6"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Top"
                                Background="Transparent"
                                IsVisibleChanged="ProgressBar_IsVisibleChanged"
                                Maximum="100"
                                Minimum="0"
                                Style="{StaticResource ProgressBarSuccessStripe}"
                                ValueChanged="ProgressBar_ValueChanged"
                                Visibility="Visible"
                                Value="0" />

                            <Border
                                x:Name="ExtraImageBorder"
                                Margin="0,10"
                                AllowDrop="True"
                                Background="{DynamicResource Window.Side.Background}"
                                CornerRadius="10"
                                DragOver="Border_DragOver"
                                Drop="Border_Drop"
                                FocusVisualStyle="{x:Null}"
                                Visibility="Visible">
                                <ScrollViewer
                                    x:Name="scrollViewer"
                                    Margin="5"
                                    VerticalContentAlignment="Center"
                                    FocusVisualStyle="{x:Null}"
                                    HorizontalScrollBarVisibility="Auto"
                                    PreviewMouseWheel="scrollViewer_PreviewMouseWheel"
                                    VerticalScrollBarVisibility="Hidden">
                                    <ItemsControl
                                        x:Name="imageItemsControl"
                                        VerticalContentAlignment="Center"
                                        AlternationCount="999"
                                        Background="Transparent"
                                        ScrollViewer.VerticalScrollBarVisibility="Auto">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Horizontal" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>


                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel x:Name="ImageStackPanel" Orientation="Horizontal">
                                                    <Grid Margin="10,0">
                                                        <Border
                                                            Panel.ZIndex="5"
                                                            Background="Black"
                                                            Cursor="Hand"
                                                            MouseEnter="Border_MouseEnter"
                                                            MouseLeave="Border_MouseLeave"
                                                            MouseLeftButtonUp="ShowExtraImage"
                                                            Opacity="0.5"
                                                            Tag="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=(ItemsControl.AlternationIndex)}">
                                                            <Border.ContextMenu>
                                                                <ContextMenu>
                                                                    <MenuItem Click="OpenExtraImagePath" Header="{DynamicResource OpenPath}" />
                                                                    <MenuItem Header="{DynamicResource SetAs}" Visibility="Collapsed">
                                                                        <MenuItem Click="SetToBigAndSmallPic" Header="{DynamicResource ThumbnailAndPoster}" />
                                                                        <MenuItem Click="SetToSmallPic" Header="{DynamicResource Thumbnail}" />
                                                                        <MenuItem Click="SetToBigPic" Header="{DynamicResource Poster}" />
                                                                    </MenuItem>
                                                                    <MenuItem Click="DeleteImage" Header="{DynamicResource DeleteImage}" />
                                                                    <MenuItem Click="DeleteAllImage" Header="{DynamicResource DeleteAllImageInList}" />
                                                                </ContextMenu>
                                                            </Border.ContextMenu>
                                                        </Border>

                                                        <Image Style="{StaticResource ExtraPic}" />
                                                    </Grid>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </Border>

                        </Grid>


                    </Grid>


                    <!--  信息  -->
                    <Grid
                        x:Name="InfoGrid"
                        Grid.Column="1"
                        Margin="10,0,0,0">

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="auto" MinWidth="50" />
                        </Grid.ColumnDefinitions>

                        <Popup
                            x:Name="ActorPopup"
                            AllowsTransparency="True"
                            HorizontalOffset="-30"
                            IsOpen="False"
                            Placement="MousePoint"
                            PopupAnimation="Fade"
                            StaysOpen="True"
                            VerticalOffset="5">
                            <Grid
                                Margin="10"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Panel.ZIndex="10">
                                <Border
                                    Margin="10"
                                    Background="{DynamicResource Window.InnerDialog.Background}"
                                    CornerRadius="5"
                                    Effect="{StaticResource BlueDropShadowEffect}" />
                                <Image
                                    x:Name="ActorImage"
                                    Width="125"
                                    Height="125"
                                    Margin="10"
                                    Source="pack://application:,,,/Resources/Picture/NoPrinting_A.png" />
                            </Grid>
                        </Popup>



                        <Border
                            x:Name="InfoBorder"
                            Grid.Column="0"
                            Margin="10"
                            VerticalAlignment="Top"
                            CornerRadius="5">

                            <TabControl
                                Margin="10,5"
                                Background="Transparent"
                                SelectedIndex="{Binding InfoSelectedIndex, Mode=TwoWay}"
                                Style="{DynamicResource TapControlStyle}">
                                <TabItem
                                    Margin="5"
                                    Padding="5"
                                    Header="{DynamicResource MovieInfo}"
                                    Style="{DynamicResource TopTabItemStyle}">

                                    <Grid Name="infoGrid">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>


                                        <StackPanel Grid.Row="0">
                                            <StackPanel
                                                Margin="-1,0,0,5"
                                                HorizontalAlignment="Left"
                                                Orientation="Horizontal">
                                                <TextBox
                                                    HorizontalAlignment="Left"
                                                    FontFamily="Times New Roman"
                                                    FontSize="24"
                                                    Foreground="{DynamicResource Window.Foreground}"
                                                    Style="{StaticResource ViewTextBox}"
                                                    Text="{Binding CurrentVideo.VID, Mode=OneWay}" />
                                            </StackPanel>
                                            <ItemsControl
                                                Grid.Column="1"
                                                Margin="5,5"
                                                HorizontalAlignment="Left"
                                                ItemsSource="{Binding CurrentVideo.TagStamp}"
                                                Visibility="{Binding Path=DisplayStamp, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Label
                                                            Margin="2,0"
                                                            Padding="4"
                                                            Background="{Binding BackgroundBrush}"
                                                            BorderThickness="0"
                                                            Content="{Binding TagName}"
                                                            Foreground="{Binding ForegroundBrush}" />

                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>

                                            <StackPanel Orientation="Horizontal">
                                                <TextBox
                                                    VerticalAlignment="Center"
                                                    FontSize="14"
                                                    Style="{StaticResource ViewTextBox}"
                                                    Text="{Binding CurrentVideo.ReleaseDate}" />

                                                <StackPanel Margin="10,0" Orientation="Horizontal">
                                                    <Image VerticalAlignment="Center" Source="{Binding Themes, Mode=OneWay, ConverterParameter=runtime, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                                    <TextBox
                                                        Margin="5,0"
                                                        VerticalAlignment="Center"
                                                        FontSize="14"
                                                        Style="{StaticResource ViewTextBox}"
                                                        Text="{Binding CurrentVideo.Duration, StringFormat='\{0} min'}" />
                                                </StackPanel>

                                            </StackPanel>

                                            <StackPanel
                                                Width="auto"
                                                Margin="0,20"
                                                HorizontalAlignment="Left"
                                                Cursor="Hand"
                                                Visibility="{Binding Path=DisplayFavorites, Converter={StaticResource bool2VisibilityConverter}, Source={x:Static p:Settings.Default}, Mode=OneWay}">
                                                <hc:Rate
                                                    AllowClear="True"
                                                    Background="{DynamicResource Window.Title.Background}"
                                                    DefaultValue="0"
                                                    FocusVisualStyle="{x:Null}"
                                                    Foreground="{DynamicResource Common.HighLight.Deep.Background}"
                                                    ValueChanged="Rate_ValueChanged"
                                                    Value="{Binding CurrentVideo.Grade, Mode=TwoWay}" />
                                            </StackPanel>
                                        </StackPanel>


                                        <!--  可滚动  -->
                                        <ScrollViewer
                                            Grid.Row="1"
                                            FocusVisualStyle="{x:Null}"
                                            HorizontalScrollBarVisibility="Disabled"
                                            VerticalScrollBarVisibility="Hidden">
                                            <StackPanel FocusVisualStyle="{x:Null}">
                                                <!--  演员  -->

                                                <ScrollViewer
                                                    Name="actorScrollViewer"
                                                    Width="{Binding ElementName=infoGrid, Path=ActualWidth, Converter={StaticResource SmallerValueConverter}, ConverterParameter=20}"
                                                    HorizontalAlignment="Left"
                                                    FocusVisualStyle="{x:Null}"
                                                    HorizontalScrollBarVisibility="Auto"
                                                    PreviewMouseWheel="ScrollViewer_MouseWheel"
                                                    VerticalScrollBarVisibility="Hidden">


                                                    <ItemsControl
                                                        Grid.Column="2"
                                                        Height="auto"
                                                        VerticalAlignment="Top"
                                                        Background="Transparent"
                                                        ItemsSource="{Binding CurrentActorList}">
                                                        <ItemsControl.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <StackPanel Orientation="Horizontal" />
                                                            </ItemsPanelTemplate>
                                                        </ItemsControl.ItemsPanel>

                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <Grid
                                                                    Name="rootGrid"
                                                                    Width="auto"
                                                                    Margin="5"
                                                                    MouseLeftButtonUp="ShowSameActor"
                                                                    Tag="{Binding ActorID, Mode=OneWay}">
                                                                    <Border
                                                                        Name="rootBorder"
                                                                        Padding="0"
                                                                        Background="{DynamicResource ListBoxItem.Background}"
                                                                        BorderThickness="2"
                                                                        CornerRadius="0 0 2 2 "
                                                                        Effect="{StaticResource BlueDropShadowEffect}" />
                                                                    <Grid>
                                                                        <Grid.RowDefinitions>
                                                                            <RowDefinition Height="auto" />
                                                                            <RowDefinition Height="auto" />
                                                                            <RowDefinition Height="*" />
                                                                        </Grid.RowDefinitions>


                                                                        <Image
                                                                            Grid.Row="0"
                                                                            Width="80"
                                                                            Height="80"
                                                                            Margin="2.5,2.5,2.5,10"
                                                                            VerticalAlignment="Top"
                                                                            AllowDrop="True"
                                                                            Cursor="Hand"
                                                                            FocusVisualStyle="{x:Null}"
                                                                            MouseEnter="Image_MouseEnter"
                                                                            MouseLeave="Image_MouseLeave"
                                                                            Source="{Binding SmallImage}"
                                                                            Stretch="UniformToFill" />




                                                                        <TextBox
                                                                            Name="ActorNameTextBox"
                                                                            Grid.Row="1"
                                                                            Width="80"
                                                                            MaxHeight="60"
                                                                            Margin="0"
                                                                            FontSize="12"
                                                                            Foreground="{DynamicResource Window.Foreground}"
                                                                            Opacity="0.7"
                                                                            Style="{StaticResource ReadOnlyWrapTextBox}"
                                                                            Text="{Binding ActorName}"
                                                                            ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}" />
                                                                        <!--<Label
                                                                        Grid.Row="2"
                                                                        Width="120"
                                                                        MaxHeight="60"
                                                                        VerticalAlignment="Bottom"
                                                                        Background="{DynamicResource Window.Detail.Background}"
                                                                        BorderThickness="0"
                                                                        Content="{Binding Count}"
                                                                        FontSize="18"
                                                                        Foreground="{DynamicResource Window.Foreground}"
                                                                        Opacity="0.7"
                                                                        ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Content}" />-->

                                                                    </Grid>
                                                                </Grid>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </ScrollViewer>


                                                <StackPanel Style="{StaticResource InfoStackPanel}" Tag="{Binding CurrentVideo.Director}">
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource Director}" />
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                                    <Border
                                                        MaxWidth="250"
                                                        Margin="2"
                                                        MouseLeftButtonUp="ShowSameDirector"
                                                        Style="{StaticResource HoverBorder}">
                                                        <TextBlock
                                                            Style="{StaticResource BaseTextBlock}"
                                                            Text="{Binding CurrentVideo.Director}"
                                                            TextTrimming="WordEllipsis"
                                                            TextWrapping="NoWrap" />
                                                    </Border>
                                                </StackPanel>


                                                <StackPanel Style="{StaticResource InfoStackPanel}" Tag="{Binding CurrentVideo.Series}">
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource Tag}" />
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                                    <Border
                                                        MaxWidth="250"
                                                        Margin="2"
                                                        MouseLeftButtonUp="ShowSameSeries"
                                                        Style="{StaticResource HoverBorder}">
                                                        <TextBlock
                                                            Style="{StaticResource BaseTextBlock}"
                                                            Text="{Binding CurrentVideo.Series}"
                                                            TextTrimming="WordEllipsis"
                                                            TextWrapping="NoWrap" />
                                                    </Border>
                                                </StackPanel>

                                                <StackPanel
                                                    Margin="0,5,0,5"
                                                    Style="{StaticResource InfoStackPanel}"
                                                    Tag="{Binding CurrentVideo.VideoType}"
                                                    Visibility="{Binding TeenMode, Converter={StaticResource BoolToOppositeVisibilityConverter}, Mode=OneWay}">
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource Censored}" />
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                                    <ComboBox
                                                        Height="30"
                                                        MinWidth="100"
                                                        Margin="5"
                                                        HorizontalAlignment="Stretch"
                                                        SelectedIndex="{Binding CurrentVideo.VideoType, Converter={StaticResource VidioTypeToIntConverter}, Mode=TwoWay}"
                                                        SelectionChanged="ComboBox_SelectionChanged"
                                                        Style="{StaticResource BorderComboBox}">
                                                        <ComboBoxItem Content="{DynamicResource Normal}" />
                                                        <ComboBoxItem Content="{DynamicResource Uncensored}" />
                                                        <ComboBoxItem Content="{DynamicResource Censored}" />
                                                        <ComboBoxItem Content="{DynamicResource Europe}" />
                                                    </ComboBox>

                                                </StackPanel>

                                                <StackPanel
                                                    Margin="0,5,0,0"
                                                    Style="{StaticResource InfoStackPanel}"
                                                    Tag="{Binding CurrentVideo.Rating}">
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource Rating}" />
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                                    <TextBox
                                                        Margin="0"
                                                        Style="{StaticResource ViewTextBox}"
                                                        Text="{Binding CurrentVideo.Rating}" />
                                                </StackPanel>



                                                <StackPanel Style="{StaticResource InfoStackPanel}" Tag="{Binding CurrentVideo.Studio}">
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource Made}" />
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                                    <Border
                                                        MaxWidth="250"
                                                        Margin="2"
                                                        MouseLeftButtonUp="ShowSameStudio"
                                                        Style="{StaticResource HoverBorder}">
                                                        <TextBlock
                                                            Style="{StaticResource BaseTextBlock}"
                                                            Text="{Binding CurrentVideo.Studio}"
                                                            TextTrimming="WordEllipsis"
                                                            TextWrapping="NoWrap" />
                                                    </Border>
                                                </StackPanel>



                                                <!--  类别  -->
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock
                                                        Grid.Column="0"
                                                        Margin="0,5,0,0"
                                                        VerticalAlignment="Top"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="{DynamicResource Genre}" />
                                                    <TextBlock
                                                        Grid.Column="1"
                                                        Margin="0,5,0,0"
                                                        VerticalAlignment="Top"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="：" />
                                                    <ItemsControl
                                                        Grid.Column="2"
                                                        Height="auto"
                                                        Margin="5,3"
                                                        VerticalAlignment="Top"
                                                        Background="Transparent"
                                                        ItemsSource="{Binding CurrentVideo.GenreList}">
                                                        <ItemsControl.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <WrapPanel Orientation="Horizontal" />
                                                            </ItemsPanelTemplate>
                                                        </ItemsControl.ItemsPanel>

                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <Border
                                                                    Margin="5,0"
                                                                    Padding="5,2"
                                                                    CornerRadius="3"
                                                                    Cursor="Hand"
                                                                    MouseLeftButtonUp="ShowSameGenre"
                                                                    Style="{StaticResource BorderStyle}">
                                                                    <TextBlock
                                                                        Style="{StaticResource BaseTextBlock}"
                                                                        Text="{Binding}"
                                                                        ToolTip="{x:Null}" />
                                                                </Border>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </Grid>

                                                <!--  标签  -->
                                                <Grid Margin="0,10,0,0">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="auto" />
                                                        <RowDefinition Height="*" />
                                                    </Grid.RowDefinitions>
                                                    <TextBlock
                                                        Grid.Column="0"
                                                        Height="auto"
                                                        VerticalAlignment="Center"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="{DynamicResource Label}" />
                                                    <TextBlock
                                                        Grid.Column="1"
                                                        Height="auto"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="：" />

                                                    <Button
                                                        Grid.Column="2"
                                                        Height="auto"
                                                        MinWidth="0"
                                                        MinHeight="0"
                                                        Margin="0"
                                                        Padding="10,4"
                                                        Click="AddToLabel"
                                                        Content="{DynamicResource AddTo}"
                                                        Style="{StaticResource ButtonPrimary}" />
                                                    <super:TagPanel
                                                        Name="labelTagPanel"
                                                        Grid.Row="1"
                                                        Grid.Column="0"
                                                        Grid.ColumnSpan="4"
                                                        AddButtonVerticalAlignment="Top"
                                                        OnAddNewLabel="NewLabel"
                                                        TagChanged="LabelChanged" />

                                                    <Popup
                                                        x:Name="searchLabelPopup"
                                                        Width="800"
                                                        MinHeight="300"
                                                        AllowsTransparency="True"
                                                        HorizontalOffset="-5"
                                                        Placement="Bottom"
                                                        PlacementTarget="{Binding ElementName=labelTagPanel}"
                                                        PopupAnimation="Fade"
                                                        StaysOpen="False"
                                                        VerticalOffset="-5">
                                                        <Grid Margin="5">
                                                            <Border
                                                                Margin="5"
                                                                Background="{DynamicResource Menu.Background}"
                                                                CornerRadius="5"
                                                                Effect="{StaticResource PopupDropShadowEffect}" />
                                                            <Grid Margin="4,5">
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="auto" />
                                                                    <RowDefinition Height="*" />
                                                                </Grid.RowDefinitions>

                                                                <super:SearchBox
                                                                    Name="labelSearchBox"
                                                                    Grid.Row="0"
                                                                    Width="auto"
                                                                    Height="30"
                                                                    Margin="0"
                                                                    Padding="3,0"
                                                                    HorizontalAlignment="Stretch"
                                                                    Background="{DynamicResource Window.Side.Background}"
                                                                    BorderBrush="#326CF3"
                                                                    BorderThickness="0"
                                                                    Foreground="{DynamicResource Window.Foreground}"
                                                                    PlaceHolder="{DynamicResource Search}"
                                                                    PlaceHolderForeground="{DynamicResource TextBox.PlaceHolder.Foreground}"
                                                                    SearchOnTextChanged="False"
                                                                    ShowClearButton="True"
                                                                    ShowSearchButton="True"
                                                                    Text="{Binding LabelText, Mode=TwoWay}" />


                                                                <ScrollViewer
                                                                    Grid.Row="1"
                                                                    CanContentScroll="True"
                                                                    FocusVisualStyle="{x:Null}"
                                                                    IsDeferredScrollingEnabled="False"
                                                                    VerticalScrollBarVisibility="Auto">
                                                                    <ItemsControl
                                                                        Name="labelItemsControl"
                                                                        Margin="5"
                                                                        Background="Transparent"
                                                                        ItemsSource="{Binding CurrentLabelList}"
                                                                        ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                                        <ItemsControl.ItemsPanel>
                                                                            <ItemsPanelTemplate>
                                                                                <WrapPanel Orientation="Horizontal" />
                                                                            </ItemsPanelTemplate>
                                                                        </ItemsControl.ItemsPanel>
                                                                        <ItemsControl.ItemTemplate>
                                                                            <DataTemplate>
                                                                                <Border MouseUp="Border_MouseUp" Style="{StaticResource ActorInfoBorderStyle}">
                                                                                    <TextBlock Style="{StaticResource GenreTextBlock}" Text="{Binding}" />
                                                                                </Border>
                                                                            </DataTemplate>
                                                                        </ItemsControl.ItemTemplate>
                                                                    </ItemsControl>
                                                                </ScrollViewer>
                                                            </Grid>
                                                        </Grid>
                                                    </Popup>



                                                </Grid>


                                                <!--  摘要  -->
                                                <Grid Margin="0,5" Background="Transparent">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.Style>
                                                        <Style TargetType="Grid">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding CurrentVideo.Plot}" Value="">
                                                                    <Setter Property="Visibility" Value="Collapsed" />
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Grid.Style>



                                                    <TextBlock
                                                        Grid.Column="0"
                                                        VerticalAlignment="Top"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="{DynamicResource Plot}" />
                                                    <TextBlock
                                                        Grid.Column="1"
                                                        VerticalAlignment="Top"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="：" />

                                                    <StackPanel Grid.Column="2">
                                                        <Button
                                                            x:Name="tlBtn"
                                                            Margin="5,10"
                                                            HorizontalAlignment="Left"
                                                            VerticalAlignment="Top"
                                                            Click="TranslateMovie"
                                                            Content="{DynamicResource Translate}"
                                                            Cursor="Hand"
                                                            IsEnabled="False"
                                                            Style="{StaticResource ButtonPrimary}"
                                                            Visibility="Collapsed" />
                                                        <TextBox
                                                            Height="auto"
                                                            Margin="5,0"
                                                            Style="{StaticResource ViewTextBox}"
                                                            Text="{Binding CurrentVideo.Plot}"
                                                            TextAlignment="Left"
                                                            TextWrapping="Wrap" />
                                                    </StackPanel>

                                                </Grid>

                                            </StackPanel>
                                        </ScrollViewer>
                                    </Grid>

                                </TabItem>
                                <TabItem
                                    Margin="5"
                                    Padding="10,5"
                                    Header="{DynamicResource VideoInfo}"
                                    Style="{DynamicResource TopTabItemStyle}">
                                    <StackPanel Name="infoStackPanel">

                                        <Border
                                            Grid.Column="1"
                                            Margin="0"
                                            HorizontalAlignment="Left"
                                            MouseLeftButtonDown="CopyVideoInfo"
                                            Style="{StaticResource ToolsBarBorderStyle}">
                                            <Viewbox Width="auto" Height="13">
                                                <Path
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Data="M891.072 822.144V167.36a34.432 34.432 0 0 0-34.432-34.432H201.856C201.856 94.848 232.704 64 270.784 64h620.288C929.152 64 960 94.848 960 132.928v620.288c0 38.08-30.848 68.928-68.928 68.928z m-68.928-551.36v620.288c0 38.08-30.848 68.928-68.928 68.928H132.928A68.928 68.928 0 0 1 64 891.072V270.784c0-38.08 30.848-68.928 68.928-68.928h620.288c38.08 0 68.928 30.848 68.928 68.928z m-137.856 137.856H201.856a34.432 34.432 0 0 0 0 68.864h482.432a34.432 34.432 0 0 0 0-68.864z m0 206.72H201.856a34.432 34.432 0 0 0 0 68.864h482.432a34.432 34.432 0 0 0 0-68.864z"
                                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                            </Viewbox>
                                        </Border>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock
                                                Width="auto"
                                                Style="{StaticResource BaseTextBlock}"
                                                Text="{DynamicResource Format}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.Format}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource Duration}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.Duration}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource FrameRate}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.FrameRate}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource BitRate}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.BitRate}" />
                                        </StackPanel>





                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource Resolution}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.Resolution}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource DisplayAspectRatio}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.DisplayAspectRatio}" />
                                        </StackPanel>



                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource BitDepth}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.BitDepth}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource FrameCount}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.FrameCount}" />
                                        </StackPanel>

                                        <Rectangle
                                            Width="auto"
                                            Height="1"
                                            Margin="0,5"
                                            Fill="{DynamicResource Window.Foreground}" />

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource AudioFormat}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.AudioFormat}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource AudioBitRate}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.AudioBitRate}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource AudioSamplingRate}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.AudioSamplingRate}" />
                                        </StackPanel>
                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource Channel}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.Channel}" />
                                        </StackPanel>

                                        <Rectangle
                                            Width="auto"
                                            Height="1"
                                            Margin="0,5"
                                            Fill="{DynamicResource Window.Foreground}" />




                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource FileExtension}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.Extension}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource FileSize}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.FileSize}" />
                                        </StackPanel>

                                        <TextBlock
                                            Margin="0"
                                            Cursor="Hand"
                                            Foreground="SkyBlue"
                                            MouseEnter="TextBox_MouseEnter"
                                            MouseLeave="TextBox_MouseLeave"
                                            PreviewMouseLeftButtonUp="OpenFilePath"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{Binding VideoInfo.FileName}"
                                            TextWrapping="Wrap" />

                                    </StackPanel>

                                </TabItem>
                            </TabControl>
                        </Border>




                        <Grid
                            x:Name="NextGrid"
                            Grid.Column="1"
                            PreviewMouseWheel="Border_PreviewMouseWheel">
                            <Border
                                x:Name="NextBorder"
                                Width="30"
                                Height="60"
                                Margin="5,0"
                                CornerRadius="10"
                                Cursor="Hand"
                                MouseLeftButtonUp="NextMovie"
                                ToolTip="{DynamicResource Next}">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Setter Property="Background" Value="{DynamicResource Window.Side.Background}" />
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="{DynamicResource Window.Title.Background}" />
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>

                                <Image
                                    Canvas.Left="11"
                                    Canvas.Top="11"
                                    Height="20"
                                    Cursor="Hand"
                                    Source="{Binding Themes, Mode=OneWay, ConverterParameter=right, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                            </Border>
                        </Grid>
                    </Grid>
                </Grid>
            </Grid>
        </Grid>
    </Grid>
</Window>
