<super:BaseWindow
    x:Class="Jvedio.Window_Settings"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:config="clr-namespace:Jvedio;assembly=Jvedio"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:fa="http://schemas.fontawesome.io/icons/"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:p="clr-namespace:Jvedio.Properties"
    xmlns:super="https://github.com/SuperStudio/SuperControls"
    Title="{DynamicResource Settings}"
    Width="1000"
    MinWidth="800"
    MinHeight="500"
    AllowDrop="True"
    Closing="Window_Closing"
    ContentRendered="Window_ContentRendered"
    Foreground="{DynamicResource Window.Sub.Foreground}"
    Icon="pack://application:,,,/Resources/Jvedio.ico"
    ResizeMode="CanResize"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">

    <super:BaseWindow.Resources>


        <Style
            x:Key="SettingTitleStyle"
            BasedOn="{StaticResource BaseTextBlock}"
            TargetType="TextBlock">
            <Setter Property="Margin" Value="20,10,40,10" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Top" />

        </Style>



        <Style
            x:Key="TogglePanelStyle"
            BasedOn="{StaticResource BaseTogglePanel}"
            TargetType="{x:Type super:TogglePanel}">
            <Setter Property="Padding" Value="0,5" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="FontSize" Value="15" />
            <Setter Property="IsExpanded" Value="True" />
            <Setter Property="LineWidth" Value="0" />
        </Style>


        <Style
            x:Key="MyListBoxItemStyle"
            BasedOn="{StaticResource NormalListBoxItem}"
            TargetType="ListBoxItem">
            <Setter Property="Padding" Value="10,5" />
        </Style>



        <!--<Style
            x:Key="BaseTextBlock"
            BasedOn="{StaticResource BaseTextBlock}"
            TargetType="{x:Type TextBlock}">
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>-->



        <Style
            x:Key="NoWrapTextBlock"
            BasedOn="{StaticResource BaseTextBlock}"
            TargetType="{x:Type TextBlock}">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="TextWrapping" Value="NoWrap" />
            <Setter Property="TextTrimming" Value="WordEllipsis" />
        </Style>


        <Style x:Key="TextBlockTitle" TargetType="{x:Type TextBlock}">
            <Setter Property="FocusVisualStyle" Value="{x:Null}" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="Width" Value="auto" />
            <Setter Property="Height" Value="auto" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Padding" Value="5,0,0,0" />
            <Setter Property="TextAlignment" Value="Left" />
            <Setter Property="Foreground" Value="{DynamicResource Window.Foreground}" />
            <Setter Property="FontSize" Value="16" />

            <Setter Property="Margin" Value="20,5" />
        </Style>

        <Style x:Key="InfoLabel" TargetType="{x:Type Label}">
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Height" Value="auto" />

            <Setter Property="FontSize" Value="15" />
            <Setter Property="Margin" Value="0,0" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="MinWidth" Value="100" />
            <Setter Property="Width" Value="auto" />
            <Setter Property="Foreground" Value="{DynamicResource Window.Foreground}" />
        </Style>


        <Style
            x:Key="SettingBaseTextBox"
            BasedOn="{StaticResource BaseTextBox}"
            TargetType="TextBox">

            <Setter Property="FontSize" Value="15" />
            <Setter Property="Foreground" Value="{DynamicResource Window.Foreground}" />
            <Setter Property="Background" Value="{DynamicResource Window.Title.Background}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Width" Value="auto" />
            <Setter Property="Height" Value="auto" />
            <Setter Property="ContextMenu" Value="{StaticResource TextBoxContextMenu}" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="MinWidth" Value="400" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Padding" Value="5" />
            <Setter Property="Margin" Value="5,0" />
            <Setter Property="CaretBrush" Value="{DynamicResource Window.Foreground}" />
        </Style>
    </super:BaseWindow.Resources>

    <Grid Background="{DynamicResource Window.InnerDialog.Background}">


        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="auto" />
        </Grid.RowDefinitions>





        <TabControl
            x:Name="TabControl"
            Grid.Row="0"
            Margin="5"
            Background="Transparent"
            BorderBrush="{DynamicResource Window.Foreground}"
            ItemContainerStyle="{StaticResource FlatTabItem}"
            SelectedIndex="{Binding TabControlSelectedIndex, Mode=TwoWay, FallbackValue=0}"
            Style="{StaticResource FlatTabControl}"
            TabStripPlacement="Top">

            <TabItem Header="{DynamicResource Basic}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">


                    <StackPanel>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="启动" />
                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">
                                <CheckBox
                                    x:Name="openDefaultCheckBox"
                                    Content="{DynamicResource NotShowLibrary}"
                                    IsChecked="{Binding OpenDataBaseDefault, Mode=TwoWay}" />
                                <CheckBox Content="{DynamicResource ScanDirWhenStartUp}" IsChecked="{Binding ScanOnStartUp, Mode=TwoWay}" />

                            </StackPanel>

                        </Grid>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="状态" />
                            <WrapPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">
                                <CheckBox Content="{DynamicResource CloseToBar}" IsChecked="{Binding CloseToTaskBar, Mode=TwoWay}" />
                                <CheckBox Content="{DynamicResource TeenMode}" IsChecked="{Binding TeenMode, Mode=TwoWay, Source={x:Static config:ConfigManager.Settings}}" />


                                <CheckBox Content="{DynamicResource DetailViewAll}" IsChecked="{Binding DetailWindowShowAllMovie, Mode=TwoWay, Source={x:Static config:ConfigManager.Main}}" />

                                <CheckBox Content="{DynamicResource DeleteFileWhenDeleteInfo}" IsChecked="{Binding DelInfoAfterDelFile, Mode=TwoWay, Source={x:Static config:ConfigManager.Settings}}" />

                                <WrapPanel
                                    IsEnabled="False"
                                    Orientation="Horizontal"
                                    Visibility="Collapsed">
                                    <CheckBox Content="{DynamicResource ShowHistory}" IsChecked="{Binding ShowSearchHistory, Mode=TwoWay}" />
                                    <Button Click="ViewSearchHistory" Content="{DynamicResource ViewHistory}" />
                                </WrapPanel>
                                <StackPanel Orientation="Horizontal" Visibility="{Binding MainWindowVisible, Converter={StaticResource BoolToVisibilityConverter}}">
                                    <CheckBox
                                        MinWidth="95"
                                        VerticalContentAlignment="Center"
                                        Checked="CheckBox_Checked"
                                        Content="{DynamicResource BossKey}"
                                        IsChecked="{Binding HotKeyEnable, Mode=TwoWay, Source={x:Static config:ConfigManager.Settings}}"
                                        Unchecked="Unregister_HotKey" />

                                    <Border Style="{StaticResource InfoBorder}">
                                        <TextBox
                                            x:Name="hotkeyTextBox"
                                            Height="25"
                                            MinWidth="400"
                                            ContextMenu="{x:Null}"
                                            IsReadOnly="True"
                                            PreviewKeyDown="hotkeyTextBox_PreviewKeyDown"
                                            PreviewKeyUp="hotkeyTextBox_PreviewKeyUp"
                                            Style="{StaticResource ReadOnlyTextBox}"
                                            Text="{Binding HotKeyString, Mode=OneWay, Source={x:Static config:ConfigManager.Settings}}" />
                                    </Border>

                                    <Button
                                        Margin="14,0"
                                        BorderBrush="{DynamicResource Button.Selected.BorderBrush}"
                                        Click="ApplyHotKey"
                                        Content="{DynamicResource Apply}"
                                        Style="{StaticResource BorderButton}" />
                                </StackPanel>



                            </WrapPanel>
                        </Grid>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock
                                Margin="20,15,40,10"
                                Style="{StaticResource SettingTitleStyle}"
                                Text="{DynamicResource Language}" />
                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Horizontal">
                                <ComboBox
                                    Name="langComboBox"
                                    Grid.Column="1"
                                    Height="30"
                                    MinWidth="200"
                                    Margin="5"
                                    HorizontalAlignment="Stretch"
                                    Style="{StaticResource BorderComboBox}">
                                    <ComboBoxItem Content="中文" Tag="zh-CN" />
                                    <ComboBoxItem Content="English" Tag="en-US" />
                                    <ComboBoxItem Content="日本語" Tag="ja-JP" />
                                </ComboBox>
                            </StackPanel>

                        </Grid>







                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="播放" />
                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Horizontal">
                                <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource SetPlayer}" />
                                <super:SearchBox
                                    Width="410"
                                    Margin="9,0"
                                    Text="{Binding VideoPlayerPath, Mode=TwoWay, Source={x:Static config:ConfigManager.Settings}}" />
                                <Button
                                    Margin="10,0"
                                    BorderBrush="{DynamicResource Button.Selected.BorderBrush}"
                                    Click="SetVideoPlayerPath"
                                    Content="{DynamicResource Choose}"
                                    Style="{StaticResource BorderButton}" />
                            </StackPanel>


                        </Grid>
                    </StackPanel>
                </ScrollViewer>

            </TabItem>

            <TabItem Header="{DynamicResource Picture}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="{DynamicResource Basic}" />
                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">
                                <CheckBox Content="{DynamicResource UseScreenIfNoImage}" IsChecked="{Binding AutoGenScreenShot}" />
                                <CheckBox Content="{DynamicResource ImageStretch}" IsChecked="{Binding MainImageAutoMode, Mode=TwoWay, Source={x:Static config:ConfigManager.VideoConfig}}" />
                            </StackPanel>
                        </Grid>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="{DynamicResource Picture}" />
                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">
                                <CheckBox
                                    Click="ClearCache"
                                    Content="{DynamicResource UseCache}"
                                    IsChecked="{Binding ImageCache, Mode=TwoWay, Source={x:Static config:ConfigManager.Settings}}" />
                                <StackPanel Margin="5" Orientation="Horizontal">
                                    <TextBlock
                                        HorizontalAlignment="Left"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="时长" />
                                    <TextBlock
                                        Margin="0"
                                        HorizontalAlignment="Left"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="(min)" />
                                    <super:Slider
                                        Width="300"
                                        Margin="10,0"
                                        Maximum="60"
                                        Minimum="1"
                                        Value="{Binding CacheExpiration, Mode=TwoWay, Source={x:Static config:ConfigManager.Settings}}" />

                                </StackPanel>
                                <Button
                                    HorizontalAlignment="Left"
                                    Click="ClearCache"
                                    Content="{DynamicResource ClearCache}"
                                    Style="{StaticResource ButtonWarning}" />
                            </StackPanel>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock
                                Margin="20,15,40,10"
                                Style="{StaticResource SettingTitleStyle}"
                                Text="路径" />
                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">
                                <ComboBox
                                    Name="ImageSelectComboBox"
                                    Height="30"
                                    MinWidth="500"
                                    HorizontalAlignment="Left"
                                    SelectedIndex="{Binding PicPathMode, Mode=TwoWay, FallbackValue=2}"
                                    SelectionChanged="ImageSelectComboBox_SelectionChanged"
                                    Style="{StaticResource BorderComboBox}">
                                    <ComboBoxItem Content="{DynamicResource AbsolutePath}" />
                                    <ComboBoxItem Content="{DynamicResource RelativeToAppPath}" />
                                    <ComboBoxItem Content="{DynamicResource RelativeToVideoPath}" />
                                </ComboBox>
                                <StackPanel Orientation="Horizontal">
                                    <StackPanel.Style>
                                        <Style TargetType="StackPanel">
                                            <Setter Property="Visibility" Value="Visible" />
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding PicPathMode}" Value="2">
                                                    <Setter Property="Visibility" Value="Collapsed" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </StackPanel.Style>
                                    <super:SearchBox
                                        MinWidth="510"
                                        Margin="0,10"
                                        Text="{Binding BasePicPath, Mode=TwoWay}" />

                                    <super:HoverPath Grid.Column="2" Click="SetBasePicPath">
                                        <super:HoverPath.Style>
                                            <Style BasedOn="{StaticResource FolderHoverPath}" TargetType="super:HoverPath">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Path=SelectedIndex, ElementName=ImageSelectComboBox}" Value="0">
                                                        <Setter Property="Visibility" Value="Visible" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </super:HoverPath.Style>
                                    </super:HoverPath>

                                </StackPanel>

                                <TextBox FontSize="14" Text="{DynamicResource EnterRelativePath}">
                                    <TextBox.Style>
                                        <Style BasedOn="{StaticResource ReadOnlyNoWrapTextBox}" TargetType="TextBox">
                                            <Setter Property="Visibility" Value="Visible" />
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding PicPathMode}" Value="0">
                                                    <Setter Property="Visibility" Value="Collapsed" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBox.Style>
                                </TextBox>

                                <StackPanel Orientation="Vertical">
                                    <StackPanel.Style>
                                        <Style TargetType="StackPanel">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding PicPathMode}" Value="2">
                                                    <Setter Property="Visibility" Value="Visible" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </StackPanel.Style>
                                    <TextBlock
                                        HorizontalAlignment="Left"
                                        Foreground="{DynamicResource Window.Sub.Foreground}"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource EnterFileOrDirName}" />
                                    <StackPanel Margin="0,10,0,0" Orientation="Horizontal">

                                        <TextBlock
                                            MinWidth="80"
                                            Margin="5,10"
                                            VerticalAlignment="Top"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{DynamicResource Poster}"
                                            TextAlignment="Left" />
                                        <super:SearchBox MinWidth="500" Text="{Binding BigImagePath, Mode=TwoWay}" />
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock
                                            MinWidth="80"
                                            Margin="5,10"
                                            VerticalAlignment="Top"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{DynamicResource Thumbnail}"
                                            TextAlignment="Left" />
                                        <super:SearchBox MinWidth="500" Text="{Binding SmallImagePath, Mode=TwoWay}" />
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal">

                                        <TextBlock
                                            MinWidth="80"
                                            Margin="5,10"
                                            VerticalAlignment="Top"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{DynamicResource Preview}"
                                            TextAlignment="Left" />
                                        <super:SearchBox MinWidth="500" Text="{Binding PreviewImagePath, Mode=TwoWay}" />
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal">

                                        <TextBlock
                                            MinWidth="80"
                                            Margin="5,10"
                                            VerticalAlignment="Top"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{DynamicResource ScreenShot}"
                                            TextAlignment="Left" />
                                        <super:SearchBox MinWidth="500" Text="{Binding ScreenShotPath, Mode=TwoWay}" />
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal">

                                        <TextBlock
                                            MinWidth="80"
                                            Margin="5,10"
                                            VerticalAlignment="Top"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{DynamicResource ActressImage}"
                                            TextAlignment="Left" />
                                        <super:SearchBox MinWidth="500" Text="{Binding ActorImagePath, Mode=TwoWay}" />
                                    </StackPanel>

                                </StackPanel>

                            </StackPanel>
                        </Grid>



                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            <TabItem Background="Transparent" Header="{DynamicResource ScanAndImport}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="{DynamicResource Scan}" />
                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">
                                <CheckBox Content="{DynamicResource FetchVID}" IsChecked="{Binding FetchVID, Mode=TwoWay}" />
                                <CheckBox Content="{DynamicResource LoadDataAfterScan}" IsChecked="{Binding LoadDataAfterScan, Mode=TwoWay}" />
                                <StackPanel
                                    Margin="5"
                                    Orientation="Horizontal"
                                    Visibility="Visible">
                                    <TextBlock
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource ScanMinFileSize}"
                                        TextAlignment="Left"
                                        ToolTip="[0-2000]" />
                                    <super:SearchBox
                                        MinWidth="100"
                                        ShowClearButton="False"
                                        Text="{Binding MinFileSize, Mode=TwoWay}"
                                        TextAlignment="Center"
                                        ToolTip="[0-2000]" />
                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="MB" />
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="{DynamicResource Import}" />

                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">
                                <CheckBox Content="{DynamicResource DataExistsIndexAfterScan}" IsChecked="{Binding DataExistsIndexAfterScan, Mode=TwoWay}" />
                                <CheckBox Content="{DynamicResource ImageExistsIndexAfterScan}" IsChecked="{Binding ImageExistsIndexAfterScan, Mode=TwoWay}" />
                                <CheckBox Content="{DynamicResource ImportNFOWhenScan}" IsChecked="{Binding ScanNfo, Mode=TwoWay, Source={x:Static config:ConfigManager.ScanConfig}}" />
                                <StackPanel
                                    Margin="20,0"
                                    Orientation="Vertical"
                                    Visibility="{Binding ScanNfo, Converter={StaticResource BoolToVisibilityConverter}, Mode=TwoWay, Source={x:Static config:ConfigManager.ScanConfig}}">
                                    <!--<StackPanel Margin="20,0" Orientation="Vertical">-->

                                    <CheckBox Content="{DynamicResource OverwriteImage}" IsChecked="{Binding CopyNFOOverwriteImage}" />
                                    <CheckBox Content="{DynamicResource CopyPosterAndThumbnail}" IsChecked="{Binding CopyNFOPicture}" />
                                    <StackPanel Orientation="Horizontal">
                                        <CheckBox
                                            MinWidth="150"
                                            Content="{DynamicResource CopyActorImage}"
                                            IsChecked="{Binding CopyNFOActorPicture}" />

                                        <super:SearchBox
                                            MinWidth="400"
                                            Margin="0,5"
                                            PlaceHolder="{DynamicResource ActressImage}"
                                            Text="{Binding CopyNFOActorPath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <CheckBox
                                            MinWidth="150"
                                            Content="{DynamicResource CopyPreview}"
                                            IsChecked="{Binding CopyNFOPreview}" />

                                        <super:SearchBox
                                            MinWidth="400"
                                            Margin="0,5"
                                            PlaceHolder="{DynamicResource Preview}"
                                            Text="{Binding CopyNFOPreviewPath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal">
                                        <CheckBox
                                            MinWidth="150"
                                            Content="{DynamicResource CopyScreenShot}"
                                            IsChecked="{Binding CopyNFOScreenShot}" />

                                        <super:SearchBox
                                            MinWidth="400"
                                            Margin="0,5"
                                            PlaceHolder="{DynamicResource ScreenShot}"
                                            Text="{Binding CopyNFOScreenShotPath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                    </StackPanel>


                                </StackPanel>



                            </StackPanel>
                        </Grid>


                        <Grid Visibility="{Binding ScanNfo, Converter={StaticResource BoolToVisibilityConverter}, Mode=TwoWay, Source={x:Static config:ConfigManager.ScanConfig}}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock
                                Margin="20,20,60,10"
                                Style="{StaticResource SettingTitleStyle}"
                                Text="NFO" />

                            <StackPanel
                                Grid.Column="1"
                                Margin="0,10"
                                Orientation="Vertical">
                                <TextBlock
                                    Margin="10"
                                    HorizontalAlignment="Left"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="属性对应关系"
                                    TextAlignment="Left" />
                                <Border
                                    Margin="0"
                                    Padding="5"
                                    Background="Transparent"
                                    Style="{StaticResource InfoBorder}">
                                    <ItemsControl
                                        HorizontalContentAlignment="Stretch"
                                        d:ItemsSource="{d:SampleData ItemCount=5}"
                                        Background="Transparent"
                                        ItemsSource="{Binding NfoParseRules}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Vertical" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border
                                                    Margin="0,1"
                                                    Background="{DynamicResource Window.Side.Background}"
                                                    Style="{StaticResource InfoBorder}">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="auto" />
                                                            <ColumnDefinition Width="*" />
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock
                                                            Grid.Column="0"
                                                            Width="100"
                                                            Style="{StaticResource BaseTextBlock}"
                                                            Text="{Binding Value.Name}"
                                                            TextAlignment="Left" />
                                                        <super:TagPanel Grid.Column="1" ItemsSource="{Binding Value.ParseValues}" />
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>

                                </Border>

                            </StackPanel>


                        </Grid>



                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="{DynamicResource NetWork}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="网络设置" />
                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">
                                <CheckBox Content="忽略证书错误" IsChecked="{Binding IgnoreCertVal, Mode=TwoWay}" />
                                <StackPanel Margin="5" Orientation="Horizontal">
                                    <TextBlock
                                        MinWidth="60"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource RequestTimedOut}"
                                        TextAlignment="Left"
                                        ToolTip="[0-2000]" />
                                    <super:SearchBox
                                        MinWidth="100"
                                        Background="{DynamicResource Window.Title.Background}"
                                        ShowClearButton="False"
                                        Text="{Binding HttpTimeout, Mode=TwoWay}"
                                        TextAlignment="Center" />
                                    <TextBlock
                                        MinWidth="60"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="s"
                                        TextAlignment="Left" />
                                </StackPanel>
                            </StackPanel>


                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="同步选项" />
                            <Border
                                Grid.Column="1"
                                Padding="5"
                                CornerRadius="10">
                                <StackPanel Orientation="Vertical">


                                    <CheckBox Content="标题为空才同步信息" IsChecked="{Binding DownloadWhenTitleNull, Mode=TwoWay}" />
                                    <CheckBox Content="{DynamicResource SkipDownloadImage}" IsChecked="{Binding SkipExistImage, Mode=TwoWay}" />
                                    <CheckBox Content="{DynamicResource ForcedFetchInfo}" IsChecked="{Binding OverrideInfo, Source={x:Static config:ConfigManager.DownloadConfig}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />


                                    <WrapPanel Margin="10,0" Orientation="Horizontal">

                                        <CheckBox
                                            Margin="0"
                                            Content="{DynamicResource SaveToNFO}"
                                            IsChecked="{Binding SaveInfoToNFO, Mode=TwoWay}" />
                                        <StackPanel Orientation="Horizontal" Visibility="Visible">
                                            <super:SearchBox
                                                Width="380"
                                                MinWidth="400"
                                                Margin="5"
                                                Background="{DynamicResource Menu.Background}"
                                                FontSize="15"
                                                PlaceHolder="{DynamicResource ToolTip_SameAsVedio}"
                                                PlaceHolderForeground="{DynamicResource Control.Disabled.Background}"
                                                Text="{Binding NFOSavePath, Mode=TwoWay}" />

                                            <Button
                                                HorizontalAlignment="Left"
                                                Click="SelectNfoPath"
                                                Content="{DynamicResource ChooseDir}" />
                                            <CheckBox Content="{DynamicResource overwrite}" IsChecked="{Binding OverwriteNFO, Mode=TwoWay}" />

                                        </StackPanel>




                                    </WrapPanel>






                                </StackPanel>
                            </Border>

                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="同步内容" />
                            <WrapPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Horizontal">
                                <CheckBox
                                    Content="信息"
                                    IsChecked="{Binding DownloadInfo, Source={x:Static config:ConfigManager.DownloadConfig}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    Visibility="Collapsed" />
                                <CheckBox Content="缩略图" IsChecked="{Binding DownloadThumbNail, Source={x:Static config:ConfigManager.DownloadConfig}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                <CheckBox Content="海报图" IsChecked="{Binding DownloadPoster, Source={x:Static config:ConfigManager.DownloadConfig}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                <CheckBox Content="预览图" IsChecked="{Binding DownloadPreviewImage, Source={x:Static config:ConfigManager.DownloadConfig}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                <CheckBox Content="演员信息及头像" IsChecked="{Binding DownloadActor, Source={x:Static config:ConfigManager.DownloadConfig}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                            </WrapPanel>
                        </Grid>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="代理设置" />
                            <StackPanel Grid.Column="1" Orientation="Vertical">

                                <StackPanel
                                    Name="proxyStackPanel"
                                    Margin="10"
                                    Orientation="Horizontal">
                                    <RadioButton
                                        HorizontalAlignment="Left"
                                        Content="{DynamicResource DisableProxy}"
                                        GroupName="enableProxy"
                                        Style="{StaticResource FlatRoundRadioButton}" />
                                    <RadioButton
                                        HorizontalAlignment="Left"
                                        Content="{DynamicResource UseDefaultProxy}"
                                        GroupName="enableProxy"
                                        IsChecked="True"
                                        Style="{StaticResource FlatRoundRadioButton}" />
                                    <RadioButton
                                        x:Name="customProxyRadioButton"
                                        HorizontalAlignment="Left"
                                        Content="{DynamicResource CustomProxy}"
                                        GroupName="enableProxy"
                                        Style="{StaticResource FlatRoundRadioButton}" />

                                </StackPanel>

                                <StackPanel Orientation="Vertical" Visibility="{Binding ElementName=customProxyRadioButton, Path=IsChecked, Converter={StaticResource BoolToVisibilityConverter}}">
                                    <StackPanel
                                        Name="proxyTypesStackPanel"
                                        Margin="20,5"
                                        Orientation="Horizontal">
                                        <TextBlock
                                            MinWidth="60"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{DynamicResource Type}"
                                            TextAlignment="Left"
                                            ToolTip="[0-2000]" />
                                        <RadioButton
                                            Content="HTTP"
                                            GroupName="proxyType"
                                            IsChecked="True"
                                            Style="{StaticResource FlatRoundRadioButton}" />
                                        <RadioButton
                                            Content="SOCKS"
                                            GroupName="proxyType"
                                            Style="{StaticResource FlatRoundRadioButton}" />
                                    </StackPanel>
                                    <StackPanel
                                        Margin="20,5"
                                        Orientation="Horizontal"
                                        Visibility="Visible">
                                        <TextBlock
                                            MinWidth="60"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{DynamicResource Server}"
                                            TextAlignment="Left" />
                                        <super:SearchBox MinWidth="400" Text="{Binding ProxyServer, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />


                                        <TextBlock
                                            MinWidth="60"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{DynamicResource Port}"
                                            TextAlignment="Left" />
                                        <super:SearchBox MinWidth="200" Text="{Binding ProxyPort, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                    </StackPanel>
                                    <StackPanel
                                        Margin="20,5"
                                        Orientation="Horizontal"
                                        Visibility="Visible">
                                        <TextBlock
                                            MinWidth="60"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{DynamicResource UserName}"
                                            TextAlignment="Left" />
                                        <super:SearchBox MinWidth="400" Text="{Binding ProxyUserName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />


                                        <TextBlock
                                            MinWidth="60"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{DynamicResource Password}"
                                            TextAlignment="Left" />

                                        <Border
                                            Margin="1"
                                            Background="{DynamicResource Window.Title.Background}"
                                            Style="{StaticResource InfoBorder}">
                                            <PasswordBox
                                                Name="passwordBox"
                                                Width="188"
                                                Height="25"
                                                VerticalContentAlignment="Center"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                CaretBrush="{DynamicResource Window.Foreground}"
                                                ContextMenu="{DynamicResource PasteOnlyContextMenu}"
                                                Foreground="{DynamicResource Window.Foreground}"
                                                PasswordChar="●"
                                                Style="{x:Null}" />
                                        </Border>


                                    </StackPanel>

                                </StackPanel>
                                <StackPanel Orientation="Horizontal">

                                    <Button
                                        MinWidth="100"
                                        Margin="20,10"
                                        HorizontalAlignment="Left"
                                        Click="TestProxy"
                                        Content="{DynamicResource Test}"
                                        Style="{StaticResource ButtonPrimary}" />

                                    <TextBlock
                                        VerticalAlignment="Center"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource TestUrl}" />
                                    <super:SearchBox
                                        Name="textProxyUrl"
                                        MinWidth="300"
                                        Margin="10,0"
                                        VerticalAlignment="Center"
                                        Background="{DynamicResource Window.Title.Background}"
                                        Text="http://www.google.com" />
                                    <fa:ImageAwesome
                                        Grid.Column="0"
                                        Width="20"
                                        Margin="20,4,0,0"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center">
                                        <fa:ImageAwesome.Style>
                                            <Style TargetType="fa:ImageAwesome">
                                                <Style.Triggers>

                                                    <DataTrigger Binding="{Binding TestProxyStatus, Mode=OneWay}" Value="Canceled">
                                                        <Setter Property="Icon" Value="TimesCircle" />
                                                        <Setter Property="Foreground" Value="Red" />
                                                        <Setter Property="Spin" Value="False" />
                                                    </DataTrigger>

                                                    <DataTrigger Binding="{Binding TestProxyStatus, Mode=OneWay}" Value="RanToCompletion">
                                                        <Setter Property="Icon" Value="CheckCircle" />
                                                        <Setter Property="Foreground" Value="#20B759" />
                                                        <Setter Property="Spin" Value="False" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding TestProxyStatus, Mode=OneWay}" Value="Running">
                                                        <Setter Property="Icon" Value="Refresh" />
                                                        <Setter Property="Foreground" Value="{DynamicResource Common.Status.Running.Background}" />
                                                        <Setter Property="Spin" Value="True" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </fa:ImageAwesome.Style>

                                    </fa:ImageAwesome>
                                </StackPanel>
                            </StackPanel>
                        </Grid>




                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="{DynamicResource Show}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="界面" />
                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">
                                <WrapPanel Orientation="Horizontal">
                                    <CheckBox Content="{DynamicResource SearchBar}" IsChecked="{Binding DisplaySearchBox, Mode=TwoWay, Source={x:Static config:ConfigManager.Main}}" />
                                    <CheckBox Content="{DynamicResource PageAdjustBar}" IsChecked="{Binding DisplayPage, Mode=TwoWay, Source={x:Static config:ConfigManager.Main}}" />
                                    <CheckBox Content="{DynamicResource PageDropMenu}" IsChecked="{Binding PaginationCombobox, Mode=TwoWay, Source={x:Static config:ConfigManager.Main}}" />
                                    <CheckBox Content="{DynamicResource StatusBar}" IsChecked="{Binding DisplayStatusBar, Mode=TwoWay, Source={x:Static config:ConfigManager.Main}}" />
                                    <CheckBox Content="{DynamicResource FunctionBar}" IsChecked="{Binding DisplayFunBar, Mode=TwoWay, Source={x:Static config:ConfigManager.Main}}" />
                                    <CheckBox
                                        Content="{DynamicResource Navigation}"
                                        IsChecked="{Binding DisplayNavigation, Mode=TwoWay, Source={x:Static config:ConfigManager.Main}}"
                                        Visibility="Collapsed" />
                                </WrapPanel>
                                <CheckBox Content="{DynamicResource ApplyBgToDetail}" IsChecked="{Binding DetailShowBg, Mode=TwoWay, Source={x:Static config:ConfigManager.Settings}}" />
                                <CheckBox Content="{DynamicResource BlurBackground}" IsChecked="{Binding BlurBackground, Mode=TwoWay, Source={x:Static config:ConfigManager.VideoConfig}}" />

                                <WrapPanel
                                    Margin="5"
                                    HorizontalAlignment="Left"
                                    Orientation="Horizontal">
                                    <TextBlock
                                        MinWidth="100"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource ScrollSpeed}"
                                        TextAlignment="Left" />
                                    <super:Slider
                                        Width="200"
                                        Margin="5,0"
                                        VerticalAlignment="Center"
                                        Cursor="Hand"
                                        Integer="False"
                                        LargeChange="0.5"
                                        Maximum="3.0"
                                        Minimum="0.1"
                                        SmallChange="0.2"
                                        Value="{Binding ScrollSpeedFactor, Mode=TwoWay, Source={x:Static config:ConfigManager.Main}}" />
                                    <Label Content="{Binding ScrollSpeedFactor, Mode=OneWay, Source={x:Static config:ConfigManager.Main}, Converter={StaticResource RoundNumberConverter}, ConverterParameter=2}" Style="{StaticResource InfoLabel}" />

                                </WrapPanel>

                            </StackPanel>



                        </Grid>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="影片" />

                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">
                                <WrapPanel Orientation="Horizontal">
                                    <CheckBox Content="{DynamicResource ID}" IsChecked="{Binding DisplayID, Mode=TwoWay, Source={x:Static config:ConfigManager.VideoConfig}}" />
                                    <CheckBox Content="{DynamicResource Title}" IsChecked="{Binding DisplayTitle, Mode=TwoWay, Source={x:Static config:ConfigManager.VideoConfig}}" />
                                    <CheckBox Content="{DynamicResource Date}" IsChecked="{Binding DisplayDate, Mode=TwoWay, Source={x:Static config:ConfigManager.VideoConfig}}" />
                                    <CheckBox Content="{DynamicResource Stamp}" IsChecked="{Binding DisplayStamp, Mode=TwoWay, Source={x:Static config:ConfigManager.VideoConfig}}" />
                                    <CheckBox Content="{DynamicResource Favorites}" IsChecked="{Binding DisplayFavorites, Mode=TwoWay, Source={x:Static config:ConfigManager.VideoConfig}}" />

                                </WrapPanel>
                                <CheckBox Content="{DynamicResource ShowFIlename}" IsChecked="{Binding ShowFileNameIfTitleEmpty, Mode=TwoWay, Source={x:Static config:ConfigManager.VideoConfig}}" />
                                <CheckBox Content="{DynamicResource ShowCreateDate}" IsChecked="{Binding ShowCreateDateIfReleaseDateEmpty, Mode=TwoWay, Source={x:Static config:ConfigManager.VideoConfig}}" />
                                <WrapPanel
                                    Margin="5"
                                    HorizontalAlignment="Left"
                                    Orientation="Horizontal"
                                    Visibility="{Binding BlurBackground, Source={x:Static config:ConfigManager.VideoConfig}, Mode=OneWay, Converter={StaticResource BoolToOppositeVisibilityConverter}}">
                                    <TextBlock
                                        MinWidth="100"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource MovieOpacity}"
                                        TextAlignment="Left" />
                                    <super:Slider
                                        Width="200"
                                        Margin="5,0"
                                        VerticalAlignment="Center"
                                        Cursor="Hand"
                                        Integer="False"
                                        LargeChange="0.1"
                                        Maximum="1"
                                        Minimum="0.1"
                                        SmallChange="0.05"
                                        Value="{Binding MovieOpacity, Mode=TwoWay, Source={x:Static config:ConfigManager.VideoConfig}}" />
                                    <Label Content="{Binding MovieOpacity, Mode=OneWay, Source={x:Static config:ConfigManager.VideoConfig}, Converter={StaticResource RoundNumberConverter}, ConverterParameter=2}" Style="{StaticResource InfoLabel}" />

                                </WrapPanel>
                            </StackPanel>
                        </Grid>





                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="{DynamicResource VedioProcessing}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>


                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="{DynamicResource Basic}" />

                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">
                                <StackPanel Margin="5" Orientation="Horizontal">
                                    <TextBlock
                                        MinWidth="150"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource FFmpegPath}"
                                        TextAlignment="Left" />
                                    <super:SearchBox
                                        MinWidth="400"
                                        Background="{DynamicResource Menu.Background}"
                                        Text="{Binding FFMPEG_Path, Mode=TwoWay}" />
                                    <Button
                                        Margin="10,5"
                                        Click="SetFFMPEGPath"
                                        Content="{DynamicResource ChooseFile}"
                                        Style="{StaticResource ButtonPrimary}" />
                                    <TextBlock
                                        Cursor="Hand"
                                        Foreground="{DynamicResource Common.HighLight.BorderBrush}"
                                        MouseLeftButtonUp="CopyFFmpegUrl"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource Download}"
                                        TextDecorations="Underline" />




                                </StackPanel>

                                <WrapPanel Margin="5" Orientation="Horizontal">
                                    <TextBlock
                                        MinWidth="150"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource ThreadNumber}"
                                        TextAlignment="Left" />

                                    <super:Slider
                                        x:Name="ThreadNumSlider"
                                        Width="200"
                                        Height="30"
                                        Margin="0"
                                        BarCornerRadius="4"
                                        BarHeight="6"
                                        DragSize="20"
                                        Integer="True"
                                        Maximum="10"
                                        Minimum="0"
                                        Value="{Binding ScreenShot_ThreadNum, Mode=TwoWay}" />

                                    <!--<Slider
                                        x:Name="ThreadNumSlider"
                                        Width="200"
                                        Margin="10,0"
                                        VerticalAlignment="Center"
                                        LargeChange="2"
                                        Maximum="10"
                                        Minimum="1"
                                        SmallChange="1"
                                        TickFrequency="1"
                                        Value="{Binding ScreenShot_ThreadNum, Mode=TwoWay}" />-->


                                    <TextBlock
                                        Width="50"
                                        Height="auto"
                                        Margin="5,2"
                                        HorizontalAlignment="Left"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{Binding Value, ElementName=ThreadNumSlider, Mode=OneWay}"
                                        TextAlignment="Center" />




                                </WrapPanel>
                            </StackPanel>



                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="截图" />

                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">
                                <CheckBox Content="{DynamicResource SkipIfDirExists}" IsChecked="{Binding SkipExistScreenShot, Mode=TwoWay}" />
                                <CheckBox Content="{DynamicResource ScreenShotAfterImport}" IsChecked="{Binding ScreenShotAfterImport, Mode=TwoWay}" />

                                <StackPanel Margin="5,0" Orientation="Horizontal">
                                    <TextBlock
                                        MinWidth="150"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource ScreenShotNumber}"
                                        TextAlignment="Left" />
                                    <super:Slider
                                        x:Name="ScreenshotNumSlider"
                                        Width="200"
                                        Height="30"
                                        Margin="0,5"
                                        BarCornerRadius="4"
                                        BarHeight="6"
                                        DragSize="20"
                                        Integer="True"
                                        Maximum="30"
                                        Minimum="0"
                                        Value="{Binding ScreenShotNum, Mode=TwoWay}" />
                                    <!--<Slider
                                            x:Name="ScreenshotNumSlider"
                                            Width="200"
                                            VerticalAlignment="Center"
                                            LargeChange="2"
                                            Maximum="30"
                                            Minimum="1"
                                            SmallChange="1"
                                            TickFrequency="1"
                                            Value="{Binding ScreenShotNum, Mode=TwoWay}" />-->
                                    <TextBlock
                                        Width="30"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{Binding Value, ElementName=ScreenshotNumSlider, Mode=OneWay}" />

                                </StackPanel>
                                <StackPanel Margin="5,0" Orientation="Horizontal">
                                    <TextBlock
                                        MinWidth="150"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource SkipBegin}"
                                        TextAlignment="Left" />
                                    <super:Slider
                                        x:Name="ScreenShotIgnoreSlider1"
                                        Width="200"
                                        Height="30"
                                        Margin="0,5"
                                        BarCornerRadius="4"
                                        BarHeight="6"
                                        DragSize="20"
                                        Integer="True"
                                        Maximum="10"
                                        Minimum="0"
                                        Value="{Binding ScreenShotIgnoreStart, Mode=TwoWay}" />

                                    <TextBlock
                                        Width="30"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{Binding ElementName=ScreenShotIgnoreSlider1, Mode=OneWay, Path=Value}" />

                                </StackPanel>
                                <StackPanel Margin="5,0" Orientation="Horizontal">
                                    <TextBlock
                                        MinWidth="150"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource SkipEnd}"
                                        TextAlignment="Left" />
                                    <super:Slider
                                        x:Name="ScreenShotIgnoreSlider2"
                                        Width="200"
                                        Height="30"
                                        Margin="0,5"
                                        BarCornerRadius="4"
                                        BarHeight="6"
                                        DragSize="20"
                                        Integer="True"
                                        Maximum="10"
                                        Minimum="0"
                                        Value="{Binding ScreenShotIgnoreEnd, Mode=TwoWay}" />

                                    <TextBlock
                                        Width="30"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{Binding ElementName=ScreenShotIgnoreSlider2, Mode=OneWay, Path=Value}" />
                                </StackPanel>
                            </StackPanel>

                        </Grid>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="GIF " />
                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">
                                <CheckBox Content="{DynamicResource SkipExistGif}" IsChecked="{Binding SkipExistGif, Mode=TwoWay}" />


                                <WrapPanel Margin="5,0" Orientation="Horizontal">
                                    <TextBlock
                                        MinWidth="70"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource Resolution}"
                                        TextAlignment="Left" />
                                    <super:Slider
                                        x:Name="GifSlider1"
                                        Width="200"
                                        Height="30"
                                        Margin="0,5"
                                        BarCornerRadius="4"
                                        BarHeight="6"
                                        DragSize="20"
                                        Integer="True"
                                        Maximum="4096"
                                        Minimum="0"
                                        Value="{Binding GifWidth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                    <!--<Slider
                                            x:Name="GifSlider1"
                                            Width="250"
                                            Margin="5,0"
                                            VerticalAlignment="Center"
                                            Cursor="Hand"
                                            IsSnapToTickEnabled="True"
                                            LargeChange="10"
                                            Maximum="4096"
                                            Minimum="50"
                                            SmallChange="1"
                                            TickFrequency="1"
                                            TickPlacement="None"
                                            Value="{Binding GifWidth, Mode=TwoWay}" />-->
                                    <TextBlock
                                        MinWidth="100"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{Binding Value, Mode=OneWay, ElementName=GifSlider1, StringFormat={}{0} px}" />

                                    <super:Slider
                                        x:Name="GifSlider2"
                                        Width="200"
                                        Height="30"
                                        Margin="10,5"
                                        BarCornerRadius="4"
                                        BarHeight="6"
                                        DragSize="20"
                                        Integer="True"
                                        IsEnabled="{Binding GifAutoHeight, Converter={StaticResource OppositeBooleanConverter}}"
                                        Maximum="2160"
                                        Minimum="0"
                                        Value="{Binding GifHeight, Mode=TwoWay}" />
                                    <!--<Slider
                                            x:Name="GifSlider2"
                                            Width="250"
                                            Margin="20,0,10,0"
                                            VerticalAlignment="Center"
                                            Cursor="Hand"
                                            IsEnabled="{Binding GifAutoHeight, Converter={StaticResource OppositeBooleanConverter}}"
                                            IsSnapToTickEnabled="True"
                                            LargeChange="10"
                                            Maximum="2160"
                                            Minimum="50"
                                            SmallChange="1"
                                            TickFrequency="1"
                                            TickPlacement="None"
                                            Value="{Binding GifHeight, Mode=TwoWay}" />-->
                                    <TextBlock
                                        VerticalAlignment="Center"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{Binding Value, ElementName=GifSlider2, StringFormat={}{0} px}" />
                                    <CheckBox
                                        Margin="20,10"
                                        Content="{DynamicResource AutoHeight}"
                                        IsChecked="{Binding GifAutoHeight, Mode=TwoWay}" />


                                </WrapPanel>

                                <WrapPanel Margin="5,0" Orientation="Horizontal">
                                    <TextBlock
                                        MinWidth="70"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource Duration}"
                                        TextAlignment="Left" />
                                    <super:Slider
                                        x:Name="GifDurationSlider1"
                                        Width="200"
                                        Height="30"
                                        Margin="0,5"
                                        BarCornerRadius="4"
                                        BarHeight="6"
                                        DragSize="20"
                                        Integer="True"
                                        Maximum="20"
                                        Minimum="0"
                                        Value="{Binding GifDuration, Mode=TwoWay}" />

                                    <TextBlock
                                        MinWidth="50"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{Binding Value, ElementName=GifDurationSlider1, StringFormat={}{0} s}" />
                                </WrapPanel>
                            </StackPanel>
                        </Grid>
                        <WrapPanel
                            Margin="10,10"
                            Orientation="Horizontal"
                            Visibility="Collapsed">
                            <TextBlock
                                Height="auto"
                                MinWidth="150"
                                Margin="2"
                                Style="{StaticResource BaseTextBlock}"
                                Text="{DynamicResource TaskTimeOut}"
                                TextAlignment="Left" />
                            <Slider
                                x:Name="ScreenShotTimeoutSlider"
                                Width="200"
                                VerticalAlignment="Center"
                                LargeChange="2"
                                Maximum="60"
                                Minimum="2"
                                SmallChange="1"
                                TickFrequency="1"
                                Value="{Binding ScreenShot_TimeOut, Mode=TwoWay}" />


                            <TextBlock
                                Width="50"
                                Height="auto"
                                Margin="5,2"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center"
                                Style="{StaticResource BaseTextBlock}"
                                Text="{Binding Value, ElementName=ScreenShotTimeoutSlider, Mode=OneWay}"
                                TextAlignment="Center" />




                        </WrapPanel>



                    </StackPanel>
                </ScrollViewer>
            </TabItem>


            <TabItem Header="{DynamicResource Rename}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="基本" />
                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">
                                <CheckBox Content="{DynamicResource TrimTitle}" IsChecked="{Binding Path=RemoveTitleSpace, Mode=TwoWay}" />
                                <CheckBox
                                    Click="AddToRename"
                                    Content="{DynamicResource AutoAddStamp}"
                                    IsChecked="{Binding Path=AddRenameTag, Mode=TwoWay}"
                                    IsEnabled="False"
                                    Visibility="Collapsed" />





                                <!--{'\\','#','%', '&', '*', '|', ':', '"', ' <', '>', '?', '/','.' }-->
                                <StackPanel Margin="5,0" Orientation="Horizontal">
                                    <TextBlock
                                        MinWidth="200"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource InfoSep}"
                                        TextAlignment="Left" />
                                    <ComboBox
                                        x:Name="OutComboBox"
                                        Height="30"
                                        MinWidth="100"
                                        HorizontalAlignment="Left"
                                        SelectionChanged="OutComboBox_SelectionChanged"
                                        Style="{StaticResource BorderComboBox}">
                                        <ComboBoxItem Content="[null]" />
                                        <ComboBoxItem Content="_" />
                                        <ComboBoxItem Content="-" />
                                        <ComboBoxItem Content="$" />
                                        <ComboBoxItem Content="%" />
                                        <ComboBoxItem Content="^" />
                                        <ComboBoxItem Content="@" />
                                        <ComboBoxItem Content="+" />
                                        <ComboBoxItem Content="," />
                                    </ComboBox>
                                </StackPanel>

                                <StackPanel Margin="5,0" Orientation="Horizontal">
                                    <TextBlock
                                        MinWidth="200"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource GenreActorSep}"
                                        TextAlignment="Left" />
                                    <ComboBox
                                        x:Name="InComboBox"
                                        Height="30"
                                        MinWidth="100"
                                        HorizontalAlignment="Left"
                                        SelectionChanged="InComboBox_SelectionChanged"
                                        Style="{StaticResource BorderComboBox}">
                                        <ComboBoxItem Content="[null]" />
                                        <ComboBoxItem Content="_" />
                                        <ComboBoxItem Content="-" />
                                        <ComboBoxItem Content="$" />
                                        <ComboBoxItem Content="%" />
                                        <ComboBoxItem Content="^" />
                                        <ComboBoxItem Content="@" />
                                        <ComboBoxItem Content="+" />
                                        <ComboBoxItem Content="," />
                                    </ComboBox>
                                </StackPanel>
                            </StackPanel>
                        </Grid>


                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="字段" />
                            <WrapPanel
                                x:Name="CheckedBoxWrapPanel"
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Horizontal">
                                <ToggleButton
                                    Width="100"
                                    Margin="5"
                                    Padding="5"
                                    Content="{DynamicResource ID}"
                                    Style="{StaticResource FlatToggleButtonStyle}" />
                                <ToggleButton
                                    Width="100"
                                    Margin="5"
                                    Padding="5"
                                    Content="{DynamicResource Title}"
                                    Style="{StaticResource FlatToggleButtonStyle}" />

                                <ToggleButton
                                    Width="100"
                                    Margin="5"
                                    Padding="5"
                                    Content="{DynamicResource VideoType}"
                                    Style="{StaticResource FlatToggleButtonStyle}" />

                                <ToggleButton
                                    Width="100"
                                    Margin="5"
                                    Padding="5"
                                    Content="{DynamicResource Year}"
                                    Style="{StaticResource FlatToggleButtonStyle}" />
                                <ToggleButton
                                    Width="100"
                                    Margin="5"
                                    Padding="5"
                                    Content="{DynamicResource Duration}"
                                    Style="{StaticResource FlatToggleButtonStyle}" />
                                <ToggleButton
                                    Width="100"
                                    Margin="5"
                                    Padding="5"
                                    Content="{DynamicResource Country}"
                                    Style="{StaticResource FlatToggleButtonStyle}" />
                                <ToggleButton
                                    Width="100"
                                    Margin="5"
                                    Padding="5"
                                    Content="{DynamicResource Director}"
                                    Style="{StaticResource FlatToggleButtonStyle}" />
                                <ToggleButton
                                    Width="100"
                                    Margin="5"
                                    Padding="5"
                                    Content="{DynamicResource Tag}"
                                    Style="{StaticResource FlatToggleButtonStyle}" />
                                <ToggleButton
                                    Width="100"
                                    Margin="5"
                                    Padding="5"
                                    Content="{DynamicResource Genre}"
                                    Style="{StaticResource FlatToggleButtonStyle}" />
                                <ToggleButton
                                    Width="100"
                                    Margin="5"
                                    Padding="5"
                                    Content="{DynamicResource Label}"
                                    Style="{StaticResource FlatToggleButtonStyle}" />
                                <ToggleButton
                                    Width="100"
                                    Margin="5"
                                    Padding="5"
                                    Content="{DynamicResource Actor}"
                                    Style="{StaticResource FlatToggleButtonStyle}" />
                                <ToggleButton
                                    Width="100"
                                    Margin="5"
                                    Padding="5"
                                    Content="{DynamicResource Studio}"
                                    Style="{StaticResource FlatToggleButtonStyle}" />
                                <ToggleButton
                                    Width="100"
                                    Margin="5"
                                    Padding="5"
                                    Content="{DynamicResource Rating}"
                                    Style="{StaticResource FlatToggleButtonStyle}" />

                                <ToggleButton
                                    MinWidth="100"
                                    Margin="5"
                                    Padding="5"
                                    Content="{DynamicResource ReleaseDate}"
                                    Style="{StaticResource FlatToggleButtonStyle}" />

                            </WrapPanel>


                        </Grid>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock
                                Margin="20,10,50,0"
                                Style="{StaticResource SettingTitleStyle}"
                                Text="规则" />
                            <StackPanel Grid.Column="1" Orientation="Vertical">
                                <Border Style="{StaticResource InfoBorder}">
                                    <TextBlock
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource Attention_Rename}"
                                        TextAlignment="Left" />
                                </Border>
                                <Grid Margin="0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="auto" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock
                                        Grid.Column="0"
                                        MinWidth="100"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource RenameRule}"
                                        TextAlignment="Left" />

                                    <TextBox
                                        Grid.Column="1"
                                        Width="auto"
                                        Margin="10,0"
                                        Padding="10,5"
                                        HorizontalAlignment="Stretch"
                                        Background="{DynamicResource Window.Title.Background}"
                                        CaretBrush="{DynamicResource Window.Foreground}"
                                        ContextMenu="{x:Null}"
                                        FontSize="18"
                                        Foreground="{DynamicResource Window.Foreground}"
                                        IsReadOnly="False"
                                        PreviewKeyDown="hotkeyTextBox_PreviewKeyDown"
                                        PreviewKeyUp="hotkeyTextBox_PreviewKeyUp"
                                        Style="{StaticResource SettingBaseTextBox}"
                                        Text="{Binding FormatString, Mode=TwoWay}"
                                        TextAlignment="Left"
                                        TextChanged="TextBox_TextChanged"
                                        TextWrapping="Wrap" />


                                </Grid>




                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock
                                        Grid.Column="0"
                                        MinWidth="100"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource RenamePreview}"
                                        TextAlignment="Left" />
                                    <TextBlock
                                        Grid.Column="1"
                                        Width="auto"
                                        Margin="10,0"
                                        Padding="10,5"
                                        HorizontalAlignment="Stretch"
                                        Background="{DynamicResource Window.Title.Background}"
                                        FontSize="18"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{Binding ViewRenameFormat}"
                                        TextAlignment="Left"
                                        TextWrapping="Wrap" />
                                </Grid>
                            </StackPanel>
                        </Grid>







                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="{DynamicResource Library}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="备份" />
                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">
                                <CheckBox Content="{DynamicResource AutoBackLibrary}" IsChecked="{Binding AutoBackup, Mode=TwoWay}" />
                                <StackPanel
                                    Margin="5"
                                    Orientation="Horizontal"
                                    Visibility="{Binding AutoBackup, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}">
                                    <TextBlock
                                        HorizontalAlignment="Left"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{DynamicResource BackUpPeriodDay}"
                                        TextAlignment="Left" />
                                    <ComboBox
                                        Grid.Column="1"
                                        Height="30"
                                        MinWidth="200"
                                        Margin="5"
                                        HorizontalAlignment="Stretch"
                                        SelectedIndex="{Binding AutoBackupPeriodIndex}"
                                        Style="{StaticResource BorderComboBox}">
                                        <ComboBoxItem Content="1" />
                                        <ComboBoxItem Content="3" />
                                        <ComboBoxItem Content="7" />
                                        <ComboBoxItem Content="15" />
                                        <ComboBoxItem Content="30" />
                                    </ComboBox>
                                </StackPanel>

                            </StackPanel>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="{DynamicResource Index}" />
                            <StackPanel
                                Grid.Column="1"
                                Margin="5"
                                Orientation="Vertical">


                                <StackPanel Orientation="Horizontal">
                                    <Button
                                        Margin="5"
                                        HorizontalAlignment="Left"
                                        Click="CreatePlayableIndex"
                                        Content="{DynamicResource CreateDataExistIndex}"
                                        FontSize="14"
                                        IsEnabled="{Binding IndexCreating, Converter={StaticResource OppositeBooleanConverter}}"
                                        Style="{StaticResource ButtonPrimary}" />
                                    <Button
                                        Margin="5"
                                        HorizontalAlignment="Left"
                                        Click="CreatePictureIndex"
                                        Content="{DynamicResource CreateImageExistIndex}"
                                        FontSize="14"
                                        IsEnabled="{Binding IndexCreating, Converter={StaticResource OppositeBooleanConverter}}"
                                        Style="{StaticResource ButtonPrimary}" />
                                </StackPanel>
                                <StackPanel Margin="10" Orientation="Horizontal">

                                    <super:LoadingCircle
                                        Width="25"
                                        Height="25"
                                        Margin="5,0"
                                        Foreground="{DynamicResource Window.Foreground}"
                                        Visibility="{Binding IndexCreating, Converter={StaticResource BoolToVisibilityConverter}}" />
                                    <Button
                                        Margin="5"
                                        Click="CancelCreateIndex"
                                        Content="{DynamicResource Cancel}"
                                        Style="{StaticResource ButtonDanger}"
                                        Visibility="{Binding IndexCreating, Converter={StaticResource BoolToVisibilityConverter}}" />


                                </StackPanel>
                                <ProgressBar
                                    Name="indexCreatingProgressBar"
                                    Width="300"
                                    Height="10"
                                    Margin="5,0"
                                    HorizontalAlignment="Left"
                                    Maximum="100"
                                    Style="{StaticResource NormalStaticProgressBar}"
                                    Visibility="{Binding IndexCreating, Converter={StaticResource BoolToVisibilityConverter}}" />

                            </StackPanel>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Style="{StaticResource SettingTitleStyle}" Text="关联" />

                            <StackPanel
                                Grid.Column="1"
                                Margin="5,0"
                                Orientation="Vertical"
                                Visibility="{Binding MainWindowVisible, Converter={StaticResource BoolToVisibilityConverter}}">

                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource SetLibraryAsso}" />
                                    <ComboBox
                                        Name="DatabaseComboBox"
                                        Grid.Column="1"
                                        Height="30"
                                        MinWidth="200"
                                        Margin="5"
                                        HorizontalAlignment="Stretch"
                                        DisplayMemberPath="Name"
                                        SelectedValuePath="DBId"
                                        SelectionChanged="DatabaseComboBox_SelectionChanged"
                                        Style="{StaticResource BorderComboBox}" />



                                </StackPanel>


                                <StackPanel Orientation="Vertical">
                                    <ListBox
                                        x:Name="PathListBox"
                                        Height="200"
                                        Margin="5,0"
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Top"
                                        d:ItemsSource="{d:SampleData ItemCount=5}"
                                        AllowDrop="True"
                                        Background="Transparent"
                                        DragOver="PathListBox_DragOver"
                                        Drop="PathListBox_Drop"
                                        Foreground="{DynamicResource Window.Foreground}"
                                        ItemsSource="{Binding ScanPath}"
                                        Style="{StaticResource FolderListBox}">
                                        <ListBox.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <WrapPanel Orientation="Vertical" />
                                            </ItemsPanelTemplate>
                                        </ListBox.ItemsPanel>
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal">
                                                    <Image
                                                        Width="20"
                                                        Margin="1"
                                                        Source="pack://application:,,,/Resources/Picture/folder.png" />
                                                    <TextBlock
                                                        Margin="2,0"
                                                        VerticalAlignment="Center"
                                                        FontSize="15"
                                                        Foreground="{DynamicResource Window.Foreground}"
                                                        Text="{Binding}" />
                                                </StackPanel>
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListBox>

                                    <StackPanel
                                        Margin="10"
                                        HorizontalAlignment="Left"
                                        Orientation="Horizontal">
                                        <super:HoverPath
                                            Margin="5,0"
                                            Click="AddPath"
                                            Style="{StaticResource FolderHoverPath}" />
                                        <super:HoverPath
                                            Margin="5,0"
                                            Click="DelPath"
                                            Style="{StaticResource CloseExHoverPath}" />
                                        <super:HoverPath
                                            Margin="5,0"
                                            Click="ClearPath"
                                            Style="{StaticResource DeleteHoverPath}" />
                                    </StackPanel>

                                </StackPanel>
                            </StackPanel>


                        </Grid>


                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            <TabItem Header="{DynamicResource NetWork}" Visibility="Collapsed">
                <StackPanel Orientation="Vertical">

                    <StackPanel Orientation="Horizontal">
                        <CheckBox Content="开启端口监听" IsChecked="{Binding ListenEnabled, Mode=TwoWay}" />

                        <super:SearchBox
                            Width="150"
                            Padding="5,0"
                            Foreground="{DynamicResource Window.Foreground}"
                            PlaceHolder="端口号"
                            PlaceHolderForeground="{DynamicResource Window.Sub.Foreground}"
                            Text="{Binding ListenPort, Mode=TwoWay}"
                            Visibility="{Binding ListenEnabled, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}" />
                    </StackPanel>

                </StackPanel>
            </TabItem>

            <TabItem Header="{DynamicResource Plugin}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto" MinWidth="150" />
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid Background="{DynamicResource Window.Side.Background}">
                        <ListBox
                            Name="serverListBox"
                            Grid.Row="2"
                            Margin="1"
                            Padding="1"
                            VerticalAlignment="Top"
                            HorizontalContentAlignment="Stretch"
                            d:ItemsSource="{d:SampleData ItemCount=5}"
                            Background="Transparent"
                            ItemContainerStyle="{StaticResource NormalListBoxItem}"
                            ItemsSource="{Binding Path=DisplayCrawlerServers, Mode=OneWay, NotifyOnSourceUpdated=True}"
                            SelectionChanged="PluginList_SelectionChanged"
                            Style="{StaticResource NormalListBox}">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Grid Background="Transparent">
                                        <TextBlock
                                            Grid.Column="0"
                                            Padding="5,0,0,0"
                                            HorizontalAlignment="Left"
                                            Background="Transparent"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{Binding .}" />
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Grid>
                    <GridSplitter
                        Grid.Column="1"
                        Width="4"
                        HorizontalAlignment="Left"
                        Panel.ZIndex="10"
                        Style="{StaticResource HoverSpliter}" />

                    <Grid
                        Grid.Column="2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Panel.ZIndex="-1"
                        Visibility="{Binding ShowCurrentPlugin, Mode=OneWay, Converter={StaticResource BoolToOppositeVisibilityConverter}}">
                        <StackPanel Orientation="Vertical">
                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="请前往插件中心下载插件" />
                            <Button
                                Content="{DynamicResource Plugin}"
                                Style="{StaticResource ButtonPrimary}"
                                Visibility="Collapsed" />
                        </StackPanel>

                    </Grid>

                    <Grid Grid.Column="2" Visibility="{Binding ShowCurrentPlugin, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">
                        <DockPanel Panel.ZIndex="1" LastChildFill="True">
                            <TextBlock
                                Margin="10"
                                HorizontalAlignment="Left"
                                DockPanel.Dock="Top"
                                Style="{StaticResource BaseTextBlock}"
                                Text="是否启用" />
                            <super:Switch
                                Height="20"
                                Margin="5,0"
                                HorizontalAlignment="Left"
                                Background="{DynamicResource Window.Title.Background}"
                                Click="SavePluginSetting"
                                DockPanel.Dock="Top"
                                IsChecked="{Binding CurrentPlugin.Enabled, Mode=TwoWay}" />
                            <TextBlock
                                Margin="10"
                                HorizontalAlignment="Left"
                                DockPanel.Dock="Top"
                                Style="{StaticResource BaseTextBlock}"
                                Text="服务器源" />

                            <StackPanel DockPanel.Dock="Top" Orientation="Horizontal">
                                <Button
                                    MinWidth="100"
                                    Margin="10"
                                    HorizontalAlignment="Left"
                                    Click="NewServer"
                                    Content="{DynamicResource Add}"
                                    Style="{DynamicResource FillButton}" />

                                <super:HoverPath
                                    Width="25"
                                    Height="25"
                                    Margin="5,0"
                                    Click="ShowCrawlerHelp"
                                    Style="{StaticResource HelpHoverPath}" />
                            </StackPanel>
                            <DataGrid
                                x:Name="ServersDataGrid"
                                MinHeight="200"
                                Margin="10,5"
                                d:ItemsSource="{d:SampleData ItemCount=5}"
                                CanUserDeleteRows="True"
                                CanUserResizeColumns="True"
                                PreviewMouseLeftButtonDown="SetCurrentRowIndex"
                                Style="{DynamicResource FlatDataGrid}"
                                VerticalScrollBarVisibility="Auto">

                                <DataGrid.Columns>
                                    <DataGridTemplateColumn
                                        Width="auto"
                                        MinWidth="20"
                                        Header="">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <super:HoverPath
                                                    Width="20"
                                                    Height="20"
                                                    VerticalAlignment="Center"
                                                    Click="DeleteServer"
                                                    Style="{StaticResource CloseExHoverPath}" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>


                                    <DataGridTemplateColumn Width="50" Header="{DynamicResource Enable}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <CheckBox
                                                    Margin="10,0,0,0"
                                                    HorizontalAlignment="Center"
                                                    super:CheckBoxExt.HookWidth="12"
                                                    super:CheckBoxExt.MarkHeight="17"
                                                    super:CheckBoxExt.MarkWidth="17"
                                                    IsChecked="{Binding Enabled, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>

                                    <DataGridTemplateColumn Width="auto" Header="{DynamicResource Options}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <StackPanel
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Orientation="Horizontal">
                                                    <Button
                                                        MinWidth="50"
                                                        Margin="5"
                                                        Padding="5"
                                                        Click="TestServer"
                                                        Content="{DynamicResource Test}"
                                                        Cursor="Hand"
                                                        FontSize="10"
                                                        Style="{StaticResource ButtonPrimary}"
                                                        Tag="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}}" />

                                                </StackPanel>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>

                                    <DataGridTemplateColumn Width="auto" Header="{DynamicResource Status}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <fa:ImageAwesome Height="15">
                                                    <fa:ImageAwesome.Style>
                                                        <Style TargetType="fa:ImageAwesome">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Available, Mode=OneWay}" Value="0" />
                                                                <DataTrigger Binding="{Binding Available, Mode=OneWay}" Value="-1">
                                                                    <Setter Property="Icon" Value="TimesCircle" />
                                                                    <Setter Property="Foreground" Value="Red" />
                                                                    <Setter Property="Spin" Value="False" />
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding Available, Mode=OneWay}" Value="1">
                                                                    <Setter Property="Icon" Value="CheckCircle" />
                                                                    <Setter Property="Foreground" Value="#20B759" />
                                                                    <Setter Property="Spin" Value="False" />
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding Available, Mode=OneWay}" Value="2">
                                                                    <Setter Property="Icon" Value="Refresh" />
                                                                    <Setter Property="Foreground" Value="{DynamicResource Window.Foreground}" />
                                                                    <Setter Property="Spin" Value="True" />
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </fa:ImageAwesome.Style>
                                                </fa:ImageAwesome>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>




                                    <DataGridTemplateColumn Width="*" Header="{DynamicResource Url}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <super:SearchBox
                                                    Name="url"
                                                    Margin="0,5"
                                                    Padding="5,0"
                                                    HorizontalAlignment="Stretch"
                                                    Background="Transparent"
                                                    PlaceHolder="{DynamicResource Url}"
                                                    Text="{Binding Url, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTemplateColumn Width="150" Header="Headers">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <super:SearchBox
                                                    Name="url"
                                                    Padding="5,0"
                                                    HorizontalAlignment="Stretch"
                                                    Background="Transparent"
                                                    IsReadOnly="True"
                                                    PlaceHolder="Headers"
                                                    PreviewMouseLeftButtonUp="url_PreviewMouseLeftButtonUp_1"
                                                    Text="{Binding Headers, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>




                                    <DataGridTextColumn
                                        Width="auto"
                                        Binding="{Binding LastRefreshDate, Mode=OneWay}"
                                        Foreground="{DynamicResource Window.Sub.Foreground}"
                                        Header="{DynamicResource LatestUpdateDate}"
                                        IsReadOnly="True" />

                                </DataGrid.Columns>

                                <!--<local:Server  IsEnable="True" Url="https://www.123.cam/" Cookie="123" Available="0" Name="123" LastRefreshDate="2020-09-04" />
                        <local:Server IsEnable="False" Url="https://123.com/"  Cookie="123"  Available="0"  Name="123" LastRefreshDate="2020-10-05" />-->



                            </DataGrid>

                            <Popup
                                x:Name="setHeaderPopup"
                                Width="800"
                                Height="400"
                                AllowsTransparency="True"
                                HorizontalOffset="0"
                                Placement="Center"
                                PlacementTarget="{Binding ElementName=ServersDataGrid}"
                                PopupAnimation="Fade"
                                StaysOpen="True"
                                VerticalOffset="0">
                                <Grid Margin="5">
                                    <Border
                                        Margin="5"
                                        Background="{DynamicResource Menu.Background}"
                                        CornerRadius="0 0 5 5"
                                        Effect="{StaticResource PopupDropShadowEffect}" />
                                    <Grid>

                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto" />
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="auto" />
                                        </Grid.RowDefinitions>
                                        <StackPanel
                                            Grid.Row="0"
                                            Margin="20,20,0,0"
                                            Orientation="Horizontal">
                                            <TextBlock
                                                VerticalAlignment="Center"
                                                Foreground="{DynamicResource Window.Foreground}"
                                                Text="{DynamicResource CopyHeaderHere}" />
                                            <Button
                                                Margin="20,0"
                                                VerticalAlignment="Center"
                                                Click="ShowHeaderHelp"
                                                Content="{DynamicResource Tutorial}" />
                                        </StackPanel>

                                        <Grid Grid.Row="1">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="5*" />
                                                <ColumnDefinition Width="5*" />
                                            </Grid.ColumnDefinitions>
                                            <Border
                                                Margin="10"
                                                Padding="5"
                                                BorderThickness="1">
                                                <Border.Style>
                                                    <Style BasedOn="{StaticResource InfoBorder}" TargetType="Border">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding ElementName=inputTextbox, Path=IsFocused}" Value="True">
                                                                <Setter Property="BorderBrush" Value="{DynamicResource Button.Selected.BorderBrush}" />
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Border.Style>
                                                <TextBox
                                                    x:Name="inputTextbox"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Stretch"
                                                    VerticalContentAlignment="Top"
                                                    AcceptsReturn="True"
                                                    Focusable="True"
                                                    FontSize="13"
                                                    Foreground="{DynamicResource Window.Foreground}"
                                                    ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                                    ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                    Style="{StaticResource BaseTextBox}"
                                                    Text=""
                                                    TextAlignment="Left"
                                                    TextChanged="InputHeader_TextChanged" />
                                            </Border>
                                            <Border
                                                Grid.Column="1"
                                                Margin="10"
                                                Padding="5"
                                                BorderThickness="1">
                                                <Border.Style>
                                                    <Style BasedOn="{StaticResource InfoBorder}" TargetType="Border">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding ElementName=parsedTextbox, Path=IsFocused}" Value="True">
                                                                <Setter Property="BorderBrush" Value="{DynamicResource Button.Selected.BorderBrush}" />
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Border.Style>
                                                <TextBox
                                                    x:Name="parsedTextbox"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Stretch"
                                                    VerticalContentAlignment="Top"
                                                    AcceptsReturn="True"
                                                    Focusable="True"
                                                    FontSize="13"
                                                    Foreground="{DynamicResource Window.Foreground}"
                                                    IsReadOnly="True"
                                                    ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                                    ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                    Style="{StaticResource BaseTextBox}"
                                                    Text=""
                                                    TextAlignment="Left" />
                                            </Border>
                                        </Grid>

                                        <StackPanel
                                            Grid.Row="2"
                                            Margin="10"
                                            HorizontalAlignment="Right"
                                            Orientation="Horizontal">
                                            <Button
                                                MinWidth="70"
                                                Click="ConfirmHeader"
                                                Content="{DynamicResource Confirm}"
                                                Style="{StaticResource ButtonPrimary}" />
                                            <Button
                                                MinWidth="70"
                                                Click="CancelHeader"
                                                Content="{DynamicResource Cancel}"
                                                Style="{StaticResource ButtonDanger}" />
                                        </StackPanel>
                                    </Grid>
                                </Grid>
                            </Popup>

                        </DockPanel>


                    </Grid>

                </Grid>
            </TabItem>

        </TabControl>

        <Grid Grid.Row="1" Background="{DynamicResource Window.Title.Background}">

            <Button
                MinWidth="100"
                MinHeight="30"
                Margin="10"
                HorizontalAlignment="Left"
                Click="RestoreDefault"
                Content="{DynamicResource Restore}"
                Style="{StaticResource ButtonDanger}" />

            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">


                <Button
                    MinWidth="100"
                    MinHeight="30"
                    Margin="10"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Stretch"
                    Click="SaveSettings"
                    Content="{DynamicResource Save}"
                    Style="{StaticResource ButtonSuccess}" />
                <Button
                    MinWidth="100"
                    MinHeight="30"
                    Margin="10"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Stretch"
                    Click="ApplySettings"
                    Content="{DynamicResource Apply}"
                    Style="{StaticResource ButtonPrimary}" />
            </StackPanel>

        </Grid>


    </Grid>
</super:BaseWindow>
