<chao:BaseWindow
    x:Class="Jvedio.Window_Settings"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:chao="https://gitee.com/secret/chao-controls"
    xmlns:converter="clr-namespace:Jvedio.Utils.Converter;assembly=Jvedio.Utils"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:fa="http://schemas.fontawesome.io/icons/"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:lang="clr-namespace:Jvedio.Language;assembly=Jvedio.Language"
    xmlns:local="clr-namespace:Jvedio"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:p="clr-namespace:Jvedio.Properties"
    xmlns:style="clr-namespace:Jvedio.Style;assembly=Jvedio.Style"
    Title="{x:Static lang:Resources.Settings}"
    Width="1000"
    MinWidth="800"
    MinHeight="500"
    AllowDrop="True"
    Closing="Window_Closing"
    ContentRendered="Window_ContentRendered"
    Foreground="{DynamicResource Window.Sub.Foreground}"
    ResizeMode="CanResize"
    SizeChanged="BaseWindow_SizeChanged"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">

    <chao:BaseWindow.Resources>

        <Style
            x:Key="TogglePanelStyle"
            BasedOn="{StaticResource BaseTogglePanel}"
            TargetType="{x:Type chao:TogglePanel}">
            <Setter Property="Padding" Value="0,5" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="FontSize" Value="15" />
            <Setter Property="IsExpanded" Value="True" />
            <Setter Property="LineWidth" Value="0" />
        </Style>


        <converter:Base64ImageConverter x:Key="Base64ImageConverter" />
        <converter:RoundNumberConverter x:Key="RoundNumberConverter" />


        <Style
            x:Key="MyListBoxItemStyle"
            BasedOn="{StaticResource NormalListBoxItem}"
            TargetType="ListBoxItem">
            <Setter Property="Padding" Value="10,5" />
        </Style>



        <Style
            x:Key="BaseTextBlock"
            BasedOn="{StaticResource BaseTextBlock}"
            TargetType="{x:Type TextBlock}">
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>


        <Style x:Key="TextBlockTitle" TargetType="{x:Type TextBlock}">
            <Setter Property="FocusVisualStyle" Value="{x:Null}" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="Width" Value="auto" />
            <Setter Property="Height" Value="auto" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Padding" Value="5,0,0,0" />
            <Setter Property="TextAlignment" Value="Left" />
            <Setter Property="Foreground" Value="{DynamicResource Window.Foreground}" />
            <Setter Property="FontSize" Value="16" />
            <!--  删除字体  -->
            <Setter Property="Margin" Value="20,5" />
        </Style>

        <Style x:Key="InfoLabel" TargetType="{x:Type Label}">
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Height" Value="auto" />
            <!--  删除字体  -->
            <Setter Property="FontSize" Value="15" />
            <Setter Property="Margin" Value="0,0" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="MinWidth" Value="100" />
            <Setter Property="Width" Value="auto" />
            <Setter Property="Foreground" Value="{DynamicResource Window.Foreground}" />
        </Style>


        <Style
            x:Key="BaseHcTextBox"
            BasedOn="{StaticResource TextBoxBaseStyle}"
            TargetType="TextBox">
            <!--  删除字体  -->
            <Setter Property="FontSize" Value="15" />
            <Setter Property="Foreground" Value="{DynamicResource Window.Foreground}" />
            <Setter Property="Background" Value="{DynamicResource Window.Title.Background}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Width" Value="auto" />
            <Setter Property="Height" Value="auto" />
            <Setter Property="ContextMenu" Value="{StaticResource TextBoxContextMenu}" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="MinWidth" Value="400" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Padding" Value="5" />
            <Setter Property="Margin" Value="5,0" />
            <Setter Property="CaretBrush" Value="{DynamicResource Window.Foreground}" />
        </Style>
    </chao:BaseWindow.Resources>

    <Grid Background="{DynamicResource Window.InnerDialog.Background}">


        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="auto" />
        </Grid.RowDefinitions>

        <!--  消息提示框  -->
        <ScrollViewer
            Width="auto"
            Height="auto"
            Margin="10,0,30,20"
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom"
            Panel.ZIndex="6"
            Background="Transparent"
            VerticalScrollBarVisibility="Hidden">
            <StackPanel
                Margin="0,10,10,10"
                VerticalAlignment="Bottom"
                hc:Growl.GrowlParent="True"
                hc:Growl.Token="SettingsGrowl" />
        </ScrollViewer>




        <TabControl
            x:Name="TabControl"
            Grid.Row="0"
            Margin="5"
            Background="Transparent"
            BorderBrush="{DynamicResource Window.Foreground}"
            SelectedIndex="{Binding TabControlSelectedIndex, Mode=TwoWay, FallbackValue=0}"
            Style="{DynamicResource BaseHcTabControlStyle}"
            TabStripPlacement="Top">
            <!--<TabControl
            x:Name="TabControl"
            Grid.Row="0"
            Margin="5"
            Background="Transparent"
            BorderBrush="{DynamicResource Window.Foreground}"
            SelectedIndex="{Binding TabControlSelectedIndex, Mode=TwoWay}"
            Style="{DynamicResource BaseHcTabControlStyle}"
            TabStripPlacement="Top">-->
            <TabItem
                Background="Transparent"
                FontSize="15"
                Header="{x:Static lang:Resources.Basic}">
                <StackPanel>
                    <WrapPanel Margin="5" Orientation="Vertical">
                        <CheckBox Content="{x:Static lang:Resources.CloseToBar}" IsChecked="{Binding CloseToTaskBar, Mode=TwoWay}" />
                        <CheckBox Content="{x:Static lang:Resources.TeenMode}" IsChecked="{Binding TeenMode, Mode=TwoWay}" />

                        <CheckBox
                            x:Name="openDefaultCheckBox"
                            Content="{x:Static lang:Resources.NotShowLibrary}"
                            IsChecked="{Binding OpenDataBaseDefault, Mode=TwoWay}" />
                        <CheckBox Content="{x:Static lang:Resources.DetailViewAll}" IsChecked="{Binding DetialWindowShowAllMovie, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />

                        <CheckBox Content="{x:Static lang:Resources.DeleteFileWhenDeleteInfo}" IsChecked="{Binding DelInfoAfterDelFile, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />

                        <WrapPanel Orientation="Horizontal">
                            <CheckBox Content="显示搜索历史" IsChecked="{Binding ShowSearchHistory, Mode=TwoWay}" />
                            <Button Click="ViewSearchHistory" Content="查看历史记录" />
                        </WrapPanel>

                    </WrapPanel>

                    <StackPanel
                        Margin="5,0"
                        Orientation="Horizontal"
                        Visibility="{Binding MainWindowVisiblie, Converter={StaticResource bool2VisibilityConverter}}">
                        <CheckBox
                            MinWidth="95"
                            VerticalContentAlignment="Center"
                            Checked="CheckBox_Checked"
                            Content="{x:Static lang:Resources.BossKey}"
                            IsChecked="{Binding HotKey_Enable, Mode=TwoWay, Source={x:Static p:Settings.Default}}"
                            Unchecked="Unregister_HotKey" />
                        <hc:TextBox
                            x:Name="hotkeyTextBox"
                            ContextMenu="{x:Null}"
                            IsReadOnly="True"
                            PreviewKeyDown="hotkeyTextBox_PreviewKeyDown"
                            PreviewKeyUp="hotkeyTextBox_PreviewKeyUp"
                            Style="{StaticResource BaseHcTextBox}"
                            Text="{Binding HotKey_String, Mode=OneWay, Source={x:Static p:Settings.Default}}" />
                        <Button
                            Click="ApplyHotKey"
                            Content="{x:Static lang:Resources.Apply}"
                            Style="{StaticResource ButtonStyleFill}" />
                    </StackPanel>

                    <StackPanel Margin="20,5" Orientation="Horizontal">
                        <Label Content="{x:Static lang:Resources.Language}" Style="{StaticResource InfoLabel}" />
                        <ComboBox
                            Grid.Column="1"
                            Height="30"
                            MinWidth="200"
                            Margin="5"
                            HorizontalAlignment="Stretch"
                            Background="{DynamicResource Window.Side.Background}"
                            BorderBrush="{DynamicResource Window.Side.Hover.Background}"
                            FontSize="16"
                            Foreground="{DynamicResource Window.Foreground}"
                            ItemContainerStyle="{StaticResource BaseComboBoxItemStyle}"
                            SelectedIndex="{Binding SelectedLanguage}"
                            Style="{StaticResource NormalComboBox}"
                            Tag="{DynamicResource Window.Side.Hover.Background}"
                            ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}">
                            <ComboBoxItem Content="中文" />
                            <ComboBoxItem Content="English" />
                            <ComboBoxItem Content="日本語" />
                        </ComboBox>
                    </StackPanel>





                    <StackPanel Margin="20,5" Orientation="Horizontal">
                        <Label Content="{x:Static lang:Resources.SetPlayer}" Style="{StaticResource InfoLabel}" />
                        <hc:TextBox
                            ShowClearButton="True"
                            Style="{StaticResource BaseHcTextBox}"
                            Text="{Binding VedioPlayerPath, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        <Button
                            Click="SetVideoPlayerPath"
                            Content="{x:Static lang:Resources.Choose}"
                            Style="{StaticResource ButtonStyleFill}" />
                    </StackPanel>


                    <chao:TogglePanel
                        Padding="0,5"
                        HorizontalAlignment="Left"
                        FontSize="15"
                        Header="{x:Static lang:Resources.ShowOtherOptions}"
                        IsEnabled="False"
                        IsExpanded="False"
                        LineWidth="0"
                        Style="{StaticResource BaseTogglePanel}">
                        <StackPanel Orientation="Vertical">


                            <StackPanel Margin="10,10" Orientation="Horizontal">

                                <Slider
                                    x:Name="RecentDaysSlider"
                                    Width="100"
                                    VerticalAlignment="Center"
                                    Maximum="10"
                                    Minimum="1"
                                    Value="{Binding RecentDays, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{Binding Value, ElementName=RecentDaysSlider}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{x:Static lang:Resources.ShowRecentCreate}" />
                            </StackPanel>

                            <StackPanel Margin="10,10" Orientation="Horizontal">

                                <Slider
                                    x:Name="RecentWatchSlider"
                                    Width="100"
                                    VerticalAlignment="Center"
                                    Maximum="10"
                                    Minimum="1"
                                    Value="{Binding RecentWatchDays, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{Binding Value, ElementName=RecentWatchSlider}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{x:Static lang:Resources.ShowRecentPlay}" />
                            </StackPanel>

                            <StackPanel Margin="10,10" Orientation="Horizontal">

                                <Slider
                                    x:Name="SearchCandidateSlider"
                                    Width="100"
                                    VerticalAlignment="Center"
                                    Maximum="15"
                                    Minimum="3"
                                    Value="{Binding SearchCandidateMaxCount, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{Binding Value, ElementName=SearchCandidateSlider}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{x:Static lang:Resources.SearchCandidateNumber}" />
                            </StackPanel>

                            <StackPanel Margin="10,10" Orientation="Horizontal">

                                <Slider
                                    x:Name="FilePathNumSlider"
                                    Width="100"
                                    VerticalAlignment="Center"
                                    Maximum="20"
                                    Minimum="3"
                                    Value="{Binding FilePathClassificationMaxCount, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{Binding Value, ElementName=FilePathNumSlider}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{x:Static lang:Resources.DirClassificationNumber}" />
                            </StackPanel>

                            <StackPanel Margin="10,10" Orientation="Horizontal">

                                <Slider
                                    x:Name="FilePathDepthSlider"
                                    Width="100"
                                    VerticalAlignment="Center"
                                    Maximum="10"
                                    Minimum="1"
                                    Value="{Binding FilePathClassificationMaxDepth, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{Binding Value, ElementName=FilePathDepthSlider}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{x:Static lang:Resources.DirClassificationDepth}" />
                            </StackPanel>

                        </StackPanel>
                    </chao:TogglePanel>



                </StackPanel>


            </TabItem>

            <TabItem
                Background="Transparent"
                FontSize="15"
                Header="图像">

                <StackPanel Margin="20,5">
                    <CheckBox Content="无封面时将已截取的图片作为封面" IsChecked="{Binding AutoGenScreenShot}" />
                    <CheckBox Content="{x:Static lang:Resources.ImageStretch}" IsChecked="{Binding MainImageAutoMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />

                    <Grid Margin="5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Label
                            Grid.Column="0"
                            Margin="0,10"
                            VerticalAlignment="Top"
                            VerticalContentAlignment="Top"
                            Content="影视图片路径"
                            Style="{StaticResource InfoLabel}" />
                        <StackPanel
                            Grid.Column="2"
                            Margin="5,0"
                            Orientation="Vertical">
                            <ComboBox
                                Name="ImageSelectComboBox"
                                Height="30"
                                MinWidth="500"
                                Margin="10"
                                HorizontalAlignment="Left"
                                Background="{DynamicResource Window.Side.Background}"
                                BorderBrush="{DynamicResource Window.Side.Hover.Background}"
                                FontSize="16"
                                Foreground="{DynamicResource Window.Foreground}"
                                ItemContainerStyle="{StaticResource BaseComboBoxItemStyle}"
                                SelectedIndex="{Binding PicPathMode, Mode=TwoWay, FallbackValue=2}"
                                SelectionChanged="ImageSelectComboBox_SelectionChanged"
                                Style="{StaticResource NormalComboBox}"
                                Tag="{DynamicResource Window.Side.Hover.Background}"
                                ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}">
                                <ComboBoxItem Content="绝对路径" />
                                <ComboBoxItem Content="相对于 Jvedio 的路径" />
                                <ComboBoxItem Content="相对于影片路径" />
                            </ComboBox>
                            <StackPanel Orientation="Horizontal">
                                <StackPanel.Style>
                                    <Style TargetType="StackPanel">
                                        <Setter Property="Visibility" Value="Visible" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding PicPathMode}" Value="2">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </StackPanel.Style>
                                <chao:SearchBox
                                    MinWidth="500"
                                    ShowClearButton="True"
                                    Style="{StaticResource BaseSearchTextBox}"
                                    Text="{Binding BasePicPath, Mode=TwoWay}" />
                                <Border
                                    Grid.Column="2"
                                    Padding="3,2,5,5"
                                    MouseLeftButtonDown="SetBasePicPath"
                                    ToolTip="{x:Static lang:Resources.Sorting}">

                                    <Border.Style>
                                        <Style BasedOn="{StaticResource ToolsBarBorderStyle}" TargetType="Border">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Path=SelectedIndex, ElementName=ImageSelectComboBox}" Value="0">
                                                    <Setter Property="Visibility" Value="Visible" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>



                                    <Viewbox Width="auto" Height="18">
                                        <Path
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Data="M919.04 416.4608c0-17.8688-5.12-22.9888-22.9888-22.9888H130.304c-17.8688 0-25.6 5.12-25.6 25.6v400.7424c0 53.6064 22.9888 76.8 74.0352 76.8h668.8256c51.2 0 74.0352-22.9888 74.0352-74.0352-2.56-138.0864-2.56-270.848-2.56-406.1184zM125.184 352.6144H875.52c43.4176 0 43.4176 0 43.4176-40.96 0-48.4864-20.48-66.56-66.56-66.56h-323.8912c-40.96 0-40.96 0-40.96-40.96 0-43.4176-20.48-61.44-63.7952-61.44H168.6016c-46.08-2.56-63.7952 15.36-66.56 61.44v125.5424c0.3584 20.4288 5.4784 22.9376 23.1424 22.9376z"
                                            Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                    </Viewbox>
                                </Border>
                            </StackPanel>

                            <TextBox
                                Margin="10"
                                FontSize="15"
                                Text="请输入相对路径（'./'表示当前目录， '../' 表示上一层目录）">
                                <TextBox.Style>
                                    <Style BasedOn="{StaticResource ReadOnlyNoWrapTextBox}" TargetType="TextBox">
                                        <Setter Property="Visibility" Value="Visible" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding PicPathMode}" Value="0">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBox.Style>
                            </TextBox>

                            <StackPanel Orientation="Vertical">
                                <StackPanel.Style>
                                    <Style TargetType="StackPanel">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding PicPathMode}" Value="2">
                                                <Setter Property="Visibility" Value="Visible" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </StackPanel.Style>
                                <TextBlock
                                    Margin="16,5"
                                    HorizontalAlignment="Left"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="请输入文件名或文件夹名称（无需后缀名，自动识别）" />
                                <StackPanel Orientation="Horizontal">

                                    <Label
                                        Margin="0,10"
                                        VerticalAlignment="Top"
                                        VerticalContentAlignment="Top"
                                        Content="海报"
                                        Style="{StaticResource InfoLabel}" />
                                    <chao:SearchBox
                                        MinWidth="500"
                                        ShowClearButton="True"
                                        Style="{StaticResource BaseSearchTextBox}"
                                        Text="{Binding BigImagePath, Mode=TwoWay}" />
                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <Label
                                        Margin="0,10"
                                        VerticalAlignment="Top"
                                        VerticalContentAlignment="Top"
                                        Content="缩略"
                                        Style="{StaticResource InfoLabel}" />
                                    <chao:SearchBox
                                        MinWidth="500"
                                        ShowClearButton="True"
                                        Style="{StaticResource BaseSearchTextBox}"
                                        Text="{Binding SmallImagePath, Mode=TwoWay}" />
                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <Label
                                        Margin="0,10"
                                        VerticalAlignment="Top"
                                        VerticalContentAlignment="Top"
                                        Content="预览图文件夹"
                                        Style="{StaticResource InfoLabel}" />
                                    <chao:SearchBox
                                        MinWidth="500"
                                        ShowClearButton="True"
                                        Style="{StaticResource BaseSearchTextBox}"
                                        Text="{Binding PreviewImagePath, Mode=TwoWay}" />
                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <Label
                                        Margin="0,10"
                                        VerticalAlignment="Top"
                                        VerticalContentAlignment="Top"
                                        Content="截图文件夹"
                                        Style="{StaticResource InfoLabel}" />
                                    <chao:SearchBox
                                        MinWidth="500"
                                        ShowClearButton="True"
                                        Style="{StaticResource BaseSearchTextBox}"
                                        Text="{Binding ScreenShotPath, Mode=TwoWay}" />
                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <Label
                                        Margin="0,10"
                                        VerticalAlignment="Top"
                                        VerticalContentAlignment="Top"
                                        Content="演员头像"
                                        Style="{StaticResource InfoLabel}" />
                                    <chao:SearchBox
                                        MinWidth="500"
                                        ShowClearButton="True"
                                        Style="{StaticResource BaseSearchTextBox}"
                                        Text="{Binding ActorImagePath, Mode=TwoWay}" />
                                </StackPanel>

                            </StackPanel>

                        </StackPanel>
                    </Grid>


                </StackPanel>

            </TabItem>
            <TabItem
                Background="Transparent"
                FontSize="15"
                Header="扫描与导入">
                <StackPanel>

                    <StackPanel
                        Margin="5,20,0,5"
                        Orientation="Vertical"
                        Visibility="Collapsed">
                        <CheckBox
                            x:Name="ListenCheckBox"
                            Margin="10,5,10,5"
                            Checked="ListenCheckBox_Checked"
                            Content="监听所有文件改动并更新数据库（不包括C盘）"
                            IsChecked="{Binding ListenAllDir, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        <CheckBox
                            Margin="50,5,10,5"
                            Content="删除文件时从数据库删除"
                            IsChecked="{Binding DelFromDBIfDel, Mode=TwoWay, Source={x:Static p:Settings.Default}}"
                            IsEnabled="{Binding IsChecked, ElementName=ListenCheckBox}" />
                    </StackPanel>





                    <StackPanel
                        Margin="20,5"
                        Orientation="Horizontal"
                        Visibility="Visible">
                        <TextBlock
                            MinWidth="200"
                            Style="{StaticResource BaseTextBlock}"
                            Text="扫描的文件大小"
                            TextAlignment="Left"
                            ToolTip="[0-2000]" />
                        <chao:SearchBox
                            MinWidth="100"
                            ShowClearButton="False"
                            Style="{StaticResource BaseSearchTextBox}"
                            Text="{Binding MinFileSize, Mode=TwoWay}"
                            TextAlignment="Center"
                            ToolTip="[0-2000]" />
                        <TextBlock Style="{StaticResource BaseTextBlock}" Text="MB" />
                    </StackPanel>
                    <StackPanel
                        Margin="20,5"
                        IsEnabled="False"
                        Orientation="Horizontal"
                        Visibility="Visible">
                        <TextBlock
                            MinWidth="200"
                            Style="{StaticResource BaseTextBlock}"
                            Text="视频识别码的正则表达式"
                            TextAlignment="Left"
                            ToolTip="[0-2000]" />
                        <chao:SearchBox
                            MinWidth="400"
                            LostFocus="SetScanRe"
                            PlaceHolder="正则表达式，使用英文分号分割每个正则"
                            PlaceHolderForeground="{DynamicResource Control.Disabled.Background}"
                            Style="{StaticResource BaseSearchTextBox}"
                            Text="{Binding ScanRe, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                        <Border
                            Width="30"
                            Height="30"
                            Margin="10,5"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Panel.ZIndex="20"
                            CornerRadius="5"
                            PreviewMouseLeftButtonUp="ShowScanReHelp"
                            Style="{StaticResource RoundBorder}"
                            Tag="{DynamicResource Window.Title.Hover.Background}">
                            <Viewbox
                                Width="20"
                                Height="auto"
                                VerticalAlignment="Center">
                                <Path
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M563.363941 572.337203c-0.662107-10.635221 5.985569-21.937638 19.948145-33.908274 13.962576-11.964496 29.591164-25.264407 46.879625-39.893592 17.288461-14.628162 33.242474-31.083949 47.872273-49.365314 14.630823-18.286482 22.606806-39.397289 23.936137-63.332421 1.330354-25.932626-1.329331-50.199309-7.977007-72.810283-6.647676-22.604834-17.620026-42.050722-32.910909-58.33971-15.297023-16.290011-35.079386-29.258371-59.347087-38.900985-24.267702-9.636474-52.694294-14.45727-85.274661-14.45727-40.563514 0-74.308452 7.148817-101.239931 21.441335-26.925339 14.293541-48.705279 31.581276-65.326516 51.864228-16.621237 20.276812-28.26081 41.222867-34.908486 62.829977-6.647676 21.60711-9.641996 39.727817-8.974772 54.358025 0.662107 17.282618 6.150328 29.92045 16.455454 37.897122 10.305126 7.976672 21.442235 12.135388 33.413373 12.466939 11.964998 0.331551 22.937348-2.989077 32.910909-9.973142 9.973561-6.984065 14.960341-17.121959 14.960341-30.416753 0-7.982812 2.493902-17.790178 7.480682-29.424146s11.805356-22.771633 20.450609-33.411971c8.643207-10.635221 19.115139-19.615757 31.416819-26.924209 12.30168-7.315616 26.098473-10.971889 41.39038-10.971889 29.921706 0 53.857842 7.480368 71.81455 22.440082 17.950567 14.959713 26.263233 33.742499 24.934925 56.348356 0 11.302417-3.325885 21.772886-9.973561 31.4155-6.652793 9.642614-15.131241 18.948561-25.43739 27.929096-10.304103 8.974395-21.276452 17.949814-32.910909 26.924209-11.639573 8.974395-22.606806 18.286482-32.917049 27.929096-10.304103 9.636474-18.949356 20.111037-25.927574 31.4155-6.984358 11.302417-10.806567 23.603581-11.474814 36.898375l0.998789 37.903262c0 9.973142 4.656239 19.444864 13.962576 28.4254 9.311454 8.975419 21.613134 13.796214 36.906064 14.458293 15.29293-0.662079 27.427804-5.64865 36.403599-14.959713 8.974772-9.30697 13.134686-19.947308 12.467463-31.911804L563.365987 572.337203zM512.496324 817.685098c17.289484 0 31.753501-5.814426 43.387957-17.453511 11.639573-11.633968 17.454243-25.761734 17.454243-42.387389 0-17.287735-5.81467-31.747051-17.454243-43.386136-11.634456-11.633968-26.098473-17.453511-43.387957-17.453511-17.283344 0-31.747361 5.819542-43.381817 17.453511-11.639573 11.639085-17.454243 26.098401-17.454243 43.386136 0 16.625656 5.81467 30.753421 17.454243 42.387389C480.748964 811.870672 495.212981 817.685098 512.496324 817.685098zM511.503676 65.687048c61.834849 0 119.851582 11.799744 174.04099 35.403325 54.194524 23.604604 101.570473 55.522548 142.127847 95.746668 40.56249 40.225143 72.476657 87.433328 95.750687 141.625578 23.27403 54.187133 34.908486 112.201431 34.908486 174.033685 0 61.838394-11.634456 119.6818-34.908486 173.543521-23.27403 53.855582-55.188196 101.063767-95.750687 141.619438-40.557374 40.560788-87.933322 72.473615-142.127847 95.746668-54.189408 23.273053-112.206141 34.907021-174.04099 34.907021-61.840989 0-119.686823-11.633968-173.550806-34.907021-53.857842-23.273053-101.068009-55.18588-141.625382-95.746668-40.56249-40.555671-72.476657-87.763856-95.750687-141.619438C77.302771 632.17708 65.668315 574.333674 65.668315 512.496304c0-61.832254 11.634456-119.846552 34.908486-174.033685 23.27403-54.19225 55.188196-101.400435 95.750687-141.625578 40.557374-40.22412 87.76754-72.142064 141.625382-95.746668C391.816852 77.486792 449.662687 65.687048 511.503676 65.687048z"
                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                            </Viewbox>
                        </Border>
                    </StackPanel>

                    <StackPanel
                        Margin="20,5"
                        Orientation="Horizontal"
                        Visibility="Collapsed">
                        <Label Content="{x:Static lang:Resources.SubsectionSpiltChar}" Style="{StaticResource InfoLabel}" />
                        <hc:TextBox Style="{StaticResource BaseHcTextBox}" Text="{Binding SubSectionFeature, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                    </StackPanel>

                    <CheckBox
                        Margin="25,5"
                        HorizontalAlignment="Left"
                        Content="提取资源的识别码"
                        IsChecked="{Binding FetchVID, Mode=TwoWay}" />


                    <CheckBox
                        Margin="25,5"
                        HorizontalAlignment="Left"
                        Content="{x:Static lang:Resources.ImportNFOWhenScan}"
                        IsChecked="{Binding ScanNfo, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />

                    <CheckBox
                        Margin="25,5"
                        HorizontalAlignment="Left"
                        Content="{x:Static lang:Resources.CopyNFOImage}"
                        IsChecked="{Binding CopyNFOPicture}"
                        Visibility="{Binding ScanNfo, Converter={StaticResource bool2VisibilityConverter}, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />


                    <StackPanel
                        Margin="5,0"
                        Orientation="Vertical"
                        Visibility="{Binding MainWindowVisiblie, Converter={StaticResource bool2VisibilityConverter}}">
                        <StackPanel Margin="10,0,10,10" Orientation="Horizontal">
                            <CheckBox Content="{x:Static lang:Resources.ScanDirWhenStartUp}" IsChecked="{Binding ScanOnStartUp, Mode=TwoWay}" />

                            <TextBlock
                                Margin="50,0,5,0"
                                Style="{StaticResource BaseTextBlock}"
                                Text="切换库" />


                            <ComboBox
                                Name="DatabaseComboBox"
                                Grid.Column="1"
                                Height="30"
                                MinWidth="200"
                                Margin="5"
                                HorizontalAlignment="Stretch"
                                Background="{DynamicResource Window.Side.Background}"
                                BorderBrush="{DynamicResource Window.Side.Hover.Background}"
                                DisplayMemberPath="Name"
                                FontSize="16"
                                Foreground="{DynamicResource Window.Foreground}"
                                ItemContainerStyle="{StaticResource BaseComboBoxItemStyle}"
                                ItemsSource="{Binding DataBases}"
                                SelectedValuePath="DBId"
                                SelectionChanged="DatabaseComboBox_SelectionChanged"
                                Style="{StaticResource NormalComboBox}"
                                Tag="{DynamicResource Window.Side.Hover.Background}"
                                ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}" />



                        </StackPanel>


                        <StackPanel Margin="20,0" Orientation="Vertical">
                            <ListBox
                                x:Name="PathListBox"
                                Height="200"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Top"
                                d:ItemsSource="{d:SampleData ItemCount=5}"
                                AllowDrop="True"
                                DragOver="PathListBox_DragOver"
                                Drop="PathListBox_Drop"
                                ItemsSource="{Binding ScanPath}">
                                <ListBox.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel Orientation="Vertical" />
                                    </ItemsPanelTemplate>
                                </ListBox.ItemsPanel>
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Image
                                                Width="20"
                                                Margin="1"
                                                Source="pack://application:,,,/Resources/Picture/folder.png" />
                                            <TextBlock
                                                Margin="2,0"
                                                VerticalAlignment="Center"
                                                FontSize="15"
                                                Foreground="{DynamicResource Window.Foreground}"
                                                Text="{Binding}" />
                                        </StackPanel>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>

                            <StackPanel
                                Margin="0,10"
                                HorizontalAlignment="Left"
                                Orientation="Horizontal">

                                <Button
                                    Width="27"
                                    Height="27"
                                    Margin="5,0"
                                    Click="AddPath"
                                    Style="{StaticResource RoundTitleButton}">
                                    <Viewbox
                                        Width="20"
                                        Height="20"
                                        VerticalAlignment="Center">
                                        <Path
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Data="M183.232 128c0 0-52.544 0 37.184 0 80.448 0 164.288 0 250.368 0 58.368 0 58.24 128.832 140.864 128.832 50.88 0 228.992 0 228.992 0C906.56 256.832 960 310.272 960 376.128l0 398.656c0 65.856-53.44 119.232-119.296 119.232L183.232 894.016C117.44 894.08 64 840.704 64 774.784L64 247.296C64 181.376 117.44 128 183.232 128z"
                                            Fill="{DynamicResource Window.Foreground}" />
                                    </Viewbox>
                                </Button>

                                <Button
                                    Width="27"
                                    Height="27"
                                    Margin="5,0"
                                    Click="DelPath"
                                    Style="{StaticResource RoundTitleButton}">
                                    <Viewbox
                                        Width="20"
                                        Height="auto"
                                        VerticalAlignment="Center">
                                        <Path
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Data="M827.392 195.584q65.536 65.536 97.792 147.456t32.256 167.936-32.256 167.936-97.792 147.456-147.456 98.304-167.936 32.768-168.448-32.768-147.968-98.304-98.304-147.456-32.768-167.936 32.768-167.936 98.304-147.456 147.968-97.792 168.448-32.256 167.936 32.256 147.456 97.792zM720.896 715.776q21.504-21.504 18.944-49.152t-24.064-49.152l-107.52-107.52 107.52-107.52q21.504-21.504 24.064-49.152t-18.944-49.152-51.712-21.504-51.712 21.504l-107.52 106.496-104.448-104.448q-21.504-20.48-49.152-23.04t-49.152 17.92q-21.504 21.504-21.504 52.224t21.504 52.224l104.448 104.448-104.448 104.448q-21.504 21.504-21.504 51.712t21.504 51.712 49.152 18.944 49.152-24.064l104.448-104.448 107.52 107.52q21.504 21.504 51.712 21.504t51.712-21.504z"
                                            Fill="{DynamicResource Window.Foreground}" />
                                    </Viewbox>
                                </Button>
                                <Button
                                    Width="27"
                                    Height="27"
                                    Margin="5,0"
                                    Click="ClearPath"
                                    Style="{StaticResource RoundCloseButton}">
                                    <Viewbox
                                        Width="20"
                                        Height="auto"
                                        VerticalAlignment="Center">
                                        <Path
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Data="M687.6 96.4H336.4v91.2h351.1V96.4zM636.7 398v405.5h-73.9V398h73.9z m-175.5 0v405.5h-73.9V398h73.9z m332.1-119.2H230.7l27.9 648.8h506.7l28-648.8zM696.8 5.1c40.4 0 73.3 35.6 73.9 79.8v102.7h147.8c20.2 0 36.6 17.8 37 39.9v41.2c0 5.5-4 10-9 10.1h-70.1L848 941.6c-1.8 42.9-33.7 76.6-72.6 77.3H249.8c-39 0-71.3-33.4-73.7-76l-0.1-1.3-28.5-662.7H77.7c-5 0-9.1-4.4-9.2-9.8v-40.9c0-22.2 16.2-40.2 36.3-40.5h148.4V86.2c0-44.3 32.5-80.4 72.7-81.1h370.9z"
                                            Fill="{DynamicResource Window.Foreground}" />
                                    </Viewbox>
                                </Button>
                            </StackPanel>

                        </StackPanel>
                    </StackPanel>


                </StackPanel>


            </TabItem>
            <TabItem
                Background="Transparent"
                FontSize="15"
                Header="插件">
                <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid
                        Name="pluginGrid"
                        Grid.Column="0"
                        Width="300"
                        Height="auto"
                        VerticalAlignment="Stretch">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="auto" />
                            </Grid.ColumnDefinitions>
                            <chao:SearchBox
                                Grid.Column="0"
                                Clear="SearchPlugin"
                                PlaceHolder="搜索插件"
                                PlaceHolderForeground="{DynamicResource RadioButton.Disabled.Background}"
                                Search="SearchPlugin"
                                SearchOnTextChanged="True"
                                ShowSearchButton="True"
                                Style="{StaticResource BaseSearchTextBox}" />
                            <Border
                                Name="pluginSortBorder"
                                Grid.Column="1"
                                MouseUp="ShowContextMenu"
                                Style="{StaticResource ToolsBarBorderStyle}"
                                ToolTip="{x:Static lang:Resources.Sorting}">
                                <Border.ContextMenu>
                                    <ContextMenu HorizontalOffset="-50">
                                        <MenuItem Header="{x:Static lang:Resources.Name}" IsCheckable="True" />
                                        <MenuItem Header="{x:Static lang:Resources.Author}" IsCheckable="True" />
                                        <MenuItem Header="发行日期" IsCheckable="True" />

                                    </ContextMenu>
                                </Border.ContextMenu>
                                <Viewbox Width="auto" Height="18">
                                    <Path
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Data="M44.032 451.584c-22.528 0-40.96 18.432-40.96 40.96v38.912c0 22.528 18.432 40.96 40.96 40.96h519.68c22.528 0 40.96-18.432 40.96-40.96v-38.912c0-22.528-18.432-40.96-40.96-40.96H44.032z m0 302.592c-22.528 0-40.96 18.432-40.96 40.96v38.912c0 22.528 18.432 40.96 40.96 40.96h519.68c22.528 0 40.96-18.432 40.96-40.96v-38.912c0-22.528-18.432-40.96-40.96-40.96H44.032z m519.68-484.352c22.528 0 40.96-18.432 40.96-40.96v-38.912c0-22.528-18.432-40.96-40.96-40.96H44.032c-22.528 0-40.96 18.432-40.96 40.96v38.912c0 22.528 18.432 40.96 40.96 40.96h519.68z m170.496-120.832c-22.528 0-40.96 18.432-40.96 40.96V834.56c0 22.528 18.432 40.96 40.96 40.96h38.912c15.36 0 28.16-8.192 35.328-20.48l212.48-212.48c0-22.528-18.432-40.96-40.96-40.96H814.08V189.952c0-22.528-18.432-40.96-40.96-40.96h-38.912z"
                                        Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                </Viewbox>
                            </Border>
                        </Grid>
                        <StackPanel
                            Grid.Row="1"
                            VerticalAlignment="Top"
                            Orientation="Vertical">

                            <chao:TogglePanel
                                Name="freshPlugin"
                                Header="未安装"
                                Style="{StaticResource TogglePanelStyle}">

                                <ListBox
                                    Name="freshViewListBox"
                                    VerticalAlignment="Stretch"
                                    d:ItemsSource="{d:SampleData ItemCount=3}"
                                    Background="Transparent"
                                    ItemContainerStyle="{StaticResource NormalListBoxItem}"
                                    ItemsSource="{Binding CurrentFreshPlugins}"
                                    MouseLeftButtonUp="freshViewListBox_MouseLeftButtonUp"
                                    ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                    ScrollViewer.VerticalScrollBarVisibility="Auto"
                                    Style="{StaticResource NormalListBox}">
                                    <ListBox.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Vertical" />
                                        </ItemsPanelTemplate>
                                    </ListBox.ItemsPanel>
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="64" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Image
                                                    Grid.Column="0"
                                                    Height="64"
                                                    Margin="5"
                                                    Source="{Binding ImageUrl}" />
                                                <StackPanel
                                                    Grid.Column="1"
                                                    Margin="5,0"
                                                    Orientation="Vertical">
                                                    <TextBlock
                                                        Margin="0"
                                                        Padding="2"
                                                        FontWeight="Bold"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="{Binding Name}"
                                                        TextAlignment="Left" />
                                                    <TextBlock
                                                        Margin="0"
                                                        Padding="2"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="{Binding Description}"
                                                        TextAlignment="Left" />
                                                    <TextBlock
                                                        Margin="0"
                                                        Padding="2"
                                                        FontStyle="Italic"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="{Binding Author}"
                                                        TextAlignment="Left" />
                                                </StackPanel>
                                                <Border
                                                    Grid.Column="1"
                                                    Margin="2"
                                                    Padding="5,2"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Bottom"
                                                    CornerRadius="5">
                                                    <Border.Style>
                                                        <Style TargetType="Border">
                                                            <Setter Property="Visibility" Value="Hidden" />
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Enabled}" Value="false">
                                                                    <Setter Property="Background" Value="Red" />
                                                                    <Setter Property="Visibility" Value="Visible" />
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Border.Style>
                                                    <TextBlock Text="未启用" />
                                                </Border>
                                            </Grid>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>


                            </chao:TogglePanel>
                            <chao:TogglePanel
                                Name="installedPlugin"
                                Header="已安装"
                                Style="{StaticResource TogglePanelStyle}">

                                <ListBox
                                    Name="pluginViewListBox"
                                    VerticalAlignment="Stretch"
                                    d:ItemsSource="{d:SampleData ItemCount=3}"
                                    Background="Transparent"
                                    ItemContainerStyle="{StaticResource NormalListBoxItem}"
                                    ItemsSource="{Binding CurrentInstalledPlugins}"
                                    MouseLeftButtonUp="pluginViewListBox_MouseLeftButtonUp"
                                    ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                    ScrollViewer.VerticalScrollBarVisibility="Auto"
                                    Style="{StaticResource NormalListBox}">
                                    <ListBox.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Vertical" />
                                        </ItemsPanelTemplate>
                                    </ListBox.ItemsPanel>
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="64" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Border
                                                    Grid.Column="0"
                                                    Width="auto"
                                                    Padding="5"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    Panel.ZIndex="5"
                                                    Background="Gold"
                                                    CornerRadius="5"
                                                    Visibility="{Binding HasNewVersion, Converter={StaticResource bool2VisibilityConverter}}">
                                                    <TextBlock
                                                        FontSize="10"
                                                        Foreground="{DynamicResource Window.Background}"
                                                        Text="可升级" />
                                                </Border>
                                                <Image
                                                    Grid.Column="0"
                                                    Height="64"
                                                    Margin="5"
                                                    Source="{Binding Image, Converter={StaticResource Base64ImageConverter}}" />
                                                <StackPanel
                                                    Grid.Column="1"
                                                    Margin="5,0"
                                                    Orientation="Vertical">
                                                    <TextBlock
                                                        Margin="0"
                                                        Padding="2"
                                                        FontWeight="Bold"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="{Binding Name}"
                                                        TextAlignment="Left" />
                                                    <TextBlock
                                                        Margin="0"
                                                        Padding="2"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="{Binding Description}"
                                                        TextAlignment="Left" />
                                                    <TextBlock
                                                        Margin="0"
                                                        Padding="2"
                                                        FontStyle="Italic"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="{Binding Author}"
                                                        TextAlignment="Left" />
                                                </StackPanel>
                                                <Border
                                                    Grid.Column="1"
                                                    Margin="2"
                                                    Padding="5,2"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Bottom"
                                                    CornerRadius="5">
                                                    <Border.Style>
                                                        <Style TargetType="Border">
                                                            <Setter Property="Visibility" Value="Hidden" />
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Enabled}" Value="false">
                                                                    <Setter Property="Background" Value="Red" />
                                                                    <Setter Property="Visibility" Value="Visible" />
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Border.Style>
                                                    <TextBlock Text="未启用" />
                                                </Border>
                                            </Grid>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>


                            </chao:TogglePanel>
                        </StackPanel>


                    </Grid>
                    <Grid
                        x:Name="pluginDetailGrid"
                        Grid.Column="1"
                        Visibility="Collapsed">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="1" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <Grid
                            Grid.Row="0"
                            Margin="50,50"
                            HorizontalAlignment="Left">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="128" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Image Grid.Column="0" Height="128">
                                <Image.Style>
                                    <Style TargetType="Image">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding CurrentPlugin.Installed}" Value="false">
                                                <Setter Property="Source" Value="{Binding CurrentPlugin.ImageUrl}" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding CurrentPlugin.Installed}" Value="true">
                                                <Setter Property="Source" Value="{Binding CurrentPlugin.Image, Converter={StaticResource Base64ImageConverter}}" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Image.Style>
                            </Image>
                            <StackPanel
                                Grid.Column="1"
                                Margin="30,0"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock
                                        Margin="0"
                                        Padding="2"
                                        FontSize="30"
                                        FontWeight="Bold"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{Binding CurrentPlugin.Name}"
                                        TextAlignment="Left" />
                                    <Border
                                        Margin="10,0"
                                        Padding="0"
                                        VerticalAlignment="Top"
                                        Background="{DynamicResource Window.Side.Background}"
                                        CornerRadius="5">
                                        <TextBlock
                                            FontSize="18"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{Binding CurrentPlugin.Version, StringFormat=v{0}}" />
                                    </Border>

                                </StackPanel>
                                <TextBlock
                                    Margin="0"
                                    Padding="2"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="{Binding CurrentPlugin.Description}"
                                    TextAlignment="Left" />
                                <TextBlock
                                    Margin="0"
                                    Padding="2"
                                    FontStyle="Italic"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="{Binding CurrentPlugin.Author, StringFormat=作者：{0}}"
                                    TextAlignment="Left" />
                                <StackPanel
                                    Margin="0,5"
                                    Orientation="Horizontal"
                                    Visibility="{Binding CurrentPlugin.Installed, Converter={StaticResource bool2VisibilityConverter}}">

                                    <chao:Switch
                                        Height="20"
                                        Background="{DynamicResource Window.Title.Background}"
                                        Click="SavePluginEnabled"
                                        IsChecked="{Binding CurrentPlugin.Enabled, Mode=TwoWay}" />
                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="启用" />

                                </StackPanel>
                                <StackPanel Margin="5,10" Orientation="Horizontal">

                                    <StackPanel.Style>
                                        <Style TargetType="StackPanel">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding CurrentPlugin.HasNewVersion}" Value="true">
                                                    <Setter Property="Visibility" Value="Visible" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding CurrentPlugin.Installed}" Value="false">
                                                    <Setter Property="Visibility" Value="Visible" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </StackPanel.Style>
                                    <Button
                                        MinWidth="50"
                                        HorizontalAlignment="Left"
                                        Click="DownloadPlugin"
                                        Content="{x:Static lang:Resources.Get}"
                                        Style="{StaticResource FillButton}" />
                                    <Border
                                        Margin="10,0"
                                        Padding="0"
                                        VerticalAlignment="Top"
                                        Background="{DynamicResource Window.Side.Background}"
                                        CornerRadius="5"
                                        Visibility="{Binding CurrentPlugin.HasNewVersion, Converter={StaticResource bool2VisibilityConverter}}">
                                        <TextBlock
                                            FontSize="18"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{Binding CurrentPlugin.NewVersion, StringFormat=v{0}}" />
                                    </Border>
                                </StackPanel>

                            </StackPanel>
                        </Grid>
                        <GridSplitter
                            Grid.Row="1"
                            Margin="50,0"
                            HorizontalAlignment="Stretch"
                            Panel.ZIndex="10"
                            Background="{DynamicResource Control.Disabled.Background}" />
                        <Grid Grid.Row="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="auto" />
                            </Grid.ColumnDefinitions>
                            <RichTextBox
                                Name="richTextBox"
                                Grid.Column="0"
                                Width="auto"
                                Margin="70,10,0,0"
                                HorizontalAlignment="Center"
                                Background="Transparent"
                                BorderThickness="0"
                                CaretBrush="{StaticResource Window.Foreground}"
                                ContextMenu="{StaticResource CopyContextMenu}"
                                Foreground="{StaticResource Window.Foreground}"
                                IsReadOnly="True"
                                Style="{x:Null}" />
                            <StackPanel
                                Grid.Column="1"
                                Margin="50,10"
                                Orientation="Vertical">
                                <TextBlock
                                    HorizontalAlignment="Left"
                                    FontWeight="Bold"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="网站类型" />
                                <TextBlock
                                    HorizontalAlignment="Left"
                                    FontSize="12"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="{Binding CurrentPlugin.ServerName}" />
                                <TextBlock
                                    HorizontalAlignment="Left"
                                    FontWeight="Bold"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="抓取的信息类型" />
                                <TextBlock
                                    HorizontalAlignment="Left"
                                    FontSize="12"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="{Binding CurrentPlugin.InfoType}" />
                                <TextBlock
                                    HorizontalAlignment="Left"
                                    FontWeight="Bold"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="类别" />
                                <TextBlock
                                    HorizontalAlignment="Left"
                                    FontSize="12"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="{Binding CurrentPlugin.Categories}" />
                                <TextBlock
                                    HorizontalAlignment="Left"
                                    FontWeight="Bold"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="发行日期" />
                                <TextBlock
                                    HorizontalAlignment="Left"
                                    FontSize="12"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="{Binding CurrentPlugin.PublishDate}" />
                            </StackPanel>
                        </Grid>
                    </Grid>








                </Grid>
            </TabItem>
            <TabItem
                Background="Transparent"
                FontSize="15"
                Header="{x:Static lang:Resources.SyncInfo}">
                <StackPanel>

                    <WrapPanel Margin="20,5" Orientation="Horizontal">

                        <CheckBox
                            Margin="0"
                            Content="{x:Static lang:Resources.SaveToNFO}"
                            IsChecked="{Binding SaveInfoToNFO, Mode=TwoWay}" />




                        <!--<StackPanel Orientation="Horizontal" Visibility="{Binding SaveInfoToNFO, Converter={StaticResource BoolToVis}, Mode=OneWay, Source={x:Static p:Settings.Default}}">-->
                        <StackPanel Orientation="Horizontal" Visibility="Visible">
                            <chao:SearchBox
                                Width="380"
                                MinWidth="400"
                                Margin="10,0"
                                Background="{DynamicResource Window.Title.Background}"
                                FontSize="15"
                                PlaceHolder="{x:Static lang:Resources.ToolTip_SameAsVedio}"
                                PlaceHolderForeground="{DynamicResource Control.Disabled.Background}"
                                Style="{StaticResource BaseSearchTextBox}"
                                Text="{Binding NFOSavePath, Mode=TwoWay}" />

                            <Button
                                HorizontalAlignment="Left"
                                Click="SelectNfoPath"
                                Content="{x:Static lang:Resources.ChooseDir}"
                                Style="{StaticResource ButtonStyleFill}" />
                            <CheckBox Content="{x:Static lang:Resources.overwrite}" IsChecked="{Binding OverriteNFO, Mode=TwoWay}" />

                        </StackPanel>




                    </WrapPanel>
                    <WrapPanel Orientation="Horizontal">
                        <CheckBox
                            Margin="20,5"
                            Content="主界面同步时同时下载预览图"
                            IsChecked="{Binding DownloadPreviewImage, Mode=TwoWay}" />
                        <CheckBox
                            Margin="20,5"
                            Content="跳过已下载的图片"
                            IsChecked="{Binding SkipExistImage, Mode=TwoWay}" />
                        <CheckBox
                            Margin="20,5"
                            Content="强制同步信息（不推荐）"
                            IsChecked="{Binding OverrideInfo, Mode=TwoWay}" />
                        <CheckBox
                            Margin="20,5"
                            Content="忽略证书错误（不安全）"
                            IsChecked="{Binding IgnoreCertVal, Mode=TwoWay}"
                            IsEnabled="False" />
                    </WrapPanel>





                    <StackPanel Margin="20,5" Orientation="Horizontal">
                        <TextBlock
                            MinWidth="60"
                            Style="{StaticResource BaseTextBlock}"
                            Text="请求超时"
                            TextAlignment="Left"
                            ToolTip="[0-2000]" />
                        <chao:SearchBox
                            MinWidth="50"
                            Padding="0"
                            ShowClearButton="False"
                            Style="{StaticResource BaseSearchTextBox}"
                            Text="{Binding HttpTimeout, Mode=TwoWay}"
                            TextAlignment="Center" />
                        <TextBlock
                            MinWidth="60"
                            Style="{StaticResource BaseTextBlock}"
                            Text="s"
                            TextAlignment="Left" />
                    </StackPanel>

                    <chao:TogglePanel
                        Margin="10,0"
                        Padding="0,5"
                        FontSize="15"
                        Header="代理设置"
                        IsExpanded="True"
                        LineWidth="0"
                        Style="{StaticResource BaseTogglePanel}">
                        <StackPanel Orientation="Vertical">

                            <StackPanel
                                Name="proxyStackPanel"
                                Margin="10"
                                Orientation="Horizontal">
                                <RadioButton
                                    HorizontalAlignment="Left"
                                    Content="不使用代理"
                                    GroupName="enableProxy"
                                    Style="{StaticResource FlatRadioButton}" />
                                <RadioButton
                                    HorizontalAlignment="Left"
                                    Content="使用系统代理"
                                    GroupName="enableProxy"
                                    IsChecked="True"
                                    Style="{StaticResource FlatRadioButton}" />
                                <RadioButton
                                    x:Name="customProxyRadioButton"
                                    HorizontalAlignment="Left"
                                    Content="自定义代理"
                                    GroupName="enableProxy"
                                    Style="{StaticResource FlatRadioButton}" />

                            </StackPanel>

                            <StackPanel Orientation="Vertical" Visibility="{Binding ElementName=customProxyRadioButton, Path=IsChecked, Converter={StaticResource bool2VisibilityConverter}}">
                                <StackPanel
                                    Name="proxyTypesStackPanel"
                                    Margin="20,5"
                                    Orientation="Horizontal">
                                    <TextBlock
                                        MinWidth="60"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="类型"
                                        TextAlignment="Left"
                                        ToolTip="[0-2000]" />
                                    <RadioButton
                                        Content="HTTP"
                                        GroupName="proxyType"
                                        IsChecked="True"
                                        Style="{StaticResource FlatRadioButton}" />
                                    <RadioButton
                                        Content="SOCKS"
                                        GroupName="proxyType"
                                        Style="{StaticResource FlatRadioButton}" />
                                </StackPanel>
                                <StackPanel
                                    Margin="20,5"
                                    Orientation="Horizontal"
                                    Visibility="Visible">
                                    <TextBlock
                                        MinWidth="60"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="服务器*"
                                        TextAlignment="Left" />
                                    <chao:SearchBox
                                        MinWidth="400"
                                        Style="{StaticResource BaseSearchTextBox}"
                                        Text="{Binding ProxyServer, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />


                                    <TextBlock
                                        MinWidth="60"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="端口*"
                                        TextAlignment="Left" />
                                    <chao:SearchBox
                                        MinWidth="200"
                                        Style="{StaticResource BaseSearchTextBox}"
                                        Text="{Binding ProxyPort, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                </StackPanel>
                                <StackPanel
                                    Margin="20,5"
                                    Orientation="Horizontal"
                                    Visibility="Visible">
                                    <TextBlock
                                        MinWidth="60"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="用户名"
                                        TextAlignment="Left" />
                                    <chao:SearchBox
                                        MinWidth="400"
                                        Style="{StaticResource BaseSearchTextBox}"
                                        Text="{Binding ProxyUserName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />


                                    <TextBlock
                                        MinWidth="60"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="密码"
                                        TextAlignment="Left" />

                                    <PasswordBox
                                        Name="passwordBox"
                                        Height="30"
                                        MinWidth="200"
                                        Margin="10,5"
                                        Padding="5"
                                        VerticalContentAlignment="Center"
                                        Background="{DynamicResource ListBoxItem.Background}"
                                        BorderThickness="0"
                                        ContextMenu="{DynamicResource PasteOnlyContextMenu}"
                                        Foreground="{DynamicResource Window.Foreground}"
                                        PasswordChar="●"
                                        Style="{x:Null}" />
                                    <!--<chao:SearchBox
                                        MinWidth="200"
                                        Style="{StaticResource BaseSearchTextBox}"
                                        Text="{Binding ProxyPwd, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />-->

                                </StackPanel>

                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <fa:ImageAwesome
                                    Grid.Column="0"
                                    Width="20"
                                    Margin="20,4,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center">
                                    <fa:ImageAwesome.Style>
                                        <Style TargetType="fa:ImageAwesome">
                                            <Style.Triggers>

                                                <DataTrigger Binding="{Binding TestProxyStatus, Mode=OneWay}" Value="Canceled">
                                                    <Setter Property="Icon" Value="TimesCircle" />
                                                    <Setter Property="Foreground" Value="Red" />
                                                    <Setter Property="Spin" Value="False" />
                                                </DataTrigger>

                                                <DataTrigger Binding="{Binding TestProxyStatus, Mode=OneWay}" Value="RanToCompletion">
                                                    <Setter Property="Icon" Value="CheckCircle" />
                                                    <Setter Property="Foreground" Value="#20B759" />
                                                    <Setter Property="Spin" Value="False" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding TestProxyStatus, Mode=OneWay}" Value="Running">
                                                    <Setter Property="Icon" Value="Refresh" />
                                                    <Setter Property="Foreground" Value="{DynamicResource Common.Status.Running.Background}" />
                                                    <Setter Property="Spin" Value="True" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </fa:ImageAwesome.Style>

                                </fa:ImageAwesome>
                                <Button
                                    MinWidth="100"
                                    Margin="20,10"
                                    HorizontalAlignment="Left"
                                    Click="TestProxy"
                                    Content="测试" />

                                <TextBlock VerticalAlignment="Center" Text="测试地址" />
                                <chao:SearchBox
                                    Name="textProxyUrl"
                                    MinWidth="200"
                                    Style="{StaticResource BaseSearchTextBox}"
                                    Text="http://www.google.com" />
                            </StackPanel>
                        </StackPanel>
                    </chao:TogglePanel>

                    <chao:TogglePanel
                        Grid.Column="1"
                        Margin="10,0"
                        Padding="0,5"
                        FontSize="16"
                        Header="刮削器列表"
                        IsExpanded="True"
                        LineWidth="0"
                        Style="{StaticResource BaseTogglePanel}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Border
                                Grid.Column="0"
                                MinWidth="100"
                                Padding="0,10"
                                HorizontalAlignment="Left"
                                Background="{DynamicResource Window.Side.Background}"
                                CornerRadius="5">
                                <StackPanel Orientation="Vertical">

                                    <ListBox
                                        Name="serverListBox"
                                        Background="Transparent"
                                        ItemContainerStyle="{StaticResource MyListBoxItemStyle}"
                                        ItemsSource="{Binding Path=DisplayCrawlerServers, Mode=OneWay, NotifyOnSourceUpdated=True}"
                                        ScrollViewer.VerticalScrollBarVisibility="Auto"
                                        SelectionChanged="ListBox_SelectionChanged"
                                        Style="{StaticResource NormalListBox}" />
                                </StackPanel>
                            </Border>

                            <Border
                                Grid.Column="1"
                                MinWidth="100"
                                MaxHeight="300"
                                Margin="20,0"
                                Padding="0,10"
                                HorizontalAlignment="Left"
                                Background="{DynamicResource Window.Side.Background}"
                                CornerRadius="5">
                                <Grid>
                                    <Grid Panel.ZIndex="5" Visibility="{Binding PluginEnabled, Converter={StaticResource BoolToOppositeVisibilityConverter}, FallbackValue=Hidden}">
                                        <Border Background="{DynamicResource Control.Disabled.Background}" Opacity="0.5" />
                                        <TextBlock
                                            HorizontalAlignment="Center"
                                            FontSize="20"
                                            Foreground="Red"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="未启用" />
                                    </Grid>
                                    <StackPanel Orientation="Vertical">

                                        <StackPanel Orientation="Horizontal">
                                            <Border
                                                Width="30"
                                                Height="30"
                                                Margin="5,0"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                Panel.ZIndex="20"
                                                CornerRadius="5"
                                                PreviewMouseLeftButtonUp="ShowCrawlerHelp"
                                                Style="{StaticResource RoundBorder}"
                                                Tag="{DynamicResource Window.Title.Hover.Background}">
                                                <Viewbox
                                                    Width="20"
                                                    Height="auto"
                                                    VerticalAlignment="Center">
                                                    <Path
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Data="M563.363941 572.337203c-0.662107-10.635221 5.985569-21.937638 19.948145-33.908274 13.962576-11.964496 29.591164-25.264407 46.879625-39.893592 17.288461-14.628162 33.242474-31.083949 47.872273-49.365314 14.630823-18.286482 22.606806-39.397289 23.936137-63.332421 1.330354-25.932626-1.329331-50.199309-7.977007-72.810283-6.647676-22.604834-17.620026-42.050722-32.910909-58.33971-15.297023-16.290011-35.079386-29.258371-59.347087-38.900985-24.267702-9.636474-52.694294-14.45727-85.274661-14.45727-40.563514 0-74.308452 7.148817-101.239931 21.441335-26.925339 14.293541-48.705279 31.581276-65.326516 51.864228-16.621237 20.276812-28.26081 41.222867-34.908486 62.829977-6.647676 21.60711-9.641996 39.727817-8.974772 54.358025 0.662107 17.282618 6.150328 29.92045 16.455454 37.897122 10.305126 7.976672 21.442235 12.135388 33.413373 12.466939 11.964998 0.331551 22.937348-2.989077 32.910909-9.973142 9.973561-6.984065 14.960341-17.121959 14.960341-30.416753 0-7.982812 2.493902-17.790178 7.480682-29.424146s11.805356-22.771633 20.450609-33.411971c8.643207-10.635221 19.115139-19.615757 31.416819-26.924209 12.30168-7.315616 26.098473-10.971889 41.39038-10.971889 29.921706 0 53.857842 7.480368 71.81455 22.440082 17.950567 14.959713 26.263233 33.742499 24.934925 56.348356 0 11.302417-3.325885 21.772886-9.973561 31.4155-6.652793 9.642614-15.131241 18.948561-25.43739 27.929096-10.304103 8.974395-21.276452 17.949814-32.910909 26.924209-11.639573 8.974395-22.606806 18.286482-32.917049 27.929096-10.304103 9.636474-18.949356 20.111037-25.927574 31.4155-6.984358 11.302417-10.806567 23.603581-11.474814 36.898375l0.998789 37.903262c0 9.973142 4.656239 19.444864 13.962576 28.4254 9.311454 8.975419 21.613134 13.796214 36.906064 14.458293 15.29293-0.662079 27.427804-5.64865 36.403599-14.959713 8.974772-9.30697 13.134686-19.947308 12.467463-31.911804L563.365987 572.337203zM512.496324 817.685098c17.289484 0 31.753501-5.814426 43.387957-17.453511 11.639573-11.633968 17.454243-25.761734 17.454243-42.387389 0-17.287735-5.81467-31.747051-17.454243-43.386136-11.634456-11.633968-26.098473-17.453511-43.387957-17.453511-17.283344 0-31.747361 5.819542-43.381817 17.453511-11.639573 11.639085-17.454243 26.098401-17.454243 43.386136 0 16.625656 5.81467 30.753421 17.454243 42.387389C480.748964 811.870672 495.212981 817.685098 512.496324 817.685098zM511.503676 65.687048c61.834849 0 119.851582 11.799744 174.04099 35.403325 54.194524 23.604604 101.570473 55.522548 142.127847 95.746668 40.56249 40.225143 72.476657 87.433328 95.750687 141.625578 23.27403 54.187133 34.908486 112.201431 34.908486 174.033685 0 61.838394-11.634456 119.6818-34.908486 173.543521-23.27403 53.855582-55.188196 101.063767-95.750687 141.619438-40.557374 40.560788-87.933322 72.473615-142.127847 95.746668-54.189408 23.273053-112.206141 34.907021-174.04099 34.907021-61.840989 0-119.686823-11.633968-173.550806-34.907021-53.857842-23.273053-101.068009-55.18588-141.625382-95.746668-40.56249-40.555671-72.476657-87.763856-95.750687-141.619438C77.302771 632.17708 65.668315 574.333674 65.668315 512.496304c0-61.832254 11.634456-119.846552 34.908486-174.033685 23.27403-54.19225 55.188196-101.400435 95.750687-141.625578 40.557374-40.22412 87.76754-72.142064 141.625382-95.746668C391.816852 77.486792 449.662687 65.687048 511.503676 65.687048z"
                                                        Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                                </Viewbox>
                                            </Border>
                                            <Button
                                                MinWidth="100"
                                                Margin="10"
                                                HorizontalAlignment="Left"
                                                Click="NewServer"
                                                Content="{x:Static lang:Resources.Add}"
                                                Style="{DynamicResource FillButton}" />
                                        </StackPanel>


                                        <DataGrid
                                            x:Name="ServersDataGrid"
                                            Grid.Column="1"
                                            MinHeight="200"
                                            MaxHeight="220"
                                            Margin="20,5"
                                            chao:DataGrid.RowHeight="50"
                                            CanUserDeleteRows="True"
                                            CanUserResizeColumns="True"
                                            PreviewMouseLeftButtonDown="SetCurrentRowIndex"
                                            Style="{DynamicResource FlatDataGrid}"
                                            VerticalScrollBarVisibility="Auto">


                                            <DataGrid.Columns>
                                                <DataGridTemplateColumn
                                                    Width="auto"
                                                    MinWidth="40"
                                                    Header="{x:Static lang:Resources.Enable}">
                                                    <DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <CheckBox
                                                                HorizontalAlignment="Center"
                                                                IsChecked="{Binding Enabled, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                PreviewMouseUp="SetServerEnable"
                                                                Style="{StaticResource CheckBoxStyle1}" />
                                                        </DataTemplate>
                                                    </DataGridTemplateColumn.CellTemplate>
                                                </DataGridTemplateColumn>

                                                <DataGridTemplateColumn Width="auto" Header="{x:Static lang:Resources.Options}">
                                                    <DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <StackPanel
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"
                                                                Orientation="Horizontal">
                                                                <Button
                                                                    Height="25"
                                                                    MinWidth="50"
                                                                    Margin="5"
                                                                    Padding="0"
                                                                    Click="TestServer"
                                                                    Content="{x:Static lang:Resources.Test}"
                                                                    Cursor="Hand"
                                                                    Style="{StaticResource ButtonPrimary}"
                                                                    Tag="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}}" />
                                                                <Button
                                                                    Height="25"
                                                                    MinWidth="50"
                                                                    Margin="5"
                                                                    Padding="0"
                                                                    Click="DeleteServer"
                                                                    Content="{x:Static lang:Resources.Delete}"
                                                                    Cursor="Hand"
                                                                    Style="{StaticResource ButtonDanger}" />
                                                            </StackPanel>
                                                        </DataTemplate>
                                                    </DataGridTemplateColumn.CellTemplate>
                                                </DataGridTemplateColumn>

                                                <DataGridTemplateColumn Width="auto" Header="{x:Static lang:Resources.Status}">
                                                    <DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <fa:ImageAwesome Height="20">
                                                                <fa:ImageAwesome.Style>
                                                                    <Style TargetType="fa:ImageAwesome">
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding Available, Mode=OneWay}" Value="0" />
                                                                            <DataTrigger Binding="{Binding Available, Mode=OneWay}" Value="-1">
                                                                                <Setter Property="Icon" Value="TimesCircle" />
                                                                                <Setter Property="Foreground" Value="Red" />
                                                                                <Setter Property="Spin" Value="False" />
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding Available, Mode=OneWay}" Value="1">
                                                                                <Setter Property="Icon" Value="CheckCircle" />
                                                                                <Setter Property="Foreground" Value="#20B759" />
                                                                                <Setter Property="Spin" Value="False" />
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding Available, Mode=OneWay}" Value="2">
                                                                                <Setter Property="Icon" Value="Refresh" />
                                                                                <Setter Property="Foreground" Value="{DynamicResource Window.Foreground}" />
                                                                                <Setter Property="Spin" Value="True" />
                                                                            </DataTrigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </fa:ImageAwesome.Style>
                                                            </fa:ImageAwesome>
                                                        </DataTemplate>
                                                    </DataGridTemplateColumn.CellTemplate>
                                                </DataGridTemplateColumn>




                                                <DataGridTemplateColumn Width="auto" Header="{x:Static lang:Resources.Url}">
                                                    <DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <chao:SearchBox
                                                                Name="url"
                                                                Padding="5,0"
                                                                HorizontalAlignment="Stretch"
                                                                Background="Transparent"
                                                                Foreground="{DynamicResource Window.Foreground}"
                                                                PlaceHolder="网址"
                                                                PlaceHolderForeground="{DynamicResource TextBox.PlaceHolder.Foreground}"
                                                                Style="{StaticResource BaseSearchTextBox}"
                                                                Text="{Binding Url, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                        </DataTemplate>
                                                    </DataGridTemplateColumn.CellTemplate>
                                                </DataGridTemplateColumn>


                                                <DataGridTemplateColumn
                                                    Width="150"
                                                    Header="Cookies"
                                                    Visibility="Collapsed">
                                                    <DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <chao:SearchBox
                                                                Name="url"
                                                                Padding="5,0"
                                                                HorizontalAlignment="Stretch"
                                                                Background="Transparent"
                                                                Foreground="{DynamicResource Window.Foreground}"
                                                                IsReadOnly="True"
                                                                PlaceHolder="Cookies"
                                                                PlaceHolderForeground="{DynamicResource TextBox.PlaceHolder.Foreground}"
                                                                PreviewMouseLeftButtonUp="url_PreviewMouseLeftButtonUp"
                                                                Style="{StaticResource BaseSearchTextBox}"
                                                                Text="{Binding Cookies, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                        </DataTemplate>
                                                    </DataGridTemplateColumn.CellTemplate>
                                                </DataGridTemplateColumn>
                                                <DataGridTemplateColumn Width="150" Header="Headers">
                                                    <DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <chao:SearchBox
                                                                Name="url"
                                                                Padding="5,0"
                                                                HorizontalAlignment="Stretch"
                                                                Background="Transparent"
                                                                Foreground="{DynamicResource Window.Foreground}"
                                                                IsReadOnly="True"
                                                                PlaceHolder="Headers"
                                                                PlaceHolderForeground="{DynamicResource TextBox.PlaceHolder.Foreground}"
                                                                PreviewMouseLeftButtonUp="url_PreviewMouseLeftButtonUp_1"
                                                                Style="{StaticResource BaseSearchTextBox}"
                                                                Text="{Binding Headers, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                        </DataTemplate>
                                                    </DataGridTemplateColumn.CellTemplate>
                                                </DataGridTemplateColumn>




                                                <DataGridTextColumn
                                                    Width="auto"
                                                    Binding="{Binding LastRefreshDate, Mode=OneWay}"
                                                    Foreground="{DynamicResource Window.Foreground}"
                                                    Header="{x:Static lang:Resources.LatestUpdateDate}"
                                                    IsReadOnly="True" />

                                            </DataGrid.Columns>

                                            <!--<local:Server  IsEnable="True" Url="https://www.123.cam/" Cookie="123" Available="0" Name="123" LastRefreshDate="2020-09-04" />
                        <local:Server IsEnable="False" Url="https://123.com/"  Cookie="123"  Available="0"  Name="123" LastRefreshDate="2020-10-05" />-->



                                        </DataGrid>

                                        <Popup
                                            x:Name="setHeaderPopup"
                                            Width="800"
                                            Height="300"
                                            AllowsTransparency="True"
                                            HorizontalOffset="0"
                                            Placement="Center"
                                            PlacementTarget="{Binding ElementName=ServersDataGrid}"
                                            PopupAnimation="Fade"
                                            StaysOpen="True"
                                            VerticalOffset="0">
                                            <Grid Margin="5">
                                                <Border
                                                    Margin="5"
                                                    Background="{DynamicResource Menu.Background}"
                                                    CornerRadius="0 0 5 5"
                                                    Effect="{StaticResource PopupDropShadowEffect}" />
                                                <Grid>

                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="auto" />
                                                        <RowDefinition Height="*" />
                                                        <RowDefinition Height="auto" />
                                                    </Grid.RowDefinitions>
                                                    <StackPanel
                                                        Grid.Row="0"
                                                        Margin="20,20,0,0"
                                                        Orientation="Horizontal">
                                                        <TextBlock VerticalAlignment="Center" Text="请复制浏览器中的所有请求头到此" />
                                                        <Button
                                                            Margin="20,0"
                                                            VerticalAlignment="Center"
                                                            Click="ShowHeaderHelp"
                                                            Content="教程" />
                                                    </StackPanel>

                                                    <Grid Grid.Row="1">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="5*" />
                                                            <ColumnDefinition Width="5*" />
                                                        </Grid.ColumnDefinitions>
                                                        <TextBox
                                                            x:Name="inputTextbox"
                                                            Width="auto"
                                                            Height="auto"
                                                            Margin="10"
                                                            Padding="5"
                                                            HorizontalAlignment="Stretch"
                                                            VerticalAlignment="Stretch"
                                                            VerticalContentAlignment="Top"
                                                            AcceptsReturn="True"
                                                            Background="{DynamicResource Window.Title.Background}"
                                                            Foreground="{DynamicResource Window.Foreground}"
                                                            ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                                            ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                            Style="{StaticResource BaseTextBox}"
                                                            Text=""
                                                            TextAlignment="Left"
                                                            TextChanged="InputHeader_TextChanged" />
                                                        <TextBox
                                                            x:Name="parsedTextbox"
                                                            Grid.Column="1"
                                                            Width="auto"
                                                            Height="auto"
                                                            Margin="10"
                                                            Padding="5"
                                                            HorizontalAlignment="Stretch"
                                                            VerticalAlignment="Stretch"
                                                            VerticalContentAlignment="Top"
                                                            AcceptsReturn="True"
                                                            Background="{DynamicResource Window.Title.Background}"
                                                            Foreground="{DynamicResource Window.Foreground}"
                                                            IsReadOnly="True"
                                                            ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                                            ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                            Style="{StaticResource BaseTextBox}"
                                                            Text=""
                                                            TextAlignment="Left" />
                                                    </Grid>

                                                    <StackPanel
                                                        Grid.Row="2"
                                                        Margin="5"
                                                        HorizontalAlignment="Right"
                                                        Orientation="Horizontal">
                                                        <CheckBox
                                                            Click="SetAutoHeader"
                                                            Content="自动识别"
                                                            IsChecked="{Binding AutoHandleHeader, Mode=TwoWay}"
                                                            Visibility="Collapsed" />
                                                        <Button
                                                            Click="CancelHeader"
                                                            Content="取消"
                                                            Style="{StaticResource ButtonDanger}" />
                                                        <Button
                                                            Click="ConfirmHeader"
                                                            Content="确认"
                                                            Style="{StaticResource ButtonPrimary}" />
                                                    </StackPanel>
                                                </Grid>
                                            </Grid>
                                        </Popup>

                                    </StackPanel>
                                </Grid>

                            </Border>


                        </Grid>
                    </chao:TogglePanel>











                    <chao:TogglePanel
                        Margin="10,0"
                        Padding="0,5"
                        FontSize="15"
                        Header="其他"
                        IsExpanded="True"
                        LineWidth="0"
                        Style="{StaticResource BaseTogglePanel}"
                        Visibility="Collapsed">
                        <StackPanel Orientation="Vertical">

                            <StackPanel Margin="10,10" Orientation="Horizontal">

                                <Slider
                                    x:Name="HttpTimeoutSlider"
                                    Width="100"
                                    VerticalAlignment="Center"
                                    Maximum="40"
                                    Minimum="2"
                                    Value="{Binding Timeout_forcestop, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{Binding Value, ElementName=HttpTimeoutSlider}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{x:Static lang:Resources.TimeOut_CloseConnection}" />
                            </StackPanel>

                            <StackPanel Margin="10" Orientation="Horizontal">

                                <Slider
                                    x:Name="RequestTimeoutSlider"
                                    Width="100"
                                    VerticalAlignment="Center"
                                    Maximum="40"
                                    Minimum="2"
                                    Value="{Binding Timeout_http, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{Binding Value, ElementName=RequestTimeoutSlider}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{x:Static lang:Resources.TimeOut_HTTP}" />
                            </StackPanel>

                            <StackPanel Margin="10" Orientation="Horizontal">

                                <Slider
                                    x:Name="TcpTimeoutSlider"
                                    Width="100"
                                    VerticalAlignment="Center"
                                    Maximum="40"
                                    Minimum="2"
                                    Value="{Binding Timeout_tcp, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{Binding Value, ElementName=TcpTimeoutSlider}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{x:Static lang:Resources.TimeOut_TCP}" />
                            </StackPanel>

                            <StackPanel Margin="10" Orientation="Horizontal">

                                <Slider
                                    x:Name="DownloadTimeoutSlider"
                                    Width="100"
                                    VerticalAlignment="Center"
                                    Maximum="40"
                                    Minimum="5"
                                    Value="{Binding Timeout_download, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{Binding Value, ElementName=DownloadTimeoutSlider}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{x:Static lang:Resources.TimeOut_DownloadImage}" />
                            </StackPanel>

                            <StackPanel Margin="10" Orientation="Horizontal">

                                <Slider
                                    x:Name="StreamTimeoutSlider"
                                    Width="100"
                                    VerticalAlignment="Center"
                                    Maximum="40"
                                    Minimum="3"
                                    Value="{Binding Timeout_stream, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{Binding Value, ElementName=StreamTimeoutSlider}" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlockTitle}"
                                    Text="{x:Static lang:Resources.TimeOut_ReadWrite}" />
                            </StackPanel>


                        </StackPanel>
                    </chao:TogglePanel>




                </StackPanel>

            </TabItem>

            <TabItem
                Background="Transparent"
                FontSize="15"
                Header="{x:Static lang:Resources.Show}">
                <StackPanel>

                    <StackPanel
                        Margin="5"
                        HorizontalAlignment="Left"
                        Orientation="Vertical">
                        <WrapPanel Orientation="Horizontal">


                            <CheckBox Content="搜索栏" IsChecked="{Binding DisplaySearchBox, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                            <CheckBox Content="翻页调节栏" IsChecked="{Binding DisplayPage, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                            <CheckBox Content="页码调节下拉菜单" IsChecked="{Binding PaginationCombobox, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                            <CheckBox Content="{x:Static lang:Resources.StatusBar}" IsChecked="{Binding DisplayStatusBar, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                            <CheckBox Content="{x:Static lang:Resources.FunctionBar}" IsChecked="{Binding DisplayFunBar, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                            <CheckBox Content="{x:Static lang:Resources.Navigation}" IsChecked="{Binding DisplayNavigation, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        </WrapPanel>
                        <CheckBox
                            Content="{x:Static lang:Resources.Filter}"
                            IsChecked="{Binding ShowFilter, Mode=TwoWay, Source={x:Static p:Settings.Default}}"
                            IsEnabled="False" />

                        <CheckBox Content="{x:Static lang:Resources.ShowFIlename}" IsChecked="{Binding ShowFileNameIfTitleEmpty, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        <CheckBox Content="发行日期为空显示创建日期" IsChecked="{Binding ShowCreateDateIfReleaseDateEmpty, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        <CheckBox
                            Content="{x:Static lang:Resources.ShowTranslation}"
                            IsChecked="{Binding TitleShowTranslate, Mode=TwoWay, Source={x:Static p:Settings.Default}}"
                            IsEnabled="False" />
                        <CheckBox
                            Content="{x:Static lang:Resources.ShowTranslate2}"
                            IsChecked="{Binding PlotShowTranslate, Mode=TwoWay, Source={x:Static p:Settings.Default}}"
                            IsEnabled="False" />
                    </StackPanel>





                    <TextBlock
                        Style="{StaticResource TextBlockTitle}"
                        Text="按标签戳显示"
                        Visibility="Collapsed" />
                    <WrapPanel
                        Margin="40,5"
                        Orientation="Horizontal"
                        Visibility="Collapsed">
                        <CheckBox
                            Margin="10,5,10,5"
                            VerticalContentAlignment="Center"
                            Content="无标签戳"
                            IsChecked="{Binding DisPlayNoStamp, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        <CheckBox
                            Margin="10,5,10,5"
                            VerticalContentAlignment="Center"
                            Content="中字"
                            IsChecked="{Binding DisPlayCHS, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        <CheckBox
                            Margin="10,5,10,5"
                            VerticalContentAlignment="Center"
                            Content="流出"
                            IsChecked="{Binding DisPlayOutFlow, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        <CheckBox
                            Margin="10,5,10,5"
                            VerticalContentAlignment="Center"
                            Content="高清"
                            IsChecked="{Binding DisPlayHDV, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />



                    </WrapPanel>

                    <TextBlock
                        Margin="10"
                        HorizontalAlignment="Left"
                        Style="{StaticResource TextBlockTitle}"
                        Text="{x:Static lang:Resources.FormEffect}" />
                    <CheckBox
                        Margin="15,5"
                        HorizontalAlignment="Left"
                        Content="{x:Static lang:Resources.FadeInOut}"
                        IsChecked="{Binding EnableWindowFade, Mode=TwoWay, Source={x:Static p:Settings.Default}}"
                        IsEnabled="False" />

                </StackPanel>
            </TabItem>

            <TabItem
                Background="Transparent"
                FontSize="15"
                Header="{x:Static lang:Resources.Theme}">
                <StackPanel>
                    <WrapPanel
                        x:Name="SkinWrapPanel"
                        Margin="20,5"
                        Orientation="Horizontal">
                        <Label Content="{x:Static lang:Resources.Default}" Style="{StaticResource InfoLabel}" />
                        <RadioButton
                            Background="Black"
                            Click="SetSkin"
                            Content="黑色"
                            FocusVisualStyle="{x:Null}"
                            GroupName="SkinRadioButton"
                            Style="{StaticResource ColorRadioButton}" />
                        <RadioButton
                            Background="White"
                            Click="SetSkin"
                            Content="白色"
                            FocusVisualStyle="{x:Null}"
                            GroupName="SkinRadioButton"
                            Style="{StaticResource ColorRadioButton}" />

                    </WrapPanel>



                    <StackPanel Orientation="Horizontal">
                        <TextBlock
                            Margin="25,10"
                            HorizontalAlignment="Left"
                            Style="{StaticResource BaseTextBlock}"
                            Text="更多" />
                        <Button Content="刷新" />
                        <TextBlock
                            Margin="25,10"
                            HorizontalAlignment="Left"
                            FontSize="14"
                            Foreground="{StaticResource Window.Sub.Foreground}"
                            Style="{StaticResource BaseTextBlock}"
                            Text="更新源：github" />
                    </StackPanel>


                    <WrapPanel />



                </StackPanel>
            </TabItem>

            <TabItem
                Background="Transparent"
                FontSize="15"
                Header="代理"
                Visibility="Collapsed">
                <StackPanel />
            </TabItem>

            <TabItem
                Background="Transparent"
                FontSize="15"
                Header="{x:Static lang:Resources.Translate}">
                <StackPanel IsEnabled="False">
                    <StackPanel IsEnabled="True" Orientation="Vertical">
                        <StackPanel Orientation="Horizontal">
                            <CheckBox
                                Margin="20,10"
                                Content="{x:Static lang:Resources.Youdao}"
                                IsChecked="{Binding Enable_TL_YOUDAO, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                            <Button
                                Click="TestTranslate"
                                Content="{x:Static lang:Resources.Test}"
                                Style="{StaticResource ButtonStyleFill}" />
                            <Button
                                Click="LoadTranslate"
                                Content="{x:Static lang:Resources.LoadLocalKey}"
                                Style="{StaticResource ButtonStyleFill}" />
                            <!--  TODO WIN7  -->
                            <fa:ImageAwesome
                                Height="20"
                                Margin="5,0"
                                Foreground="{DynamicResource Window.Foreground}" />
                            <Button
                                Width="auto"
                                HorizontalAlignment="Left"
                                Click="Button_Click_2"
                                Content=" ？"
                                Cursor="Hand"
                                Style="{StaticResource ButtonPrimary}" />
                        </StackPanel>

                        <StackPanel Margin="20,5" Orientation="Horizontal">
                            <Label Content="API Key" Style="{StaticResource InfoLabel}" />
                            <hc:TextBox Style="{StaticResource BaseHcTextBox}" Text="{Binding TL_YOUDAO_APIKEY, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        </StackPanel>
                        <StackPanel Margin="20,5" Orientation="Horizontal">
                            <Label Content="Secret Key" Style="{StaticResource InfoLabel}" />
                            <hc:TextBox Style="{StaticResource BaseHcTextBox}" Text="{Binding TL_YOUDAO_SECRETKEY, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        </StackPanel>

                    </StackPanel>


                    <StackPanel
                        IsEnabled="False"
                        Orientation="Vertical"
                        Visibility="Collapsed">
                        <StackPanel Orientation="Horizontal">
                            <CheckBox
                                Margin="20,10"
                                Content="百度翻译"
                                IsChecked="{Binding Enable_TL_BAIDU, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                            <Button
                                Click="TestTranslate"
                                Content="{x:Static lang:Resources.Test}"
                                Style="{StaticResource ButtonStyleFill}" />
                            <Image
                                Width="32"
                                Height="32"
                                Margin="20,5" />
                        </StackPanel>

                        <StackPanel Margin="20,5" Orientation="Horizontal">
                            <Label Content="API Key" Style="{StaticResource InfoLabel}" />
                            <hc:TextBox Style="{StaticResource BaseHcTextBox}" Text="{Binding TL_BAIDU_APIKEY, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        </StackPanel>
                        <StackPanel Margin="20,5" Orientation="Horizontal">
                            <Label Content="Secret Key" Style="{StaticResource InfoLabel}" />
                            <hc:TextBox Style="{StaticResource BaseHcTextBox}" Text="{Binding TL_BAIDU_SECRETKEY, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        </StackPanel>

                    </StackPanel>



                </StackPanel>
            </TabItem>

            <TabItem
                Background="Transparent"
                FontSize="15"
                Header="{x:Static lang:Resources.AI}">
                <StackPanel IsEnabled="False">
                    <StackPanel IsEnabled="True" Orientation="Vertical">

                        <StackPanel Orientation="Horizontal">
                            <CheckBox
                                Margin="20,10"
                                Content="{x:Static lang:Resources.BaiduFaceRecognition}"
                                IsChecked="{Binding Enable_BaiduAI, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                            <Button
                                Click="TestAI"
                                Content="{x:Static lang:Resources.Test}"
                                Style="{StaticResource ButtonStyleFill}" />
                            <Button
                                Click="LoadAI"
                                Content="{x:Static lang:Resources.LoadLocalKey}"
                                Style="{StaticResource ButtonStyleFill}" />
                            <fa:ImageAwesome
                                Height="20"
                                Margin="5,0"
                                Foreground="{DynamicResource Window.Foreground}" />
                            <Button
                                Click="Button_Click_5"
                                Content=" ？"
                                Cursor="Hand"
                                Style="{StaticResource ButtonPrimary}" />

                        </StackPanel>

                        <StackPanel Margin="20,5" Orientation="Horizontal">
                            <Label Content="API Key" Style="{StaticResource InfoLabel}" />
                            <hc:TextBox Style="{StaticResource BaseHcTextBox}" Text="{Binding Baidu_API_KEY, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        </StackPanel>
                        <StackPanel Margin="20,5" Orientation="Horizontal">
                            <Label Content="Secret Key" Style="{StaticResource InfoLabel}" />
                            <hc:TextBox Style="{StaticResource BaseHcTextBox}" Text="{Binding Baidu_SECRET_KEY, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        </StackPanel>

                    </StackPanel>
                    <CheckBox
                        Margin="20,10"
                        Content="{x:Static lang:Resources.HalfCutOff}"
                        IsChecked="{Binding HalfCutOFf, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />


                </StackPanel>
            </TabItem>

            <TabItem
                Background="Transparent"
                FontSize="15"
                Header="{x:Static lang:Resources.VedioProcessing}">
                <StackPanel>
                    <CheckBox
                        Margin="20,5"
                        HorizontalAlignment="Left"
                        VerticalContentAlignment="Center"
                        Content="{x:Static lang:Resources.ScreenShotToPreviewDir}"
                        IsChecked="{Binding ScreenShotToExtraPicPath, Mode=TwoWay, Source={x:Static p:Settings.Default}}"
                        Visibility="Collapsed" />

                    <StackPanel Margin="10,5" Orientation="Horizontal">
                        <TextBlock
                            MinWidth="150"
                            Margin="2"
                            Style="{StaticResource BaseTextBlock}"
                            Text="{x:Static lang:Resources.FFmpegPath}"
                            TextAlignment="Left" />
                        <chao:SearchBox
                            MinWidth="400"
                            Style="{StaticResource BaseSearchTextBox}"
                            Text="{Binding FFMPEG_Path, Mode=TwoWay}" />


                        <Button
                            Margin="10,5"
                            Click="SetFFMPEGPath"
                            Content="{x:Static lang:Resources.ChooseFile}"
                            Style="{StaticResource ButtonStyleFill}" />


                        <TextBlock
                            Cursor="Hand"
                            Foreground="{DynamicResource Common.HighLight.BorderBrush}"
                            MouseLeftButtonUp="CopyFFmpegUrl"
                            Style="{StaticResource BaseTextBlock}"
                            Text="前往下载"
                            TextDecorations="Underline" />




                    </StackPanel>




                    <WrapPanel Margin="10,10" Orientation="Horizontal">
                        <TextBlock
                            Height="auto"
                            MinWidth="150"
                            Margin="2"
                            Style="{StaticResource BaseTextBlock}"
                            Text="线程数"
                            TextAlignment="Left" />
                        <Slider
                            x:Name="ThreadNumSlider"
                            Width="200"
                            VerticalAlignment="Center"
                            LargeChange="2"
                            Maximum="10"
                            Minimum="1"
                            SmallChange="1"
                            TickFrequency="1"
                            Value="{Binding ScreenShot_ThreadNum, Mode=TwoWay}" />


                        <TextBlock
                            Width="50"
                            Height="auto"
                            Margin="5,2"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Style="{StaticResource BaseTextBlock}"
                            Text="{Binding Value, ElementName=ThreadNumSlider, Mode=OneWay}"
                            TextAlignment="Center" />




                    </WrapPanel>
                    <WrapPanel
                        Margin="10,10"
                        Orientation="Horizontal"
                        Visibility="Collapsed">
                        <TextBlock
                            Height="auto"
                            MinWidth="150"
                            Margin="2"
                            Style="{StaticResource BaseTextBlock}"
                            Text="任务超时"
                            TextAlignment="Left" />
                        <Slider
                            x:Name="ScreenShotTimeoutSlider"
                            Width="200"
                            VerticalAlignment="Center"
                            LargeChange="2"
                            Maximum="60"
                            Minimum="2"
                            SmallChange="1"
                            TickFrequency="1"
                            Value="{Binding ScreenShot_TimeOut, Mode=TwoWay}" />


                        <TextBlock
                            Width="50"
                            Height="auto"
                            Margin="5,2"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Style="{StaticResource BaseTextBlock}"
                            Text="{Binding Value, ElementName=ScreenShotTimeoutSlider, Mode=OneWay}"
                            TextAlignment="Center" />




                    </WrapPanel>



                    <chao:TogglePanel
                        Grid.Column="1"
                        Margin="10,0,0,0"
                        Padding="0,5"
                        FontSize="16"
                        Header="{x:Static lang:Resources.ScreenShot}"
                        IsExpanded="True"
                        LineWidth="0"
                        Style="{StaticResource BaseTogglePanel}">
                        <StackPanel Orientation="Vertical">
                            <CheckBox
                                Margin="10"
                                HorizontalAlignment="Left"
                                Content="若文件夹存在则跳过"
                                IsChecked="{Binding SkipExistScreenShot, Mode=TwoWay}" />

                            <StackPanel Margin="20,5" Orientation="Horizontal">
                                <Slider
                                    x:Name="ScreenshotNumSlider"
                                    Width="200"
                                    VerticalAlignment="Center"
                                    LargeChange="2"
                                    Maximum="30"
                                    Minimum="1"
                                    SmallChange="1"
                                    TickFrequency="1"
                                    Value="{Binding ScreenShotNum, Mode=TwoWay}" />
                                <TextBlock
                                    Width="30"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="{Binding Value, ElementName=ScreenshotNumSlider, Mode=OneWay}" />
                                <TextBlock Style="{StaticResource BaseTextBlock}" Text="{x:Static lang:Resources.ScreenShotNumber}" />

                            </StackPanel>
                            <StackPanel Margin="20,5" Orientation="Horizontal">

                                <Slider
                                    x:Name="ScreenShotIgnoreSlider1"
                                    Width="200"
                                    VerticalAlignment="Center"
                                    LargeChange="2"
                                    Maximum="10"
                                    Minimum="0"
                                    SmallChange="1"
                                    TickFrequency="1"
                                    Value="{Binding ScreenShotIgnoreStart, Mode=TwoWay}" />
                                <TextBlock
                                    Width="30"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="{Binding ElementName=ScreenShotIgnoreSlider1, Mode=OneWay, Path=Value}" />
                                <TextBlock Style="{StaticResource BaseTextBlock}" Text="{x:Static lang:Resources.SkipBegin}" />
                            </StackPanel>
                            <StackPanel Margin="20,5" Orientation="Horizontal">

                                <Slider
                                    x:Name="ScreenShotIgnoreSlider2"
                                    Width="200"
                                    VerticalAlignment="Center"
                                    LargeChange="2"
                                    Maximum="10"
                                    Minimum="0"
                                    SmallChange="1"
                                    TickFrequency="1"
                                    Value="{Binding ScreenShotIgnoreEnd, Mode=TwoWay}" />
                                <TextBlock
                                    Width="30"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="{Binding ElementName=ScreenShotIgnoreSlider2, Mode=OneWay, Path=Value}" />
                                <TextBlock Style="{StaticResource BaseTextBlock}" Text="{x:Static lang:Resources.SkipEnd}" />
                            </StackPanel>
                        </StackPanel>
                    </chao:TogglePanel>

                    <chao:TogglePanel
                        Grid.Column="1"
                        Margin="10,0,0,0"
                        Padding="0,5"
                        FontSize="16"
                        Header="GIF"
                        IsExpanded="True"
                        LineWidth="0"
                        Style="{StaticResource BaseTogglePanel}">
                        <StackPanel Orientation="Vertical">
                            <CheckBox
                                Margin="10"
                                HorizontalAlignment="Left"
                                Content="{x:Static lang:Resources.SkipExistGif}"
                                IsChecked="{Binding SkipExistGif, Mode=TwoWay}" />


                            <WrapPanel
                                Margin="15,5"
                                HorizontalAlignment="Left"
                                Orientation="Horizontal">
                                <Label Content="{x:Static lang:Resources.Resolution}" Style="{StaticResource InfoLabel}" />
                                <Slider
                                    x:Name="GifSlider1"
                                    Width="250"
                                    Margin="5,0"
                                    VerticalAlignment="Center"
                                    Cursor="Hand"
                                    IsSnapToTickEnabled="True"
                                    LargeChange="10"
                                    Maximum="4096"
                                    Minimum="50"
                                    SmallChange="1"
                                    TickFrequency="1"
                                    TickPlacement="None"
                                    Value="{Binding GifWidth, Mode=TwoWay}" />
                                <TextBlock Style="{StaticResource BaseTextBlock}" Text="{Binding Value, ElementName=GifSlider1, StringFormat={}{0} px}" />
                                <Slider
                                    x:Name="GifSlider2"
                                    Width="250"
                                    Margin="5,0"
                                    VerticalAlignment="Center"
                                    Cursor="Hand"
                                    IsEnabled="{Binding GifAutoHeight, Converter={StaticResource OppositeBooleanConverter}}"
                                    IsSnapToTickEnabled="True"
                                    LargeChange="10"
                                    Maximum="2160"
                                    Minimum="50"
                                    SmallChange="1"
                                    TickFrequency="1"
                                    TickPlacement="None"
                                    Value="{Binding GifHeight, Mode=TwoWay}" />
                                <TextBlock Style="{StaticResource BaseTextBlock}" Text="{Binding Value, ElementName=GifSlider2, StringFormat={}{0} px}" />
                                <CheckBox
                                    Margin="20,10"
                                    Content="{x:Static lang:Resources.AutoHeight}"
                                    IsChecked="{Binding GifAutoHeight, Mode=TwoWay}" />


                            </WrapPanel>

                            <WrapPanel
                                Margin="15,5"
                                HorizontalAlignment="Left"
                                Orientation="Horizontal">
                                <Label Content="{x:Static lang:Resources.Duration}" Style="{StaticResource InfoLabel}" />
                                <Slider
                                    x:Name="GifDurationSlider1"
                                    Width="300"
                                    Margin="5,0"
                                    VerticalAlignment="Center"
                                    Cursor="Hand"
                                    IsSnapToTickEnabled="True"
                                    LargeChange="2"
                                    Maximum="20"
                                    Minimum="1"
                                    SmallChange="1"
                                    TickFrequency="1"
                                    TickPlacement="None"
                                    Value="{Binding GifDuration, Mode=TwoWay}" />
                                <TextBlock Style="{StaticResource BaseTextBlock}" Text="{Binding Value, ElementName=GifDurationSlider1, StringFormat={}{0} s}" />
                            </WrapPanel>
                        </StackPanel>
                    </chao:TogglePanel>



                </StackPanel>
            </TabItem>

            <TabItem
                Background="Transparent"
                FontSize="15"
                Header="{x:Static lang:Resources.CustomAppearance}">
                <StackPanel>
                    <WrapPanel
                        Margin="20,5"
                        HorizontalAlignment="Left"
                        Orientation="Horizontal">
                        <CheckBox Content="{x:Static lang:Resources.ID}" IsChecked="{Binding DisplayID, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        <CheckBox Content="{x:Static lang:Resources.Title}" IsChecked="{Binding DisplayTitle, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        <CheckBox Content="{x:Static lang:Resources.Date}" IsChecked="{Binding DisplayDate, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        <CheckBox Content="{x:Static lang:Resources.Stamp}" IsChecked="{Binding DisplayStamp, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        <CheckBox Content="{x:Static lang:Resources.Favorites}" IsChecked="{Binding DisplayFavorites, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                    </WrapPanel>

                    <WrapPanel
                        Margin="20,5"
                        HorizontalAlignment="Left"
                        Orientation="Horizontal">
                        <Label Content="{x:Static lang:Resources.MovieOpacity}" Style="{StaticResource InfoLabel}" />
                        <Slider
                            Width="200"
                            Margin="5,0"
                            VerticalAlignment="Center"
                            Cursor="Hand"
                            IsSnapToTickEnabled="True"
                            LargeChange="0.1"
                            Maximum="1"
                            Minimum="0"
                            SmallChange="0.05"
                            TickFrequency="0.05"
                            TickPlacement="None"
                            Value="{Binding MovieOpacity, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        <Label Content="{Binding MovieOpacity, Mode=OneWay, Source={x:Static p:Settings.Default}, Converter={StaticResource RoundNumberConverter}, ConverterParameter=2}" Style="{StaticResource InfoLabel}" />

                    </WrapPanel>


                    <StackPanel
                        Margin="20,5"
                        IsEnabled="False"
                        Orientation="Horizontal">
                        <CheckBox
                            Click="CheckBox_Click"
                            Content="{x:Static lang:Resources.BackgroundImage}"
                            IsChecked="{Binding EnableBgImage, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        <!--<Label Content="{x:Static lang:Resources.BackgroundImage}" Style="{StaticResource InfoLabel}"  />-->

                        <hc:TextBox Style="{StaticResource BaseHcTextBox}" Text="{Binding BackgroundImage, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                        <Button
                            Click="SetBackgroundImage"
                            Content="{x:Static lang:Resources.Choose}"
                            Style="{StaticResource ButtonStyleFill}" />

                    </StackPanel>
                </StackPanel>

            </TabItem>
            <TabItem
                Background="Transparent"
                FontSize="15"
                Header="{x:Static lang:Resources.Rename}">
                <StackPanel>

                    <CheckBox
                        Margin="20,5"
                        HorizontalAlignment="Left"
                        Click="AddToRename"
                        Content="去除标题两边的空格"
                        IsChecked="{Binding Path=RemoveTitleSpace, Mode=TwoWay}" />
                    <CheckBox
                        Margin="20,5"
                        HorizontalAlignment="Left"
                        Click="AddToRename"
                        Content="{x:Static lang:Resources.AutoAddStamp}"
                        IsChecked="{Binding Path=AddRenameTag, Mode=TwoWay}"
                        IsEnabled="False" />




                    <WrapPanel Margin="10,0">
                        <!--{'\\','#','%', '&', '*', '|', ':', '"', ' <', '>', '?', '/','.' }-->
                        <StackPanel Margin="10,5" Orientation="Horizontal">
                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="信息分隔符" />
                            <ComboBox
                                x:Name="OutComboBox"
                                Height="30"
                                MinWidth="100"
                                Margin="10"
                                HorizontalAlignment="Left"
                                Background="{DynamicResource Window.Side.Background}"
                                BorderBrush="{DynamicResource Window.Side.Hover.Background}"
                                FontSize="16"
                                Foreground="{DynamicResource Window.Foreground}"
                                ItemContainerStyle="{StaticResource BaseComboBoxItemStyle}"
                                SelectionChanged="OutComboBox_SelectionChanged"
                                Style="{StaticResource NormalComboBox}"
                                Tag="{DynamicResource Window.Side.Hover.Background}"
                                ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}">
                                <ComboBoxItem Content="[null]" />
                                <ComboBoxItem Content="_" />
                                <ComboBoxItem Content="-" />
                                <ComboBoxItem Content="$" />
                                <ComboBoxItem Content="%" />
                                <ComboBoxItem Content="^" />
                                <ComboBoxItem Content="@" />
                                <ComboBoxItem Content="+" />
                                <ComboBoxItem Content="," />
                            </ComboBox>
                        </StackPanel>


                        <StackPanel Margin="10,5" Orientation="Horizontal">
                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="标签/类别/演员等分隔符" />
                            <ComboBox
                                x:Name="InComboBox"
                                Height="30"
                                MinWidth="100"
                                Margin="10"
                                HorizontalAlignment="Left"
                                Background="{DynamicResource Window.Side.Background}"
                                BorderBrush="{DynamicResource Window.Side.Hover.Background}"
                                FontSize="16"
                                Foreground="{DynamicResource Window.Foreground}"
                                ItemContainerStyle="{StaticResource BaseComboBoxItemStyle}"
                                SelectionChanged="InComboBox_SelectionChanged"
                                Style="{StaticResource NormalComboBox}"
                                Tag="{DynamicResource Window.Side.Hover.Background}"
                                ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}">
                                <ComboBoxItem Content="[null]" />
                                <ComboBoxItem Content="_" />
                                <ComboBoxItem Content="-" />
                                <ComboBoxItem Content="$" />
                                <ComboBoxItem Content="%" />
                                <ComboBoxItem Content="^" />
                                <ComboBoxItem Content="@" />
                                <ComboBoxItem Content="+" />
                                <ComboBoxItem Content="," />
                            </ComboBox>
                        </StackPanel>
                    </WrapPanel>

                    <WrapPanel
                        x:Name="CheckedBoxWrapPanel"
                        Margin="10"
                        Orientation="Horizontal">
                        <ToggleButton
                            Width="100"
                            Margin="5"
                            Padding="5"
                            Content="{x:Static lang:Resources.ID}"
                            Style="{StaticResource FlatToggleButtonStyle}" />
                        <ToggleButton
                            Width="100"
                            Margin="5"
                            Padding="5"
                            Content="{x:Static lang:Resources.Title}"
                            Style="{StaticResource FlatToggleButtonStyle}" />

                        <ToggleButton
                            Width="100"
                            Margin="5"
                            Padding="5"
                            Content="{x:Static lang:Resources.VideoType}"
                            Style="{StaticResource FlatToggleButtonStyle}" />

                        <ToggleButton
                            Width="100"
                            Margin="5"
                            Padding="5"
                            Content="{x:Static lang:Resources.Year}"
                            Style="{StaticResource FlatToggleButtonStyle}" />
                        <ToggleButton
                            Width="100"
                            Margin="5"
                            Padding="5"
                            Content="{x:Static lang:Resources.Duration}"
                            Style="{StaticResource FlatToggleButtonStyle}" />
                        <ToggleButton
                            Width="100"
                            Margin="5"
                            Padding="5"
                            Content="{x:Static lang:Resources.Country}"
                            Style="{StaticResource FlatToggleButtonStyle}" />
                        <ToggleButton
                            Width="100"
                            Margin="5"
                            Padding="5"
                            Content="{x:Static lang:Resources.Director}"
                            Style="{StaticResource FlatToggleButtonStyle}" />
                        <ToggleButton
                            Width="100"
                            Margin="5"
                            Padding="5"
                            Content="{x:Static lang:Resources.Tag}"
                            Style="{StaticResource FlatToggleButtonStyle}" />
                        <ToggleButton
                            Width="100"
                            Margin="5"
                            Padding="5"
                            Content="{x:Static lang:Resources.Genre}"
                            Style="{StaticResource FlatToggleButtonStyle}" />
                        <ToggleButton
                            Width="100"
                            Margin="5"
                            Padding="5"
                            Content="{x:Static lang:Resources.Label}"
                            Style="{StaticResource FlatToggleButtonStyle}" />
                        <ToggleButton
                            Width="100"
                            Margin="5"
                            Padding="5"
                            Content="{x:Static lang:Resources.Actor}"
                            Style="{StaticResource FlatToggleButtonStyle}" />
                        <ToggleButton
                            Width="100"
                            Margin="5"
                            Padding="5"
                            Content="{x:Static lang:Resources.Studio}"
                            Style="{StaticResource FlatToggleButtonStyle}" />
                        <ToggleButton
                            Width="100"
                            Margin="5"
                            Padding="5"
                            Content="{x:Static lang:Resources.Rating}"
                            Style="{StaticResource FlatToggleButtonStyle}" />

                        <ToggleButton
                            MinWidth="155"
                            Margin="5"
                            Padding="5"
                            Content="{x:Static lang:Resources.ReleaseDate}"
                            Style="{StaticResource FlatToggleButtonStyle}" />

                    </WrapPanel>



                    <Border
                        Margin="10"
                        Background="{DynamicResource Window.Side.Background}"
                        CornerRadius="5">
                        <StackPanel Orientation="Vertical">

                            <Grid Margin="10,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="auto" />
                                </Grid.ColumnDefinitions>
                                <TextBlock
                                    Grid.Column="0"
                                    MinWidth="100"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="{x:Static lang:Resources.RenameRule}"
                                    TextAlignment="Left" />

                                <TextBox
                                    Grid.Column="1"
                                    Width="auto"
                                    Margin="10,0"
                                    Padding="10,5"
                                    HorizontalAlignment="Stretch"
                                    Background="{DynamicResource Window.Title.Background}"
                                    CaretBrush="{DynamicResource Window.Foreground}"
                                    ContextMenu="{x:Null}"
                                    FontSize="18"
                                    Foreground="{DynamicResource Window.Foreground}"
                                    IsReadOnly="False"
                                    PreviewKeyDown="hotkeyTextBox_PreviewKeyDown"
                                    PreviewKeyUp="hotkeyTextBox_PreviewKeyUp"
                                    Style="{StaticResource BaseHcTextBox}"
                                    Text="{Binding FormatString, Mode=TwoWay}"
                                    TextAlignment="Left"
                                    TextChanged="TextBox_TextChanged"
                                    TextWrapping="Wrap" />

                                <Border
                                    Grid.Column="2"
                                    Width="30"
                                    Height="30"
                                    Margin="5,0"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    Panel.ZIndex="20"
                                    CornerRadius="5"
                                    PreviewMouseLeftButtonUp="ShowRenameHelp"
                                    Style="{StaticResource RoundBorder}"
                                    Tag="{DynamicResource Window.Title.Hover.Background}">
                                    <Viewbox
                                        Width="20"
                                        Height="auto"
                                        VerticalAlignment="Center">
                                        <Path
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Data="M563.363941 572.337203c-0.662107-10.635221 5.985569-21.937638 19.948145-33.908274 13.962576-11.964496 29.591164-25.264407 46.879625-39.893592 17.288461-14.628162 33.242474-31.083949 47.872273-49.365314 14.630823-18.286482 22.606806-39.397289 23.936137-63.332421 1.330354-25.932626-1.329331-50.199309-7.977007-72.810283-6.647676-22.604834-17.620026-42.050722-32.910909-58.33971-15.297023-16.290011-35.079386-29.258371-59.347087-38.900985-24.267702-9.636474-52.694294-14.45727-85.274661-14.45727-40.563514 0-74.308452 7.148817-101.239931 21.441335-26.925339 14.293541-48.705279 31.581276-65.326516 51.864228-16.621237 20.276812-28.26081 41.222867-34.908486 62.829977-6.647676 21.60711-9.641996 39.727817-8.974772 54.358025 0.662107 17.282618 6.150328 29.92045 16.455454 37.897122 10.305126 7.976672 21.442235 12.135388 33.413373 12.466939 11.964998 0.331551 22.937348-2.989077 32.910909-9.973142 9.973561-6.984065 14.960341-17.121959 14.960341-30.416753 0-7.982812 2.493902-17.790178 7.480682-29.424146s11.805356-22.771633 20.450609-33.411971c8.643207-10.635221 19.115139-19.615757 31.416819-26.924209 12.30168-7.315616 26.098473-10.971889 41.39038-10.971889 29.921706 0 53.857842 7.480368 71.81455 22.440082 17.950567 14.959713 26.263233 33.742499 24.934925 56.348356 0 11.302417-3.325885 21.772886-9.973561 31.4155-6.652793 9.642614-15.131241 18.948561-25.43739 27.929096-10.304103 8.974395-21.276452 17.949814-32.910909 26.924209-11.639573 8.974395-22.606806 18.286482-32.917049 27.929096-10.304103 9.636474-18.949356 20.111037-25.927574 31.4155-6.984358 11.302417-10.806567 23.603581-11.474814 36.898375l0.998789 37.903262c0 9.973142 4.656239 19.444864 13.962576 28.4254 9.311454 8.975419 21.613134 13.796214 36.906064 14.458293 15.29293-0.662079 27.427804-5.64865 36.403599-14.959713 8.974772-9.30697 13.134686-19.947308 12.467463-31.911804L563.365987 572.337203zM512.496324 817.685098c17.289484 0 31.753501-5.814426 43.387957-17.453511 11.639573-11.633968 17.454243-25.761734 17.454243-42.387389 0-17.287735-5.81467-31.747051-17.454243-43.386136-11.634456-11.633968-26.098473-17.453511-43.387957-17.453511-17.283344 0-31.747361 5.819542-43.381817 17.453511-11.639573 11.639085-17.454243 26.098401-17.454243 43.386136 0 16.625656 5.81467 30.753421 17.454243 42.387389C480.748964 811.870672 495.212981 817.685098 512.496324 817.685098zM511.503676 65.687048c61.834849 0 119.851582 11.799744 174.04099 35.403325 54.194524 23.604604 101.570473 55.522548 142.127847 95.746668 40.56249 40.225143 72.476657 87.433328 95.750687 141.625578 23.27403 54.187133 34.908486 112.201431 34.908486 174.033685 0 61.838394-11.634456 119.6818-34.908486 173.543521-23.27403 53.855582-55.188196 101.063767-95.750687 141.619438-40.557374 40.560788-87.933322 72.473615-142.127847 95.746668-54.189408 23.273053-112.206141 34.907021-174.04099 34.907021-61.840989 0-119.686823-11.633968-173.550806-34.907021-53.857842-23.273053-101.068009-55.18588-141.625382-95.746668-40.56249-40.555671-72.476657-87.763856-95.750687-141.619438C77.302771 632.17708 65.668315 574.333674 65.668315 512.496304c0-61.832254 11.634456-119.846552 34.908486-174.033685 23.27403-54.19225 55.188196-101.400435 95.750687-141.625578 40.557374-40.22412 87.76754-72.142064 141.625382-95.746668C391.816852 77.486792 449.662687 65.687048 511.503676 65.687048z"
                                            Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                                    </Viewbox>
                                </Border>

                            </Grid>




                            <Grid Margin="10,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock
                                    Grid.Column="0"
                                    MinWidth="100"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="{x:Static lang:Resources.RenamePreview}"
                                    TextAlignment="Left" />
                                <TextBlock
                                    Grid.Column="1"
                                    Width="auto"
                                    Margin="10,0"
                                    Padding="10,5"
                                    HorizontalAlignment="Stretch"
                                    Background="{DynamicResource Window.Title.Background}"
                                    FontSize="18"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="{Binding ViewRenameFormat}"
                                    TextAlignment="Left"
                                    TextWrapping="Wrap" />
                            </Grid>
                        </StackPanel>
                    </Border>





                </StackPanel>
            </TabItem>

            <TabItem
                Background="Transparent"
                FontSize="15"
                Header="库">
                <StackPanel Orientation="Vertical">
                    <StackPanel Orientation="Horizontal">
                        <CheckBox
                            HorizontalAlignment="Left"
                            Content="自动备份库"
                            IsChecked="{Binding AutoBackup, Mode=TwoWay}" />
                        <TextBlock
                            Margin="20,0,0,0"
                            Style="{StaticResource BaseTextBlock}"
                            Text="备份周期（天）" />
                        <ComboBox
                            Grid.Column="1"
                            Height="30"
                            MinWidth="200"
                            Margin="5"
                            HorizontalAlignment="Stretch"
                            Background="{DynamicResource Window.Side.Background}"
                            BorderBrush="{DynamicResource Window.Side.Hover.Background}"
                            FontSize="16"
                            Foreground="{DynamicResource Window.Foreground}"
                            ItemContainerStyle="{StaticResource BaseComboBoxItemStyle}"
                            SelectedIndex="{Binding AutoBackupPeriodIndex}"
                            Style="{StaticResource NormalComboBox}"
                            Tag="{DynamicResource Window.Side.Hover.Background}"
                            ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}">
                            <ComboBoxItem Content="1" />
                            <ComboBoxItem Content="3" />
                            <ComboBoxItem Content="7" />
                            <ComboBoxItem Content="15" />
                            <ComboBoxItem Content="30" />
                        </ComboBox>
                    </StackPanel>

                    <CheckBox
                        HorizontalAlignment="Left"
                        Content="扫描后自动建立播放索引"
                        IsChecked="{Binding AutoCreatePlayableIndex, Mode=TwoWay}" />

                    <Border
                        Margin="10"
                        Padding="10"
                        Background="{DynamicResource Window.Title.Background}"
                        CornerRadius="5">
                        <StackPanel HorizontalAlignment="Left" Orientation="Vertical">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock
                                    HorizontalAlignment="Left"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="索引" />
                                <hc:LoadingCircle
                                    Height="20"
                                    DotDiameter="3"
                                    Foreground="{DynamicResource Window.Foreground}"
                                    Visibility="{Binding IndexCreating, Converter={StaticResource bool2VisibilityConverter}}" />
                                <Button
                                    Click="CancelCreateIndex"
                                    Content="取消"
                                    Style="{StaticResource ButtonDanger}"
                                    Visibility="{Binding IndexCreating, Converter={StaticResource bool2VisibilityConverter}}" />

                                <ProgressBar
                                    Name="indexCreatingProgressBar"
                                    Width="300"
                                    Height="10"
                                    Maximum="100"
                                    Style="{StaticResource ProgressBarFlat}"
                                    Visibility="{Binding IndexCreating, Converter={StaticResource bool2VisibilityConverter}}" />

                            </StackPanel>

                            <Button
                                MinWidth="200"
                                HorizontalAlignment="Left"
                                Click="CreatePlayableIndex"
                                Content="建立资源存在索引"
                                IsEnabled="{Binding IndexCreating, Converter={StaticResource OppositeBooleanConverter}}"
                                Style="{StaticResource ButtonPrimary}" />







                            <Button
                                MinWidth="200"
                                HorizontalAlignment="Left"
                                Click="CreatePictureIndex"
                                Content="建立视频资源的图片索引"
                                IsEnabled="{Binding IndexCreating, Converter={StaticResource OppositeBooleanConverter}}"
                                Style="{StaticResource ButtonPrimary}" />


                        </StackPanel>
                    </Border>

                </StackPanel>
            </TabItem>
            <TabItem
                Background="Transparent"
                FontSize="15"
                Header="网络">
                <StackPanel Orientation="Vertical">

                    <StackPanel Orientation="Horizontal">
                        <CheckBox Content="开启端口监听（未来实现）" IsChecked="{Binding ListenEnabled, Mode=TwoWay}" />

                        <chao:SearchBox
                            Width="100"
                            Foreground="{DynamicResource Window.Foreground}"
                            PlaceHolder="端口号"
                            PlaceHolderForeground="{DynamicResource Window.Sub.Foreground}"
                            Style="{StaticResource BaseSearchTextBox}"
                            Text="{Binding ListenPort, Mode=TwoWay}"
                            Visibility="{Binding ListenEnabled, Mode=OneWay, Converter={StaticResource bool2VisibilityConverter}}" />
                    </StackPanel>

                </StackPanel>
            </TabItem>
        </TabControl>

        <Grid Grid.Row="1" Background="{DynamicResource Window.Title.Background}">


            <Button
                Margin="915,5,0,5"
                HorizontalAlignment="Left"
                VerticalAlignment="Stretch"
                Click="SaveSettings"
                Content="{x:Static lang:Resources.Save}"
                Style="{StaticResource ButtonStyleFill}" />
        </Grid>

    </Grid>
</chao:BaseWindow>
