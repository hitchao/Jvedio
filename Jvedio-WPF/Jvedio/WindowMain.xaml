<chao:BaseWindow
    x:Class="Jvedio.Main"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:chao="https://gitee.com/secret/chao-controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:fa="http://schemas.fontawesome.io/icons/"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:lang="clr-namespace:Jvedio.Language;assembly=Jvedio.Language"
    xmlns:local="clr-namespace:Jvedio"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:p="clr-namespace:Jvedio.Properties"
    xmlns:usercontrol="clr-namespace:Jvedio.Style.UserControls;assembly=Jvedio.Style"
    Title="Jvedio"
    Width="1100"
    Height="600"
    MinWidth="1100"
    MinHeight="500"
    Background="{DynamicResource BackgroundMain}"
    CanMinimized="True"
    CanResize="True"
    Closed="Window_Closed"
    Closing="Window_Closing"
    ContentRendered="Window_ContentRendered"
    Deactivated="Window_Deactivated"
    Foreground="{DynamicResource ForegroundGlobal}"
    Icon="pack://application:,,,/Resources/Jvedio.ico"
    PreviewKeyDown="Window_PreviewKeyDown"
    PreviewKeyUp="Window_PreviewKeyUp"
    SizeChanged="Window_SizeChanged"
    TitleAlign="Left"
    TitleHeight="0"
    TitleMargin="5 0"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">



    <chao:BaseWindow.Resources>

        <!--  高清、中字、流出  -->
        <local:TagStampsConverter x:Key="TagStampsConverter" />
        <local:MovieStampTypeToVisibilityConverter x:Key="MovieStampTypeToVisibilityConverter" />

        <!--  ContextMenu  -->
        <ContextMenu
            x:Key="SettingsContextMenu"
            Width="auto"
            Margin="10,5"
            Panel.ZIndex="7"
            HorizontalOffset="-45"
            VerticalOffset="-5">
            <MenuItem Click="OpenSet_MouseDown" Header="{x:Static lang:Resources.Settings}" />
            <MenuItem Click="OpenTools" Header="{x:Static lang:Resources.Tools}" />
            <MenuItem Click="OpenDataBase" Header="{x:Static lang:Resources.MovieManagement}" />
            <MenuItem Click="OpenBatching" Header="{x:Static lang:Resources.BatchProcessing}" />
            <MenuItem
                Click="MenuItem_Click"
                Header="{x:Static lang:Resources.EasyMode}"
                IsCheckable="True"
                IsChecked="{Binding EasyMode, Source={x:Static p:Settings.Default}, Mode=TwoWay}" />
            <MenuItem
                Click="ManageImage"
                Header="{x:Static lang:Resources.ManageImage}"
                Visibility="Collapsed" />

            <MenuItem Header="Jvedio">
                <MenuItem Click="ShowAbout" Header="{x:Static lang:Resources.About}" />
                <MenuItem Click="OpenHelp" Header="{x:Static lang:Resources.Help}" />
                <MenuItem Click="OpenFeedBack" Header="{x:Static lang:Resources.FeedBack}" />
                <MenuItem Click="OpenJvedioWebPage" Header="{x:Static lang:Resources.WebSite}" />
                <MenuItem Click="ShowThanks" Header="{x:Static lang:Resources.Thanks}" />
            </MenuItem>
            <MenuItem Header="{x:Static lang:Resources.OpenPath}">
                <MenuItem Click="OpenLogPath" Header="{x:Static lang:Resources.Log}" />
                <MenuItem Click="OpenImageSavePath" Header="{x:Static lang:Resources.Picture}" />
                <MenuItem Click="OpenApplicationPath" Header="{x:Static lang:Resources.SoftWare}" />
            </MenuItem>
            <MenuItem
                Header="{x:Static lang:Resources.ScreenShot}"
                PreviewMouseLeftButtonUp="ScreenShot"
                Visibility="Collapsed" />
            <MenuItem Click="CheckUpgrade" Header="{x:Static lang:Resources.Upgrade}" />

        </ContextMenu>



        <Style x:Key="HoverSpliter" TargetType="GridSplitter">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Margin" Value="0" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard FillBehavior="HoldEnd">
                                <ColorAnimation
                                    Storyboard.TargetProperty="Background.Color"
                                    To="#007FD4"
                                    Duration="0:0:0.2" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation
                                    Storyboard.TargetProperty="Background.Color"
                                    To="Transparent"
                                    Duration="0:0:0.2" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style
            x:Key="ActorInfoTextBlock"
            BasedOn="{StaticResource BaseTextBlock}"
            TargetType="{x:Type TextBlock}">
            <Setter Property="Margin" Value="10,10" />
        </Style>



        <Style
            x:Key="ActorTextBox"
            BasedOn="{StaticResource ReadOnlyWrapTextBox}"
            TargetType="{x:Type TextBox}">
            <Setter Property="Width" Value="100" />
            <Setter Property="TextAlignment" Value="Left" />
            <Setter Property="FontSize" Value="15" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="ContextMenu" Value="{StaticResource TextBoxContextMenu}" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding EnableEditActress}" Value="True">
                    <Setter Property="Background" Value="{DynamicResource BackgroundSide}" />
                    <Setter Property="IsReadOnly" Value="False" />
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <Style
            x:Key="MenuButton"
            BasedOn="{StaticResource HoverButton}"
            TargetType="{x:Type Button}">
            <Setter Property="Height" Value="40" />
        </Style>

        <Style x:Key="ViewImage" TargetType="{x:Type Image}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}" Value="0">
                    <Setter Property="Source" Value="{Binding smallimage, Mode=OneWay}" />
                    <Setter Property="Width" Value="{Binding SmallImage_Width, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                    <Setter Property="Height" Value="{Binding SmallImage_Height, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                </DataTrigger>

                <DataTrigger Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}" Value="1">
                    <Setter Property="Source" Value="{Binding bigimage, Mode=OneWay}" />
                    <Setter Property="Width" Value="{Binding BigImage_Width, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                    <Setter Property="Height" Value="{Binding BigImage_Height, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <Style
            x:Key="CenterTextBlock"
            BasedOn="{StaticResource BaseTextBlock}"
            TargetType="{x:Type TextBlock}">
            <Setter Property="Padding" Value="5" />
            <Setter Property="Margin" Value="5" />
            <Setter Property="TextAlignment" Value="Center" />
            <Setter Property="FontSize" Value="20" />
        </Style>


        <Style
            x:Key="ActorBorder"
            BasedOn="{StaticResource SimpleBorder}"
            TargetType="{x:Type Border}">
            <Style.Triggers>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding ActorEditMode, Mode=OneWay, Source={x:Static p:Settings.Default}}" Value="True" />
                        <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Mode=Self}}" Value="True" />
                    </MultiDataTrigger.Conditions>
                    <Setter Property="BorderBrush" Value="{DynamicResource Selected_BorderBrush}" />
                </MultiDataTrigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="HoverCanvas" TargetType="{x:Type Canvas}">
            <Setter Property="Visibility" Value="Hidden" />
            <Style.Triggers>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}" Value="False" />
                        <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType={x:Type Grid}, Mode=FindAncestor}}" Value="True" />
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Visibility" Value="Visible" />
                </MultiDataTrigger>
                <DataTrigger Binding="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}" Value="True">
                    <Setter Property="Visibility" Value="Hidden" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </chao:BaseWindow.Resources>


    <Grid AllowDrop="True">

        <!--  消息提示框  -->
        <ScrollViewer
            Width="auto"
            Height="auto"
            Margin="10,120,30,80"
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom"
            Panel.ZIndex="6"
            Background="Transparent"
            VerticalScrollBarVisibility="Hidden">
            <StackPanel
                Margin="0,10,10,10"
                VerticalAlignment="Bottom"
                hc:Growl.GrowlParent="True"
                hc:Growl.Token="Main" />
        </ScrollViewer>

        <!--  托盘图标  -->
        <hc:NotifyIcon
            Click="ShowMainWindow"
            Icon="/Jvedio;component/Resources/Jvedio.ico"
            IsBlink="False"
            Text="Jvedio"
            Visibility="{Binding HideToIcon, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Hidden}">
            <hc:NotifyIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Click="ShowMainWindow" Header="{x:Static lang:Resources.OpenJvedio}" />
                    <MenuItem Click="Notify_Close" Header="{x:Static lang:Resources.Exit}" />
                </ContextMenu>
            </hc:NotifyIcon.ContextMenu>
        </hc:NotifyIcon>

        <TextBox
            Name="FocusTextBox"
            Width="10"
            Height="20"
            Margin="-20"
            HorizontalAlignment="Left"
            Panel.ZIndex="-1"
            Foreground="White"
            Text=""
            Visibility="Visible" />


        <!--  显示 ffmpeg 结果  -->
        <Grid Panel.ZIndex="5" Visibility="{Binding CmdVisibility, FallbackValue=hidden}">
            <TextBox
                Width="auto"
                Height="auto"
                Margin="50,100"
                Padding="10"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Background="{DynamicResource BackgroundMenu}"
                ContextMenu="{StaticResource TextBoxContextMenu}"
                DockPanel.Dock="Top"
                Foreground="{DynamicResource ForegroundSearch}"
                Opacity="0.8"
                Text="{Binding CmdText}"
                TextChanged="CmdTextChanged"
                TextWrapping="WrapWithOverflow" />
            <Border
                Width="27"
                Height="27"
                Margin="20,100"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                CornerRadius="3"
                MouseLeftButtonUp="Border_MouseLeftButtonUp"
                Style="{StaticResource CloseBorderStyle}">
                <Image
                    Width="20"
                    Height="20"
                    Source="{Binding Themes, Mode=OneWay, ConverterParameter=close, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
            </Border>
        </Grid>


        <!--  背景  -->
        <Image
            x:Name="BgImage"
            Margin="0"
            Source="{Binding BackgroundImage}"
            Stretch="UniformToFill" />

        <Grid Margin="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="30" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Border
                x:Name="TitleBorder"
                Grid.Row="0"
                Background="{DynamicResource Window.Title.Background}"
                BorderThickness="0"
                MouseMove="MoveWindow"
                PreviewMouseLeftButtonDown="TopBorder_MouseLeftButtonUp">
                <Grid Panel.ZIndex="50">


                    <StackPanel
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Orientation="Horizontal">
                        <Image
                            Height="20"
                            Margin="10,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Source="/Resources/Picture/Jvedio.png" />
                        <Image
                            Height="20"
                            Margin="0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Source="Resources/Picture/Title.png"
                            ToolTip="Jvedio" />
                    </StackPanel>

                    <StackPanel
                        Name="TitleStackPanel"
                        Grid.Column="1"
                        Height="30"
                        HorizontalAlignment="Right"
                        Orientation="Horizontal">
                        <Button
                            Width="40"
                            Background="{DynamicResource Window.Title.Background}"
                            Click="MinWindow"
                            Style="{StaticResource NormalButton}"
                            Tag="{DynamicResource Window.Title.Hover.Background}">
                            <Viewbox
                                Width="12"
                                Height="auto"
                                VerticalAlignment="Center">
                                <Path
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M512 0h6144c307.2 0 512 204.8 512 512s-204.8 512-512 512H512c-307.2 0-512-204.8-512-512s204.8-512 512-512z"
                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                            </Viewbox>
                        </Button>
                        <Button
                            Name="ButtonMax"
                            Width="40"
                            Background="{DynamicResource Window.Title.Background}"
                            Click="OnMaxWindow"
                            Style="{StaticResource NormalButton}"
                            Tag="{DynamicResource Window.Title.Hover.Background}">
                            <Viewbox
                                Width="12"
                                Height="auto"
                                VerticalAlignment="Center">
                                <Path
                                    x:Name="MaxPath"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M834.688 1024H189.312A189.568 189.568 0 0 1 0 834.688V189.312A189.568 189.568 0 0 1 189.312 0h645.376A189.568 189.568 0 0 1 1024 189.312v645.376A189.482667 189.482667 0 0 1 834.688 1024zM189.312 99.712a89.6 89.6 0 0 0-89.6 89.6v645.376a89.6 89.6 0 0 0 89.6 89.6h645.376a89.6 89.6 0 0 0 89.6-89.6V189.312a89.6 89.6 0 0 0-89.6-89.6z"
                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                            </Viewbox>
                        </Button>
                        <Button
                            Name="ButtonClose"
                            Width="40"
                            Background="{DynamicResource Window.Title.Background}"
                            Click="CloseWindow"
                            Style="{StaticResource NormalButton}"
                            Tag="{DynamicResource Window.Title.Close.Hover.Background}">
                            <Viewbox
                                Width="12"
                                Height="auto"
                                VerticalAlignment="Center">
                                <Path
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M610.218667 505.6l398.08-387.413333a49.664 49.664 0 0 0 0-71.338667l-2.133334-2.133333a52.992 52.992 0 0 0-73.301333 0L534.784 432.64 136.704 44.373333a52.992 52.992 0 0 0-73.386667 0L61.269333 46.592a48.810667 48.810667 0 0 0 0 71.338667l398.165334 387.669333-398.165334 387.498667a49.664 49.664 0 0 0 0 71.253333l2.218667 2.133333c20.48 19.626667 52.821333 19.626667 73.301333 0l398.08-387.413333 398.08 387.413333c20.48 19.626667 52.906667 19.626667 73.386667 0l2.048-2.133333a49.664 49.664 0 0 0 0-71.253333l-398.08-387.413334z"
                                    Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                            </Viewbox>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <Grid Grid.Row="1">


                <usercontrol:WaitingPanel
                    Panel.ZIndex="5"
                    Cancel="WaitingPanel_Cancel"
                    NoticeText="{x:Static lang:Resources.Wait}"
                    ShowCancelButton="Visible"
                    ShowProgressBar="Collapsed"
                    Visibility="{Binding IsScanning, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Hidden}" />

                <usercontrol:WaitingPanel
                    x:Name="LoadSearchWaitingPanel"
                    Panel.ZIndex="5"
                    Cancel="CancelLoadActor"
                    NoticeText="{x:Static lang:Resources.Wait}"
                    ShowCancelButton="Visible"
                    ShowProgressBar="Visible"
                    Visibility="Hidden" />



                <!--  主界面  -->

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition
                            Width="{Binding SideGridWidth, Source={x:Static p:Settings.Default}, FallbackValue=200, Mode=OneWay}"
                            MinWidth="50"
                            MaxWidth="500" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <!--  侧边栏  -->
                    <Border
                        x:Name="SideBorder"
                        Grid.Column="0"
                        Background="{DynamicResource BackgroundSide}"
                        IsEnabled="{Binding IsLoadingMovie, Converter={StaticResource OppositeBooleanConverter}}">
                        <Grid SizeChanged="Grid_SizeChanged">

                            <Grid.RowDefinitions>
                                <RowDefinition Height="40" />
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="40" />
                            </Grid.RowDefinitions>

                            <ComboBox
                                Grid.Column="0"
                                Height="30"
                                MinWidth="150"
                                Margin="5"
                                HorizontalAlignment="Stretch"
                                FontSize="16"
                                ItemsSource="{Binding DataBases}"
                                SelectedIndex="{Binding DatabaseSelectedIndex, FallbackValue=0}"
                                SelectionChanged="DatabaseComboBox_SelectionChanged"
                                Style="{StaticResource SideComboBoxStyle}"
                                ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}" />
                            <StackPanel
                                Grid.Row="1"
                                Height="auto"
                                Margin="0,10,0,0"
                                VerticalAlignment="Stretch">

                                <chao:PathRadioButton
                                    Name="AllRadioButton"
                                    Command="{Binding ResetCommand}"
                                    MainText="{x:Static lang:Resources.AllVideo}"
                                    Path="M63.465962 793.139052c0 55.038524 44.620243 99.708909 99.709933 99.708909l697.969529 0c55.04057 0 99.709933-44.669362 99.709933-99.708909L960.855356 194.878432c0-55.089689-44.669362-99.709933-99.709933-99.709933L163.174871 95.1685c-55.089689 0-99.709933 44.620243-99.709933 99.709933L63.464939 793.139052zM761.435491 494.00823 362.59576 743.283574 362.59576 244.732887 761.435491 494.00823z"
                                    Style="{StaticResource BasePathRadioButton}"
                                    SubText="{Binding AllVedioCount}" />
                                <chao:PathRadioButton
                                    Command="{Binding FavoritesCommand}"
                                    MainText="{x:Static lang:Resources.Favorites}"
                                    Path="M335.008 916.629333c-35.914667 22.314667-82.88 10.773333-104.693333-25.557333a77.333333 77.333333 0 0 1-8.96-57.429333l46.485333-198.24a13.141333 13.141333 0 0 0-4.021333-12.864l-152.16-132.586667c-31.605333-27.52-35.253333-75.648-8.234667-107.733333a75.68 75.68 0 0 1 51.733333-26.752L354.848 339.2c4.352-0.362667 8.245333-3.232 10.026667-7.594667l76.938666-188.170666c16.032-39.2 60.618667-57.92 99.52-41.461334a76.309333 76.309333 0 0 1 40.832 41.461334l76.938667 188.16c1.781333 4.373333 5.674667 7.253333 10.026667 7.605333l199.712 16.277333c41.877333 3.413333 72.885333 40.458667 69.568 82.517334a76.938667 76.938667 0 0 1-26.08 51.978666l-152.16 132.586667c-3.541333 3.082667-5.141333 8.074667-4.021334 12.853333l46.485334 198.24c9.621333 41.013333-15.36 82.336-56.138667 92.224a75.285333 75.285333 0 0 1-57.525333-9.237333l-170.976-106.24a11.296 11.296 0 0 0-12.010667 0l-170.986667 106.24z"
                                    Style="{StaticResource BasePathRadioButton}"
                                    SubText="{Binding FavoriteVedioCount}" />
                                <chao:PathRadioButton
                                    Command="{Binding RecentCommand}"
                                    MainText="{x:Static lang:Resources.RecentCreate}"
                                    Path="M506.88 88.669091c-231.330909 0-418.909091 187.578182-418.909091 418.909091s187.578182 418.909091 418.909091 418.909091 418.909091-187.578182 418.909091-418.909091-187.578182-418.909091-418.909091-418.909091z m178.036364 661.178182c-8.843636 8.378182-20.247273 12.567273-31.650909 12.567272-12.567273 0-24.901818-4.887273-33.978182-14.894545l-177.338182-190.836364V299.52c0-25.6 20.945455-46.545455 46.545454-46.545455s46.545455 20.945455 46.545455 46.545455v220.625455l152.436364 163.84c17.221818 18.850909 16.290909 48.407273-2.56 65.861818z"
                                    Style="{StaticResource BasePathRadioButton}"
                                    SubText="{Binding RecentVedioCount}" />
                                <chao:PathRadioButton
                                    Command="{Binding RecentWatchCommand}"
                                    MainText="{x:Static lang:Resources.RecentPlay}"
                                    Path="M514.941447 890.533617c75.021176-0.60418 145.170347-21.660501 204.945616-58.36123l65.26431 98.08286a509.889473 509.889473 0 0 1-270.209926 77.026541C235.59169 1007.281788 9.306945 783.413764 9.306945 507.791926 9.306945 232.170089 235.59169 8.302065 514.941447 8.302065c279.966793 0 506.868572 223.868024 506.868572 499.489861 0 7.828632 0 15.040229-0.617035 22.868861l-118.933503-1.20836c0.60418-7.211597 0.60418-13.831869 0.60418-21.056321 0-211.231661-173.823912-382.150366-387.922214-382.150365-214.085448 0-387.318034 171.522885-387.318034 382.150365s173.232586 382.137511 387.318034 382.137511z m444.046693-194.378891L820.528049 514.219374h276.303147L958.975285 696.154726zM696.09265 529.452427c-4.884861 9.641172-14.654582 19.860815-24.411449 29.489133l-176.883377 101.707941c-34.15546 19.256635-78.671967 9.628318-98.198555-24.077221-4.884861-9.628318-9.756867-24.064366-10.965226-33.692684V394.051801c1.20836-38.51327 30.491815-72.822989 75.008321-72.822989 14.654582 0 24.398594 4.820586 34.15546 9.641173l176.883377 101.695086c34.168315 19.256635 44.529362 63.194672 24.398594 96.887356z"
                                    Style="{StaticResource BasePathRadioButton}"
                                    SubText="{Binding RecentWatchedCount}">
                                    <chao:PathRadioButton.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Click="ClearRecentWatched" Header="{x:Static lang:Resources.Clear}" />
                                        </ContextMenu>
                                    </chao:PathRadioButton.ContextMenu>
                                </chao:PathRadioButton>
                                <chao:PathRadioButton
                                    Click="ShowClassifyGrid"
                                    Command="{Binding RecentWatchCommand}"
                                    MainText="{x:Static lang:Resources.AutoClassification}"
                                    Path="M928.687158 816.316632l64.053895 56.966736-53.733053 60.416-55.457684-49.313684a202.105263 202.105263 0 1 1 45.136842-68.042105zM134.736842 134.736842v242.526316h242.526316V134.736842H134.736842zM53.894737 53.894737h404.210526v404.210526H53.894737V53.894737z m80.842105 565.894737v242.526315h242.526316v-242.526315H134.736842z m-80.842105-80.842106h404.210526v404.210527H53.894737V538.947368zM619.789474 134.736842v242.526316h242.526315V134.736842h-242.526315z m-80.842106-80.842105h404.210527v404.210526H538.947368V53.894737z m202.105264 808.421052a121.263158 121.263158 0 1 0 0-242.526315 121.263158 121.263158 0 0 0 0 242.526315z"
                                    Style="{StaticResource BasePathRadioButton}"
                                    SubText="" />
                            </StackPanel>

                            <!--  我的清单  -->
                            <StackPanel Grid.Row="2" Visibility="{Binding ShowList, Source={x:Static p:Settings.Default}, Converter={StaticResource bool2VisibilityConverter}, Mode=OneWay}">
                                <Rectangle
                                    Height="2"
                                    Margin="2,0"
                                    HorizontalAlignment="Stretch"
                                    Fill="{DynamicResource ForegroundGlobal}"
                                    RadiusX="1"
                                    RadiusY="1" />

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="auto" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock
                                        Grid.Column="0"
                                        Margin="20,5"
                                        HorizontalAlignment="Left"
                                        Foreground="{DynamicResource ForegroundGlobal}"
                                        Style="{StaticResource BaseTextBlock}"
                                        Text="{x:Static lang:Resources.MyList}" />
                                    <ToggleButton
                                        Name="HideListToggleButton"
                                        Grid.Column="1"
                                        Margin="5,0"
                                        Padding="0"
                                        HorizontalAlignment="Right"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Click="HideListScrollViewer"
                                        Content="{x:Static lang:Resources.Hide}"
                                        Foreground="{DynamicResource ForegroundGlobal}" />
                                    <Button
                                        Grid.Column="2"
                                        HorizontalAlignment="Right"
                                        Click="AddListItem"
                                        Style="{StaticResource TitleButton}">
                                        <Image
                                            Width="15"
                                            Height="15"
                                            Source="{Binding Themes, Mode=OneWay, ConverterParameter=add, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                    </Button>

                                </Grid>

                                <ScrollViewer Visibility="{Binding ElementName=HideListToggleButton, Path=IsChecked, Converter={StaticResource BoolToOppositeVisibilityConverter}, FallbackValue=Visible}">
                                    <!--<ScrollViewer Visibility="Visible">-->

                                    <ItemsControl
                                        x:Name="ListItemsControl"
                                        Background="Transparent"
                                        ScrollViewer.VerticalScrollBarVisibility="Disabled">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>

                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel Name="ListStackPanel">
                                                    <Grid>
                                                        <RadioButton
                                                            Padding="20,0"
                                                            Click="ShowSameList"
                                                            Content="{Binding Name}"
                                                            FocusVisualStyle="{x:Null}"
                                                            Style="{StaticResource SideRadioButtonStyle}">
                                                            <RadioButton.ContextMenu>
                                                                <ContextMenu>
                                                                    <MenuItem Click="EditListItem" Header="{x:Static lang:Resources.Rename}" />
                                                                    <MenuItem Click="RemoveListItem" Header="{x:Static lang:Resources.Delete}" />
                                                                </ContextMenu>
                                                            </RadioButton.ContextMenu>
                                                        </RadioButton>
                                                        <TextBlock
                                                            Margin="10,0"
                                                            HorizontalAlignment="Right"
                                                            VerticalAlignment="Center"
                                                            Foreground="{DynamicResource ForegroundGlobal}"
                                                            Style="{StaticResource BaseTextBlock}"
                                                            Text="{Binding Number}" />
                                                    </Grid>

                                                </StackPanel>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>




                            </StackPanel>



                            <!--  筛选器  -->
                            <StackPanel
                                x:Name="ExpanderStackPanel"
                                Grid.Row="3"
                                Width="auto"
                                Margin="5"
                                Visibility="{Binding ShowFilter, Source={x:Static p:Settings.Default}, Converter={StaticResource bool2VisibilityConverter}, Mode=OneWay, FallbackValue=Hidden}">
                                <Expander
                                    Margin="0,5,0,0"
                                    Background="{DynamicResource BackgroundTitle}"
                                    BorderThickness="0"
                                    Foreground="{DynamicResource ForegroundGlobal}"
                                    Header="{x:Static lang:Resources.ReleaseYear}">
                                    <Border
                                        Background="{DynamicResource BackgroundMain}"
                                        BorderThickness="0"
                                        CornerRadius="0,0,4,4">
                                        <ScrollViewer MaxHeight="200">


                                            <ItemsControl x:Name="SideFilterYear">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>

                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <CheckBox
                                                            Name="CheckBox"
                                                            HorizontalAlignment="Left"
                                                            Click="FilterSide"
                                                            Content="{Binding}" />
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </ScrollViewer>
                                    </Border>

                                </Expander>
                                <Expander
                                    Margin="0,5,0,0"
                                    Background="{DynamicResource BackgroundTitle}"
                                    BorderThickness="0"
                                    Foreground="{DynamicResource ForegroundGlobal}"
                                    Header="{x:Static lang:Resources.FileSize}">
                                    <Border
                                        Background="{DynamicResource BackgroundMain}"
                                        BorderThickness="0"
                                        CornerRadius="0,0,4,4">
                                        <ItemsControl x:Name="SideFilterFileSize">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <StackPanel />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <CheckBox
                                                        Name="CheckBox"
                                                        HorizontalAlignment="Left"
                                                        Click="FilterSide"
                                                        Content="{Binding}" />
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </Border>

                                </Expander>
                                <Expander
                                    Margin="0,5,0,0"
                                    Background="{DynamicResource BackgroundTitle}"
                                    BorderThickness="0"
                                    Foreground="{DynamicResource ForegroundGlobal}"
                                    Header="{x:Static lang:Resources.VedioDuration}">
                                    <Border
                                        Background="{DynamicResource BackgroundMain}"
                                        BorderThickness="0"
                                        CornerRadius="0,0,4,4">
                                        <ItemsControl x:Name="SideFilterRuntime">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <StackPanel />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <CheckBox
                                                        Name="CheckBox"
                                                        HorizontalAlignment="Left"
                                                        Click="FilterSide"
                                                        Content="{Binding}" />
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </Border>
                                </Expander>
                                <Expander
                                    Margin="0,5,0,0"
                                    Background="{DynamicResource BackgroundTitle}"
                                    BorderThickness="0"
                                    Foreground="{DynamicResource ForegroundGlobal}"
                                    Header="{x:Static lang:Resources.MovieRating}">
                                    <Border
                                        Background="{DynamicResource BackgroundMain}"
                                        BorderThickness="0"
                                        CornerRadius="0,0,4,4">
                                        <ItemsControl x:Name="SideFilterRating">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <StackPanel />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <CheckBox
                                                        Name="CheckBox"
                                                        HorizontalAlignment="Left"
                                                        Click="FilterSide"
                                                        Content="{Binding}" />
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </Border>
                                </Expander>
                                <Expander
                                    Margin="0,5,0,0"
                                    Background="{DynamicResource BackgroundTitle}"
                                    BorderThickness="0"
                                    Foreground="{DynamicResource ForegroundGlobal}"
                                    Header="{x:Static lang:Resources.MovieLabels}">
                                    <Border
                                        Background="{DynamicResource BackgroundMain}"
                                        BorderThickness="0"
                                        CornerRadius="0,0,4,4">
                                        <ScrollViewer MaxHeight="200">
                                            <ItemsControl x:Name="SideFilterLabel">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <CheckBox
                                                            Name="CheckBox"
                                                            HorizontalAlignment="Left"
                                                            Click="FilterSide"
                                                            Content="{Binding}" />
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </ScrollViewer>
                                    </Border>
                                </Expander>

                            </StackPanel>




                            <Grid
                                Grid.Row="4"
                                Margin="0,0,10,5"
                                VerticalAlignment="Bottom"
                                Cursor="Hand">
                                <Image
                                    Height="20"
                                    Margin="20,0"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    Source="Resources/Picture/Title.png"
                                    ToolTip="Jvedio" />
                                <Border
                                    x:Name="SettingsBorder"
                                    Grid.Column="1"
                                    Width="27"
                                    Height="27"
                                    Margin="5,0"
                                    HorizontalAlignment="Right"
                                    ContextMenu="{StaticResource SettingsContextMenu}"
                                    CornerRadius="3"
                                    MouseUp="ShowSettingsPopup"
                                    Style="{StaticResource BorderStyle}"
                                    ToolTip="{x:Static lang:Resources.Settings}">
                                    <Image Margin="4" Source="{Binding Themes, Mode=OneWay, ConverterParameter=menu, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                </Border>
                            </Grid>

                        </Grid>
                    </Border>

                    <!--  左右调节  -->
                    <GridSplitter
                        Grid.Column="0"
                        Width="5"
                        Panel.ZIndex="10"
                        Style="{StaticResource HoverSpliter}" />

                    <TabControl
                        Grid.Column="1"
                        Background="Transparent"
                        FocusVisualStyle="{x:Null}"
                        SelectedIndex="{Binding TabSelectedIndex, FallbackValue=0}"
                        Style="{DynamicResource HeaderHideTabControlStyle}"
                        Visibility="Hidden">
                        <TabItem Background="Transparent">
                            <!--  影片  -->
                            <Grid>

                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="auto" />
                                </Grid.RowDefinitions>


                                <!--  工具栏  -->
                                <Grid
                                    Grid.Row="0"
                                    Panel.ZIndex="4"
                                    Background="Transparent"
                                    IsEnabled="{Binding IsLoadingMovie, Converter={StaticResource OppositeBooleanConverter}}"
                                    MouseLeftButtonDown="ToolsGrid_MouseLeftButtonDown"
                                    Visibility="{Binding DisplayFunBar, Converter={StaticResource BoolToVis}, Mode=TwoWay, Source={x:Static p:Settings.Default}}">

                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="auto" />
                                        <RowDefinition Height="auto" />
                                    </Grid.RowDefinitions>




                                    <Grid Grid.Row="0">

                                        <!--  搜索  -->
                                        <StackPanel Orientation="Horizontal">

                                            <Button
                                                x:Name="BackBtn"
                                                Margin="10,0"
                                                Click="BackTo"
                                                Content="返回"
                                                Style="{StaticResource ButtonStyleFill}"
                                                Visibility="Collapsed" />

                                            <Grid
                                                Width="300"
                                                Height="40"
                                                Margin="10,5"
                                                HorizontalAlignment="Left"
                                                Focusable="True">
                                                <Border
                                                    Background="Transparent"
                                                    BorderBrush="{DynamicResource BackgroundSide}"
                                                    BorderThickness="2"
                                                    CornerRadius="2" />


                                                <Grid
                                                    Width="25"
                                                    Margin="10,0,0,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Center"
                                                    Panel.ZIndex="3"
                                                    Cursor="Hand"
                                                    MouseUp="ShowSearchMenu">
                                                    <Image
                                                        Width="20"
                                                        Height="20"
                                                        RenderTransformOrigin=".5,.5"
                                                        Source="{Binding Themes, Mode=OneWay, ConverterParameter=up, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}">
                                                        <Image.RenderTransform>
                                                            <RotateTransform Angle="180" />
                                                        </Image.RenderTransform>
                                                    </Image>
                                                    <Popup
                                                        x:Name="SearchOptionPopup"
                                                        AllowsTransparency="True"
                                                        HorizontalOffset="-15"
                                                        IsOpen="False"
                                                        Placement="Bottom"
                                                        PopupAnimation="Fade"
                                                        StaysOpen="False"
                                                        VerticalOffset="5">
                                                        <Grid Margin="5">
                                                            <Border
                                                                Margin="5"
                                                                Background="{DynamicResource BackgroundMenu}"
                                                                CornerRadius="5"
                                                                Effect="{StaticResource PopupDropShadowEffect}" />
                                                            <StackPanel Margin="5">
                                                                <RadioButton
                                                                    Click="SaveAllSearchType"
                                                                    Content="{x:Static lang:Resources.ID}"
                                                                    FocusVisualStyle="{x:Null}"
                                                                    GroupName="SearchTypeRadioButton"
                                                                    IsChecked="True"
                                                                    Style="{StaticResource RadioButtonStyle}"
                                                                    Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                                <RadioButton
                                                                    Click="SaveAllSearchType"
                                                                    Content="{x:Static lang:Resources.Title}"
                                                                    FocusVisualStyle="{x:Null}"
                                                                    GroupName="SearchTypeRadioButton"
                                                                    Style="{StaticResource RadioButtonStyle}"
                                                                    Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                                <RadioButton
                                                                    Click="SaveAllSearchType"
                                                                    Content="{x:Static lang:Resources.Actor}"
                                                                    FocusVisualStyle="{x:Null}"
                                                                    GroupName="SearchTypeRadioButton"
                                                                    Style="{StaticResource RadioButtonStyle}"
                                                                    Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                                <CheckBox
                                                                    Margin="5,0"
                                                                    Content="{x:Static lang:Resources.SearchCurrent}"
                                                                    IsChecked="{Binding SearchInCurrent, Mode=TwoWay}"
                                                                    Style="{StaticResource CheckBoxStyle1}" />
                                                            </StackPanel>
                                                        </Grid>
                                                    </Popup>
                                                </Grid>

                                                <hc:SearchBar
                                                    x:Name="SearchBar"
                                                    Margin="5,5,5,5"
                                                    Padding="35,0"
                                                    hc:InfoElement.Placeholder="{Binding SearchHint}"
                                                    hc:InfoElement.Title=""
                                                    hc:InfoElement.TitleWidth="140"
                                                    Background="Transparent"
                                                    BorderThickness="0"
                                                    CaretBrush="{DynamicResource ForegroundSearch}"
                                                    ContextMenu="{StaticResource TextBoxContextMenu}"
                                                    Focusable="True"
                                                    Foreground="{DynamicResource ForegroundSearch}"
                                                    GotFocus="SearchBar_GotFocus"
                                                    LostFocus="SearchBar_LostFocus"
                                                    PreviewKeyUp="SearchBar_PreviewKeyUp"
                                                    PreviewMouseLeftButtonDown="ShowSearchPopup"
                                                    SearchStarted="SearchBar_SearchStarted"
                                                    ShowClearButton="True"
                                                    Style="{StaticResource SearchBarPlus}"
                                                    TextChanged="RefreshCandiadte" />

                                                <Popup
                                                    Width="{Binding RelativeSource={RelativeSource AncestorType={x:Type Grid}, Mode=FindAncestor}, Path=ActualWidth}"
                                                    AllowsTransparency="True"
                                                    Focusable="True"
                                                    HorizontalOffset="0"
                                                    IsOpen="{Binding ShowSearchPopup, FallbackValue=False}"
                                                    Placement="Bottom"
                                                    StaysOpen="True"
                                                    VerticalOffset="2"
                                                    Visibility="Visible">
                                                    <Grid Margin="5">
                                                        <Border
                                                            Name="SearchBorder"
                                                            Margin="5"
                                                            Background="{DynamicResource BackgroundMenu}"
                                                            CornerRadius="5"
                                                            Effect="{StaticResource PopupDropShadowEffect}" />

                                                        <ScrollViewer
                                                            Canvas.Top="40"
                                                            Width="auto"
                                                            Height="auto"
                                                            Margin="10"
                                                            Panel.ZIndex="4"
                                                            Background="Transparent"
                                                            HorizontalScrollBarVisibility="Hidden"
                                                            VerticalScrollBarVisibility="Hidden">
                                                            <StackPanel>
                                                                <StackPanel x:Name="SearchHistoryStackPanel">

                                                                    <StackPanel Orientation="Horizontal">
                                                                        <TextBlock
                                                                            Height="auto"
                                                                            Margin="5"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            FontSize="12"
                                                                            Style="{StaticResource BaseTextBlock}"
                                                                            Text="{x:Static lang:Resources.SearchHistory}" />
                                                                        <Border
                                                                            Width="20"
                                                                            Height="20"
                                                                            Margin="5,0"
                                                                            CornerRadius="3"
                                                                            MouseLeftButtonDown="ClearSearchHistory"
                                                                            Style="{StaticResource CloseBorderStyle}">
                                                                            <Image
                                                                                Width="15"
                                                                                Height="15"
                                                                                Source="{Binding Themes, Mode=OneWay, ConverterParameter=clear, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                                                        </Border>
                                                                    </StackPanel>

                                                                    <ItemsControl
                                                                        Width="{Binding ElementName=SearchBorder, Path=ActualWidth, Converter={StaticResource WidthConverter}, ConverterParameter=-20, Mode=OneWay}"
                                                                        Margin="5,0"
                                                                        HorizontalAlignment="Left"
                                                                        Background="Transparent"
                                                                        ItemsSource="{Binding SearchHistory, Mode=OneWay}"
                                                                        ScrollViewer.VerticalScrollBarVisibility="Disabled">
                                                                        <ItemsControl.ItemsPanel>
                                                                            <ItemsPanelTemplate>
                                                                                <WrapPanel Orientation="Horizontal" />
                                                                            </ItemsPanelTemplate>
                                                                        </ItemsControl.ItemsPanel>

                                                                        <ItemsControl.ItemTemplate>
                                                                            <DataTemplate>

                                                                                <Border CornerRadius="3" Style="{StaticResource BorderStyle}">
                                                                                    <TextBlock
                                                                                        Width="auto"
                                                                                        Margin="10,5"
                                                                                        Padding="2"
                                                                                        FontSize="15"
                                                                                        PreviewMouseLeftButtonDown="SetSearchValue"
                                                                                        Style="{StaticResource SearchCandidateTextBlock}"
                                                                                        Text="{Binding}"
                                                                                        TextWrapping="NoWrap"
                                                                                        ToolTip="{Binding Path=Text, RelativeSource={RelativeSource Mode=Self}}" />
                                                                                </Border>

                                                                            </DataTemplate>
                                                                        </ItemsControl.ItemTemplate>
                                                                    </ItemsControl>
                                                                </StackPanel>

                                                                <TextBlock
                                                                    Grid.Row="0"
                                                                    Margin="5"
                                                                    HorizontalAlignment="Left"
                                                                    FontSize="12"
                                                                    Style="{StaticResource BaseTextBlock}"
                                                                    Text="{x:Static lang:Resources.SearchResult}" />

                                                                <ItemsControl
                                                                    x:Name="SearchItemsControl"
                                                                    Background="Transparent"
                                                                    ItemsSource="{Binding CurrentSearchCandidate}"
                                                                    ScrollViewer.VerticalScrollBarVisibility="Disabled">
                                                                    <ItemsControl.ItemsPanel>
                                                                        <ItemsPanelTemplate>
                                                                            <StackPanel Orientation="Vertical" />
                                                                        </ItemsPanelTemplate>
                                                                    </ItemsControl.ItemsPanel>

                                                                    <ItemsControl.ItemTemplate>
                                                                        <DataTemplate>
                                                                            <StackPanel Name="SearchStackPanel">

                                                                                <Border CornerRadius="3" Style="{StaticResource BorderStyle}">
                                                                                    <TextBlock
                                                                                        Width="auto"
                                                                                        Margin="10,5"
                                                                                        Padding="2"
                                                                                        FontSize="15"
                                                                                        PreviewMouseLeftButtonDown="SetSearchValue"
                                                                                        Style="{StaticResource SearchCandidateTextBlock}"
                                                                                        Text="{Binding}"
                                                                                        TextWrapping="NoWrap"
                                                                                        ToolTip="{Binding Path=Text, RelativeSource={RelativeSource Mode=Self}}" />

                                                                                </Border>

                                                                            </StackPanel>
                                                                        </DataTemplate>
                                                                    </ItemsControl.ItemTemplate>
                                                                </ItemsControl>

                                                            </StackPanel>
                                                        </ScrollViewer>
                                                    </Grid>
                                                </Popup>
                                            </Grid>
                                            <Button
                                                Margin="5,0"
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Center"
                                                Click="LoadFromPage"
                                                Content="{x:Static lang:Resources.LoadFromNet}"
                                                Style="{StaticResource FlatButton}"
                                                Visibility="{Binding ShowSecret, Source={x:Static p:Settings.Default}, Mode=OneWay, Converter={StaticResource bool2VisibilityConverter}}" />

                                            <CheckBox
                                                Click="SetSelectMode"
                                                Content="{x:Static lang:Resources.MultiSelect}"
                                                IsChecked="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />

                                            <Button
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Center"
                                                Command="{Binding AddNewMovie}"
                                                Content="{x:Static lang:Resources.FastImport}"
                                                Style="{StaticResource ButtonPrimary}" />

                                        </StackPanel>



                                        <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">

                                            <Border
                                                MouseLeftButtonUp="ShowImagePopup"
                                                Style="{StaticResource ToolsBarBorderStyle}"
                                                ToolTip="{x:Static lang:Resources.ImageType}">
                                                <Image
                                                    Width="20"
                                                    Height="20"
                                                    Source="{Binding Themes, Mode=OneWay, ConverterParameter=image, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                            </Border>
                                            <Border
                                                MouseLeftButtonUp="ShowSortPopup"
                                                Style="{StaticResource ToolsBarBorderStyle}"
                                                ToolTip="{x:Static lang:Resources.Sorting}">
                                                <Image Width="20" Height="20">
                                                    <Image.Style>
                                                        <Style TargetType="Image">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding SortDescending}" Value="True">
                                                                    <Setter Property="Source" Value="/Resources/Picture/sort_down.png" />
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding SortDescending}" Value="False">
                                                                    <Setter Property="Source" Value="/Resources/Picture/sort_up.png" />
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Image.Style>
                                                </Image>
                                            </Border>
                                            <Border
                                                MouseLeftButtonUp="ShowDownloadPopup"
                                                Style="{StaticResource ToolsBarBorderStyle}"
                                                ToolTip="{x:Static lang:Resources.SyncInfo}">
                                                <Image
                                                    Width="20"
                                                    Height="20"
                                                    Source="{Binding Themes, Mode=OneWay, ConverterParameter=download, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                            </Border>


                                            <Border
                                                MouseLeftButtonUp="RandomDisplay"
                                                Style="{StaticResource ToolsBarBorderStyle}"
                                                ToolTip="{x:Static lang:Resources.ToolTip_RandomShow}">
                                                <Image
                                                    Width="20"
                                                    Height="20"
                                                    Source="Resources/Picture/随机.png" />
                                            </Border>

                                            <Border
                                                MouseLeftButtonUp="ShowFilterGrid"
                                                Style="{StaticResource ToolsBarBorderStyle}"
                                                ToolTip="{x:Static lang:Resources.ToolTip_Filter}">
                                                <Image
                                                    Width="20"
                                                    Height="20"
                                                    Source="Resources/Picture/筛选.png" />
                                            </Border>


                                            <Button
                                                Click="Test"
                                                Content="Test"
                                                Style="{StaticResource FlatButton}"
                                                Visibility="Collapsed" />

                                        </StackPanel>

                                        <Popup
                                            x:Name="ImageSortPopup"
                                            AllowsTransparency="True"
                                            HorizontalOffset="-50"
                                            IsOpen="False"
                                            Placement="Mouse"
                                            PopupAnimation="Fade"
                                            StaysOpen="False"
                                            VerticalOffset="0">
                                            <Grid Margin="5">
                                                <Border
                                                    Margin="5"
                                                    Background="{DynamicResource BackgroundMenu}"
                                                    CornerRadius="5"
                                                    Effect="{StaticResource PopupDropShadowEffect}" />
                                                <StackPanel
                                                    x:Name="ImageTypeStackPanel"
                                                    Width="auto"
                                                    Margin="10,5"
                                                    Panel.ZIndex="7"
                                                    Background="Transparent"
                                                    Orientation="Vertical">
                                                    <RadioButton
                                                        Content="{x:Static lang:Resources.Thumbnail}"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RB2"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                    <RadioButton
                                                        Content="{x:Static lang:Resources.Poster}"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RB2"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                    <RadioButton
                                                        Content="{x:Static lang:Resources.Preview}"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RB2"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                    <RadioButton
                                                        Content="Gif"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RB2"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                    <RadioButton
                                                        Content="{x:Static lang:Resources.ListView}"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RB2"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}"
                                                        Visibility="Collapsed" />
                                                </StackPanel>
                                            </Grid>
                                        </Popup>

                                        <Popup
                                            x:Name="SortPopup"
                                            AllowsTransparency="True"
                                            HorizontalOffset="-50"
                                            IsOpen="False"
                                            Placement="Mouse"
                                            PopupAnimation="Fade"
                                            StaysOpen="False">
                                            <Grid Margin="5">
                                                <Border
                                                    Margin="5"
                                                    Background="{DynamicResource BackgroundMenu}"
                                                    CornerRadius="5"
                                                    Effect="{StaticResource PopupDropShadowEffect}" />
                                                <StackPanel
                                                    x:Name="SortStackPanel"
                                                    Width="auto"
                                                    Margin="5"
                                                    Panel.ZIndex="7"
                                                    Background="Transparent"
                                                    Orientation="Vertical">
                                                    <RadioButton
                                                        Margin="5,5,10,5"
                                                        HorizontalContentAlignment="Center"
                                                        Content="{x:Static lang:Resources.ID}"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RBSort"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                    <RadioButton
                                                        Margin="5,0,10,5"
                                                        HorizontalContentAlignment="Center"
                                                        Content="{x:Static lang:Resources.FileSize}"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RBSort"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                    <RadioButton
                                                        Margin="5,0,10,5"
                                                        HorizontalContentAlignment="Center"
                                                        Content="{x:Static lang:Resources.CreatedDate}"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RBSort"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                    <RadioButton
                                                        Margin="5,0,10,5"
                                                        HorizontalContentAlignment="Center"
                                                        Content="{x:Static lang:Resources.ImportDate}"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RBSort"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                    <RadioButton
                                                        Margin="5,0,10,5"
                                                        HorizontalContentAlignment="Center"
                                                        Content="{x:Static lang:Resources.Favorites}"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RBSort"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                    <RadioButton
                                                        Margin="5,0,10,5"
                                                        HorizontalContentAlignment="Center"
                                                        Content="{x:Static lang:Resources.Title}"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RBSort"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                    <RadioButton
                                                        Margin="5,0,10,5"
                                                        HorizontalContentAlignment="Center"
                                                        Content="{x:Static lang:Resources.ViewNumber}"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RBSort"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                    <RadioButton
                                                        Margin="5,0,10,5"
                                                        HorizontalContentAlignment="Center"
                                                        Content="{x:Static lang:Resources.ReleaseDate}"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RBSort"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                    <RadioButton
                                                        Margin="5,0,10,5"
                                                        HorizontalContentAlignment="Center"
                                                        Content="{x:Static lang:Resources.Rating}"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RBSort"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                    <RadioButton
                                                        Margin="5,0,10,5"
                                                        HorizontalContentAlignment="Center"
                                                        Content="{x:Static lang:Resources.Duration}"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RBSort"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                    <RadioButton
                                                        Margin="5,0,10,5"
                                                        HorizontalContentAlignment="Center"
                                                        Content="{x:Static lang:Resources.Actor}"
                                                        FocusVisualStyle="{x:Null}"
                                                        GroupName="RBSort"
                                                        Style="{StaticResource RadioButtonStyle}"
                                                        Template="{DynamicResource RadioButtonControlTemplate1}" />
                                                </StackPanel>
                                            </Grid>
                                        </Popup>


                                        <Popup
                                            x:Name="DownloadPopup"
                                            AllowsTransparency="True"
                                            HorizontalOffset="-40"
                                            IsOpen="False"
                                            Placement="Mouse"
                                            PopupAnimation="Fade"
                                            StaysOpen="False">
                                            <Grid Margin="5">
                                                <Border
                                                    Margin="5"
                                                    Background="{DynamicResource BackgroundMenu}"
                                                    CornerRadius="5"
                                                    Effect="{StaticResource PopupDropShadowEffect}" />
                                                <StackPanel
                                                    Height="auto"
                                                    MinWidth="100"
                                                    Margin="15"
                                                    Panel.ZIndex="7"
                                                    Background="Transparent"
                                                    Orientation="Vertical">
                                                    <Button
                                                        Click="Button_StartDownload"
                                                        Content="{x:Static lang:Resources.SyncInfo}"
                                                        Style="{StaticResource MenuButton}" />
                                                    <Button
                                                        Click="Button_StopDownload"
                                                        Content="{x:Static lang:Resources.StopSync}"
                                                        Style="{StaticResource MenuButton}" />
                                                </StackPanel>
                                            </Grid>
                                        </Popup>

                                    </Grid>






                                    <Grid
                                        x:Name="FilterGrid"
                                        Grid.Row="1"
                                        HorizontalAlignment="Stretch"
                                        IsEnabled="{Binding IsLoadingFilter, Converter={StaticResource OppositeBooleanConverter}, FallbackValue=True}"
                                        Visibility="Collapsed">


                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="auto" />
                                            <RowDefinition Height="auto" />
                                        </Grid.RowDefinitions>
                                        <!--  等待  -->
                                        <Grid
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Panel.ZIndex="10"
                                            Visibility="{Binding IsLoadingFilter, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Visible}">
                                            <Grid MinWidth="150" MaxWidth="250">
                                                <Border
                                                    Margin="5"
                                                    Background="{DynamicResource ForegroundGlobal}"
                                                    CornerRadius="5"
                                                    Effect="{StaticResource NormalBlurEffect}" />

                                                <Border
                                                    Margin="5"
                                                    Background="{DynamicResource BackgroundMain}"
                                                    CornerRadius="5">

                                                    <Grid Margin="5">
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="*" />
                                                            <RowDefinition Height="auto" />
                                                        </Grid.RowDefinitions>
                                                        <StackPanel
                                                            Grid.Row="0"
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Orientation="Horizontal">
                                                            <hc:LoadingCircle Height="30" Foreground="{DynamicResource ForegroundGlobal}" />
                                                            <TextBlock
                                                                Grid.Row="0"
                                                                MaxHeight="300"
                                                                Margin="5"
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"
                                                                Background="Transparent"
                                                                FontSize="18"
                                                                Foreground="{DynamicResource ForegroundSearch}"
                                                                Style="{StaticResource BaseTextBlock}"
                                                                Text="{x:Static lang:Resources.Loading}" />

                                                        </StackPanel>


                                                    </Grid>


                                                </Border>
                                            </Grid>

                                        </Grid>

                                        <Grid Grid.Row="0">
                                            <StackPanel x:Name="FilterStackPanel">


                                                <WrapPanel Margin="0,5">
                                                    <TextBlock Style="{StaticResource BaseFilterTextBlock}" Text="{x:Static lang:Resources.VedioType}" />
                                                    <ToggleButton
                                                        Margin="10,0,0,0"
                                                        Content="{x:Static lang:Resources.Uncensored}"
                                                        Style="{StaticResource ToggleButtonStyle2}" />
                                                    <ToggleButton Content="{x:Static lang:Resources.Censored}" Style="{StaticResource ToggleButtonStyle2}" />
                                                    <ToggleButton Content="{x:Static lang:Resources.Europe}" Style="{StaticResource ToggleButtonStyle2}" />
                                                </WrapPanel>


                                                <WrapPanel>
                                                    <TextBlock Style="{StaticResource BaseFilterTextBlock}" Text="{x:Static lang:Resources.ReleaseYear}" />
                                                    <ItemsControl
                                                        Margin="5,5,5,5"
                                                        Background="Transparent"
                                                        ItemsSource="{Binding Year}"
                                                        ScrollViewer.VerticalScrollBarVisibility="Disabled">
                                                        <ItemsControl.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <WrapPanel Orientation="Horizontal" />
                                                            </ItemsPanelTemplate>
                                                        </ItemsControl.ItemsPanel>

                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <Border Padding="3">
                                                                    <WrapPanel>
                                                                        <ToggleButton
                                                                            Name="CheckBox"
                                                                            Content="{Binding}"
                                                                            Style="{StaticResource ToggleButtonStyle2}" />
                                                                    </WrapPanel>
                                                                </Border>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </WrapPanel>


                                                <WrapPanel>
                                                    <TextBlock Style="{StaticResource BaseFilterTextBlock}" Text="{x:Static lang:Resources.VedioDuration}" />
                                                    <ItemsControl
                                                        Margin="5,5,5,5"
                                                        Background="Transparent"
                                                        ItemsSource="{Binding Runtime}"
                                                        ScrollViewer.VerticalScrollBarVisibility="Disabled">
                                                        <ItemsControl.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <WrapPanel Orientation="Horizontal" />
                                                            </ItemsPanelTemplate>
                                                        </ItemsControl.ItemsPanel>

                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <Border Padding="3">
                                                                    <WrapPanel>
                                                                        <ToggleButton
                                                                            Name="CheckBox"
                                                                            Content="{Binding}"
                                                                            Style="{StaticResource ToggleButtonStyle2}" />
                                                                    </WrapPanel>
                                                                </Border>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </WrapPanel>


                                                <WrapPanel>
                                                    <TextBlock
                                                        Style="{StaticResource BaseFilterTextBlock}"
                                                        Text="{x:Static lang:Resources.FileSize}"
                                                        ToolTip="（GB）" />
                                                    <ItemsControl
                                                        Margin="5,5,5,5"
                                                        Background="Transparent"
                                                        ItemsSource="{Binding FileSize}"
                                                        ScrollViewer.VerticalScrollBarVisibility="Disabled">
                                                        <ItemsControl.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <WrapPanel Orientation="Horizontal" />
                                                            </ItemsPanelTemplate>
                                                        </ItemsControl.ItemsPanel>

                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <Border Padding="3">
                                                                    <WrapPanel>
                                                                        <ToggleButton
                                                                            Name="CheckBox"
                                                                            Content="{Binding}"
                                                                            Style="{StaticResource ToggleButtonStyle2}" />
                                                                    </WrapPanel>
                                                                </Border>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </WrapPanel>


                                                <WrapPanel>
                                                    <TextBlock
                                                        Style="{StaticResource BaseFilterTextBlock}"
                                                        Text="{x:Static lang:Resources.MovieRating}"
                                                        ToolTip="（0-100）" />
                                                    <ItemsControl
                                                        Margin="5,5,5,5"
                                                        Background="Transparent"
                                                        ItemsSource="{Binding Rating}"
                                                        ScrollViewer.VerticalScrollBarVisibility="Disabled">
                                                        <ItemsControl.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <WrapPanel Orientation="Horizontal" />
                                                            </ItemsPanelTemplate>
                                                        </ItemsControl.ItemsPanel>

                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <Border Padding="3">
                                                                    <WrapPanel>
                                                                        <ToggleButton
                                                                            Name="CheckBox"
                                                                            Content="{Binding}"
                                                                            Style="{StaticResource ToggleButtonStyle2}" />
                                                                    </WrapPanel>
                                                                </Border>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </WrapPanel>



                                                <WrapPanel>
                                                    <TextBlock Style="{StaticResource BaseFilterTextBlock}" Text="{x:Static lang:Resources.MovieGenre}" />
                                                    <Button
                                                        Margin="5,10"
                                                        Content="{x:Static lang:Resources.ShowAll}"
                                                        Cursor="Hand"
                                                        PreviewMouseLeftButtonUp="Genre_PreviewMouseLeftButtonUp"
                                                        Style="{StaticResource ButtonPrimary}" />

                                                    <Border Margin="10,0" CornerRadius="5">
                                                        <ScrollViewer
                                                            MaxHeight="100"
                                                            CanContentScroll="True"
                                                            FocusVisualStyle="{x:Null}">
                                                            <ItemsControl
                                                                x:Name="GenreItemsControl"
                                                                Margin="5,5,5,5"
                                                                Background="Transparent"
                                                                ItemsSource="{Binding Genre}"
                                                                ScrollViewer.VerticalScrollBarVisibility="Disabled">
                                                                <ItemsControl.ItemsPanel>
                                                                    <ItemsPanelTemplate>
                                                                        <WrapPanel Orientation="Horizontal" />
                                                                    </ItemsPanelTemplate>
                                                                </ItemsControl.ItemsPanel>

                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <Border Padding="3">
                                                                            <WrapPanel>
                                                                                <ToggleButton
                                                                                    Name="CheckBox"
                                                                                    Content="{Binding}"
                                                                                    Style="{StaticResource ToggleButtonStyle2}" />
                                                                            </WrapPanel>
                                                                        </Border>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                            </ItemsControl>
                                                        </ScrollViewer>
                                                    </Border>
                                                </WrapPanel>


                                                <WrapPanel>
                                                    <TextBlock Style="{StaticResource BaseFilterTextBlock}" Text="{x:Static lang:Resources.MovieActors}" />
                                                    <Button
                                                        Margin="5,10"
                                                        Content="{x:Static lang:Resources.ShowAll}"
                                                        Cursor="Hand"
                                                        PreviewMouseLeftButtonUp="Actor_PreviewMouseLeftButtonUp"
                                                        Style="{StaticResource ButtonPrimary}" />

                                                    <Border Margin="10,0" CornerRadius="5">


                                                        <ScrollViewer
                                                            MaxHeight="100"
                                                            CanContentScroll="True"
                                                            FocusVisualStyle="{x:Null}">

                                                            <ItemsControl
                                                                x:Name="ActorFilterItemsControl"
                                                                Margin="5,5,5,5"
                                                                Background="Transparent"
                                                                ItemsSource="{Binding Actor}"
                                                                ScrollViewer.VerticalScrollBarVisibility="Disabled">
                                                                <ItemsControl.ItemsPanel>
                                                                    <ItemsPanelTemplate>
                                                                        <WrapPanel Orientation="Horizontal" />
                                                                    </ItemsPanelTemplate>
                                                                </ItemsControl.ItemsPanel>

                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <Border Padding="3">
                                                                            <WrapPanel>
                                                                                <ToggleButton
                                                                                    Name="CheckBox"
                                                                                    Content="{Binding}"
                                                                                    Style="{StaticResource ToggleButtonStyle2}" />
                                                                            </WrapPanel>
                                                                        </Border>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                            </ItemsControl>
                                                        </ScrollViewer>
                                                    </Border>
                                                </WrapPanel>


                                                <WrapPanel>
                                                    <TextBlock Style="{StaticResource BaseFilterTextBlock}" Text="{x:Static lang:Resources.MovieLabels}" />
                                                    <Border Margin="10,0" CornerRadius="5">
                                                        <ScrollViewer
                                                            MaxHeight="100"
                                                            CanContentScroll="True"
                                                            FocusVisualStyle="{x:Null}">
                                                            <ItemsControl
                                                                x:Name="LabelFilterItemsControl"
                                                                Margin="5,5,5,5"
                                                                Background="Transparent"
                                                                ItemsSource="{Binding Label}"
                                                                ScrollViewer.VerticalScrollBarVisibility="Disabled">
                                                                <ItemsControl.ItemsPanel>
                                                                    <ItemsPanelTemplate>
                                                                        <WrapPanel Orientation="Horizontal" />
                                                                    </ItemsPanelTemplate>
                                                                </ItemsControl.ItemsPanel>

                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <Border Padding="3">
                                                                            <WrapPanel>
                                                                                <ToggleButton
                                                                                    Name="CheckBox"
                                                                                    Content="{Binding}"
                                                                                    Style="{StaticResource ToggleButtonStyle2}" />
                                                                            </WrapPanel>
                                                                        </Border>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                            </ItemsControl>
                                                        </ScrollViewer>
                                                    </Border>
                                                </WrapPanel>

                                            </StackPanel>

                                        </Grid>

                                        <StackPanel
                                            Grid.Row="1"
                                            Margin="10,10,0,0"
                                            Orientation="Horizontal">
                                            <Button
                                                Height="30"
                                                Margin="5,10"
                                                HorizontalAlignment="Left"
                                                Click="ApplyFilter"
                                                Content="{x:Static lang:Resources.Apply}"
                                                Style="{StaticResource ButtonStyleFill}" />
                                            <Button
                                                Height="30"
                                                Margin="5,10"
                                                HorizontalAlignment="Left"
                                                Click="ClearFilter"
                                                Content="{x:Static lang:Resources.Clear}"
                                                Style="{StaticResource ButtonStyleFill}" />
                                        </StackPanel>


                                        <Border
                                            Grid.Row="2"
                                            Width="auto"
                                            Height="27"
                                            Margin="5,0"
                                            CornerRadius="3"
                                            Cursor="Hand"
                                            MouseLeftButtonUp="ShowFilterGrid"
                                            Style="{StaticResource BorderStyle}">
                                            <Image
                                                Width="20"
                                                Height="20"
                                                Source="/Resources/Picture/收起.png" />
                                        </Border>


                                    </Grid>


                                </Grid>





                                <!--  等待  -->
                                <Grid
                                    Grid.Row="1"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Panel.ZIndex="10"
                                    Visibility="{Binding IsLoadingMovie, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Visible}">
                                    <Grid MinWidth="150" MaxWidth="250">
                                        <Border
                                            Margin="5"
                                            Background="{DynamicResource ForegroundGlobal}"
                                            CornerRadius="5"
                                            Effect="{StaticResource NormalBlurEffect}" />

                                        <Border
                                            Margin="5"
                                            Background="{DynamicResource BackgroundMain}"
                                            CornerRadius="5">

                                            <Grid Margin="5">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="*" />
                                                    <RowDefinition Height="auto" />
                                                </Grid.RowDefinitions>
                                                <StackPanel
                                                    Grid.Row="0"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Orientation="Horizontal">
                                                    <hc:LoadingCircle Height="30" Foreground="{DynamicResource ForegroundGlobal}" />
                                                    <TextBlock
                                                        Grid.Row="0"
                                                        MaxHeight="300"
                                                        Margin="10"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Background="Transparent"
                                                        FontSize="18"
                                                        Foreground="{DynamicResource ForegroundSearch}"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="{x:Static lang:Resources.Loading}" />

                                                </StackPanel>


                                            </Grid>


                                        </Border>
                                    </Grid>

                                </Grid>

                                <!--  导航栏  -->
                                <Grid
                                    Grid.Row="1"
                                    MinWidth="40"
                                    MinHeight="50"
                                    Margin="20"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    Panel.ZIndex="4"
                                    Visibility="{Binding DisplayNavigation, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Visible}">
                                    <Rectangle
                                        Margin="{Binding MainGridThickness, Converter={StaticResource SmallerThicknessConverter}, ConverterParameter=-5, FallbackValue=5}"
                                        Effect="{StaticResource ZeroShadowEffect}"
                                        Fill="{DynamicResource BackgroundSide}"
                                        Opacity="0.5"
                                        RadiusX="2"
                                        RadiusY="2"
                                        Stroke="#5AC6FC"
                                        StrokeThickness="1" />
                                    <ScrollViewer Margin="0,10" VerticalScrollBarVisibility="Hidden">
                                        <ItemsControl HorizontalAlignment="Center" ItemsSource="{Binding LettersNavigation}">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <StackPanel />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Button
                                                        Click="NavigationToLetter"
                                                        Content="{Binding}"
                                                        Style="{StaticResource NavigateButton}" />
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>

                                    </ScrollViewer>

                                </Grid>



                                <!--  信息展示：演员信息+影片展示  -->
                                <Grid Grid.Row="1">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>



                                    <!--  演员  -->
                                    <Grid
                                        x:Name="ActorInfoGrid"
                                        Grid.Column="0"
                                        Margin="10"
                                        Visibility="{Binding ActorInfoGrid, FallbackValue=Collapsed}">
                                        <Border
                                            Margin="5"
                                            Background="{DynamicResource BackgroundTitle}"
                                            CornerRadius="5"
                                            Effect="{StaticResource NormalDropShadowEffect}" />


                                        <Border
                                            Width="27"
                                            Height="27"
                                            Margin="5"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Top"
                                            Panel.ZIndex="5"
                                            CornerRadius="20"
                                            MouseLeftButtonUp="HideActressGrid"
                                            Style="{StaticResource CloseBorderStyle}">
                                            <Image
                                                Width="20"
                                                Height="20"
                                                Source="{Binding Themes, Mode=OneWay, ConverterParameter=close, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                        </Border>

                                        <Grid Margin="10">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>



                                            <StackPanel Grid.Row="0">
                                                <Image
                                                    Width="120"
                                                    Margin="0,20"
                                                    VerticalAlignment="Top"
                                                    AllowDrop="True"
                                                    DragOver="Image_DragOver"
                                                    Drop="Image_Drop"
                                                    Source="{Binding Actress.smallimage}">
                                                    <Image.ContextMenu>
                                                        <ContextMenu>
                                                            <MenuItem Click="OpenActorPath" Header="{x:Static lang:Resources.OpenPath}" />
                                                            <MenuItem Click="OpenWebsite" Header="{x:Static lang:Resources.Menu_OpenWebSite}" />
                                                            <MenuItem Click="ClearActressInfo" Header="{x:Static lang:Resources.Clear}" />
                                                        </ContextMenu>
                                                    </Image.ContextMenu>
                                                </Image>
                                                <TextBox
                                                    Width="auto"
                                                    MaxWidth="200"
                                                    MaxHeight="50"
                                                    HorizontalAlignment="Center"
                                                    Background="Transparent"
                                                    ContextMenu="{StaticResource CopyContextMenu}"
                                                    FontSize="20"
                                                    FontWeight="Normal"
                                                    Foreground="{DynamicResource ForegroundSearch}"
                                                    IsReadOnly="True"
                                                    Style="{StaticResource ActorTextBox}"
                                                    Text="{Binding Actress.name, Mode=OneWay}"
                                                    TextAlignment="Center" />


                                            </StackPanel>


                                            <StackPanel Grid.Row="1" Orientation="Horizontal">
                                                <Border MouseLeftButtonUp="EditActress" Style="{StaticResource ActorInfoBorderStyle}">
                                                    <Image
                                                        Height="15"
                                                        Margin="5"
                                                        Source="pack://application:,,,/Resources/Picture/edit.png" />
                                                </Border>
                                                <Border MouseLeftButtonUp="BeginDownLoadActress" Style="{StaticResource ActorInfoBorderStyle}">
                                                    <Image
                                                        Height="20"
                                                        Margin="5"
                                                        Source="pack://application:,,,/Resources/Picture/download.png" />
                                                </Border>
                                                <Border
                                                    PreviewMouseLeftButtonUp="LoadActorOtherMovie"
                                                    Style="{StaticResource ActorInfoBorderStyle}"
                                                    Tag="{Binding Actress.name, Mode=OneWay}"
                                                    ToolTip="{x:Static lang:Resources.LoadActorOtherMovie}"
                                                    Visibility="Visible">
                                                    <Image
                                                        Height="17"
                                                        Margin="5"
                                                        Source="pack://application:,,,/Resources/Picture/其他.png" />
                                                </Border>
                                                <hc:Rate
                                                    Margin="10,0"
                                                    VerticalAlignment="Center"
                                                    AllowClear="True"
                                                    Background="{DynamicResource BackgroundSide}"
                                                    Count="1"
                                                    Foreground="#FF7B3B"
                                                    ToolTip="{x:Static lang:Resources.DoubleClickToCancel}"
                                                    ValueChanged="Rate_ValueChanged_1"
                                                    Visibility="Visible"
                                                    Value="{Binding Actress.like, Mode=TwoWay}" />



                                            </StackPanel>



                                            <ScrollViewer
                                                Grid.Row="2"
                                                Margin="0,5"
                                                VerticalScrollBarVisibility="Visible">
                                                <StackPanel x:Name="ActorInfoStackPanel">
                                                    <TextBox Text="{Binding Actress.id}" Visibility="Collapsed" />


                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Birthday}" />
                                                        <TextBox
                                                            Style="{StaticResource ActorTextBox}"
                                                            Text="{Binding Actress.birthday, Mode=TwoWay}"
                                                            ToolTip="【0000-00-00】" />
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Age}" />
                                                        <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding Actress.age, Mode=TwoWay}" />
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Birthplace}" />
                                                        <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding Actress.birthplace, Mode=TwoWay}" />
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Height}" />
                                                        <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding Actress.height, Mode=TwoWay}" />
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Cup}" />
                                                        <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding Actress.cup, Mode=TwoWay}" />
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Chest}" />
                                                        <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding Actress.chest, Mode=TwoWay}" />
                                                    </StackPanel>


                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Waist}" />
                                                        <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding Actress.waist, Mode=TwoWay}" />
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Hipline}" />
                                                        <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding Actress.hipline, Mode=TwoWay}" />
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Style="{StaticResource ActorInfoTextBlock}" Text="{x:Static lang:Resources.Actress_Hobby}" />
                                                        <TextBox Style="{StaticResource ActorTextBox}" Text="{Binding Actress.hobby, Mode=TwoWay}" />
                                                    </StackPanel>

                                                </StackPanel>
                                            </ScrollViewer>
                                        </Grid>
                                    </Grid>

                                    <!--  影片  -->
                                    <Grid
                                        Grid.Column="1"
                                        Panel.ZIndex="2"
                                        AllowDrop="True"
                                        DragOver="Grid_DragOver"
                                        Drop="Grid_Drop"
                                        FocusVisualStyle="{x:Null}"
                                        PreviewKeyDown="Grid_PreviewKeyDown"
                                        PreviewKeyUp="Grid_PreviewKeyUp">
                                        <Grid.ContextMenu>
                                            <ContextMenu IsEnabled="{Binding IsLoadingMovie, Converter={StaticResource OppositeBooleanConverter}}">
                                                <MenuItem Click="RefreshCurrentPage" Header="{x:Static lang:Resources.Refresh}" />
                                                <MenuItem Click="SelectAll" Header="{x:Static lang:Resources.SelectAll}" />
                                                <MenuItem
                                                    Command="{Binding FlipOverCommand}"
                                                    Header="{x:Static lang:Resources.ShowExists}"
                                                    IsCheckable="True"
                                                    IsChecked="{Binding OnlyShowPlay, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                                                <MenuItem
                                                    Command="{Binding FlipOverCommand}"
                                                    Header="{x:Static lang:Resources.ShowSubSection}"
                                                    IsCheckable="True"
                                                    IsChecked="{Binding OnlyShowSubSection, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                                                <MenuItem Header="{x:Static lang:Resources.ShowStamp}" Visibility="Visible">
                                                    <MenuItem
                                                        Click="SaveStampsType"
                                                        Header="{x:Static lang:Resources.All}"
                                                        IsCheckable="True"
                                                        IsChecked="True" />
                                                    <MenuItem
                                                        Click="SaveStampsType"
                                                        Header="{x:Static lang:Resources.HD}"
                                                        IsCheckable="True"
                                                        IsChecked="{Binding ShowHDV, Mode=TwoWay}" />
                                                    <MenuItem
                                                        Click="SaveStampsType"
                                                        Header="{x:Static lang:Resources.Translated}"
                                                        IsCheckable="True"
                                                        IsChecked="{Binding ShowCHS, Mode=TwoWay}" />
                                                    <MenuItem
                                                        Click="SaveStampsType"
                                                        Header="{x:Static lang:Resources.FlowOut}"
                                                        IsCheckable="True"
                                                        IsChecked="{Binding ShowFlowOut, Mode=TwoWay}" />
                                                </MenuItem>
                                                <MenuItem Header="{x:Static lang:Resources.ShowImageType}">
                                                    <MenuItem
                                                        Click="SaveShowViewMode"
                                                        Header="{x:Static lang:Resources.Default}"
                                                        IsCheckable="True"
                                                        IsChecked="True" />
                                                    <MenuItem
                                                        Click="SaveShowViewMode"
                                                        Header="{x:Static lang:Resources.WithImage}"
                                                        IsCheckable="True" />
                                                    <MenuItem
                                                        Click="SaveShowViewMode"
                                                        Header="{x:Static lang:Resources.NoImage}"
                                                        IsCheckable="True" />
                                                </MenuItem>
                                                <MenuItem Header="{x:Static lang:Resources.VedioType}">
                                                    <MenuItem
                                                        Click="SaveVedioType"
                                                        Header="{x:Static lang:Resources.Default}"
                                                        IsCheckable="True"
                                                        IsChecked="True" />
                                                    <MenuItem
                                                        Click="SaveVedioType"
                                                        Header="{x:Static lang:Resources.Uncensored}"
                                                        IsCheckable="True" />
                                                    <MenuItem
                                                        Click="SaveVedioType"
                                                        Header="{x:Static lang:Resources.Censored}"
                                                        IsCheckable="True" />
                                                    <MenuItem
                                                        Click="SaveVedioType"
                                                        Header="{x:Static lang:Resources.Europe}"
                                                        IsCheckable="True" />
                                                </MenuItem>
                                                <MenuItem Click="ShowRestMovie" Header="{x:Static lang:Resources.ShowRest}" />
                                            </ContextMenu>
                                        </Grid.ContextMenu>


                                        <!--  简单影片展示  -->
                                        <Grid FocusVisualStyle="{x:Null}">
                                            <ScrollViewer
                                                x:Name="SimpleMovieScrollViewer"
                                                CanContentScroll="True"
                                                FocusVisualStyle="{x:Null}"
                                                IsDeferredScrollingEnabled="False"
                                                PreviewMouseWheel="ScrollViewer_PreviewMouseWheel"
                                                ScrollChanged="ScrollViewer_ScrollChanged"
                                                VerticalScrollBarVisibility="Auto">
                                                <!--  精简模式  -->
                                                <ItemsControl
                                                    x:Name="SimpleMovieItemsControl"
                                                    AlternationCount="999"
                                                    FocusVisualStyle="{x:Null}">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <WrapPanel />
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>

                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <!--  影片加载动画  -->
                                                            <DataTemplate.Triggers>
                                                                <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                                                    <BeginStoryboard>
                                                                        <Storyboard>
                                                                            <DoubleAnimation
                                                                                FillBehavior="Stop"
                                                                                Storyboard.TargetName="MovieWrapPanel"
                                                                                Storyboard.TargetProperty="(UIElement.Opacity)"
                                                                                From="0"
                                                                                To="1"
                                                                                Duration="0:0:0.3" />
                                                                        </Storyboard>
                                                                    </BeginStoryboard>
                                                                </EventTrigger>
                                                            </DataTemplate.Triggers>

                                                            <WrapPanel Name="MovieWrapPanel">
                                                                <Grid Margin="5">
                                                                    <Border
                                                                        Name="MovieBorder"
                                                                        MinWidth="200"
                                                                        Background="{DynamicResource BackgroundSide}"
                                                                        CornerRadius="3"
                                                                        Effect="{StaticResource BlueDropShadowEffect}"
                                                                        Opacity="{Binding MovieOpacity, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                        Style="{StaticResource SimpleBorder}" />
                                                                    <StackPanel ContextMenuOpening="ContextMenu_ContextMenuOpening" Tag="{Binding id, Mode=OneWay}">
                                                                        <!--  影片右键菜单  -->
                                                                        <StackPanel.ContextMenu>
                                                                            <ContextMenu Opacity="0.9" PreviewKeyUp="ContextMenu_PreviewKeyUp">
                                                                                <MenuItem Click="DownLoadSelectMovie" Header="{x:Static lang:Resources.Menu_SyncInfo}" />
                                                                                <MenuItem Header="{x:Static lang:Resources.Menu_SyncExtra}" Visibility="Visible">
                                                                                    <MenuItem Click="DownLoadWithUrl" Header="{x:Static lang:Resources.Menu_CustomUrl}" />
                                                                                    <MenuItem Click="ForceToDownLoad" Header="{x:Static lang:Resources.Menu_EnforceSync}" />
                                                                                </MenuItem>
                                                                                <MenuItem Click="EditInfo" Header="{x:Static lang:Resources.Menu_EditInfo}" />
                                                                                <MenuItem Header="{x:Static lang:Resources.Menu_Advance}">
                                                                                    <MenuItem Click="TranslateMovie" Header="{x:Static lang:Resources.Menu_Translate}" />
                                                                                    <MenuItem Click="GenerateSmallImage" Header="{x:Static lang:Resources.Menu_GenerateThumbnail}" />
                                                                                    <MenuItem Click="GenerateActor" Header="{x:Static lang:Resources.Menu_GenerateActressImage}" />
                                                                                    <MenuItem Click="GenerateScreenShot" Header="{x:Static lang:Resources.Menu_GenerateScreenShot}" />
                                                                                    <MenuItem Click="GenerateGif" Header="{x:Static lang:Resources.Menu_GenerateGif}" />
                                                                                    <MenuItem Click="RenameFile" Header="{x:Static lang:Resources.Menu_RenameFile}" />
                                                                                    <MenuItem Click="ReMoveZero" Header="{x:Static lang:Resources.Menu_RemoveZero}" />
                                                                                </MenuItem>

                                                                                <MenuItem Name="ListMenuItem" Header="{x:Static lang:Resources.Menu_AddToList}" />
                                                                                <MenuItem
                                                                                    Click="RemoveFromList"
                                                                                    Header="{x:Static lang:Resources.Menu_RemoveFromList}"
                                                                                    Visibility="Collapsed" />

                                                                                <MenuItem Click="ShowLabelEditGrid" Header="{x:Static lang:Resources.Menu_LabelManagement}">
                                                                                    <MenuItem Click="ManageLabel" Header="{x:Static lang:Resources.Menu_LabelManage1}" />
                                                                                    <MenuItem Click="DelSingleLabel" Header="{x:Static lang:Resources.Menu_LabelManage2}" />
                                                                                    <MenuItem Click="AddLabel" Header="{x:Static lang:Resources.Menu_LabelManage3}" />
                                                                                    <MenuItem Click="DelLabel" Header="{x:Static lang:Resources.Menu_LabelManage4}" />
                                                                                    <MenuItem Click="ClearLabel" Header="{x:Static lang:Resources.Menu_LabelManage5}" />
                                                                                </MenuItem>
                                                                                <MenuItem Header="{x:Static lang:Resources.OpenPath}">
                                                                                    <MenuItem Click="OpenFilePath" Header="{x:Static lang:Resources.Movie}" />
                                                                                    <MenuItem Click="OpenImagePath" Header="{x:Static lang:Resources.Poster}" />
                                                                                    <MenuItem Click="OpenImagePath" Header="{x:Static lang:Resources.Thumbnail}" />
                                                                                    <MenuItem Click="OpenImagePath" Header="Gif" />
                                                                                    <MenuItem Click="OpenImagePath" Header="{x:Static lang:Resources.Preview}" />
                                                                                    <MenuItem Click="OpenImagePath" Header="{x:Static lang:Resources.ScreenShot}" />
                                                                                    <MenuItem Click="OpenImagePath" Header="{x:Static lang:Resources.ActressImage}" />
                                                                                </MenuItem>
                                                                                <MenuItem
                                                                                    Click="OpenWeb"
                                                                                    Header="{x:Static lang:Resources.Menu_OpenWebSite}"
                                                                                    Icon="pack://application:,,,/Resources/menuitem/openwebsite.png" />
                                                                                <MenuItem Click="CopyFile" Header="{x:Static lang:Resources.Menu_CopyFile}" />
                                                                                <MenuItem
                                                                                    Click="DeleteInfo"
                                                                                    Header="{x:Static lang:Resources.Menu_ClearInfo}"
                                                                                    ToolTip="{x:Static lang:Resources.ToolTip_ClearInfo}" />
                                                                                <MenuItem
                                                                                    Click="DeleteID"
                                                                                    Header="{x:Static lang:Resources.Menu_DeleteInfo}"
                                                                                    ToolTip="{x:Static lang:Resources.ToolTip_DeleteInfo}" />
                                                                                <MenuItem
                                                                                    Click="DeleteFile"
                                                                                    Header="{x:Static lang:Resources.Menu_DeleteFile}"
                                                                                    Icon="pack://application:,,,/Resources/menuitem/clear.png"
                                                                                    ToolTip="{x:Static lang:Resources.ToolTip_DeleteFile}" />



                                                                            </ContextMenu>
                                                                        </StackPanel.ContextMenu>

                                                                        <!--  图片  -->
                                                                        <Grid>
                                                                            <!--  大小图  -->
                                                                            <Image
                                                                                Name="Image"
                                                                                Margin="2"
                                                                                HorizontalAlignment="Center"
                                                                                VerticalAlignment="Center"
                                                                                Cursor="Hand"
                                                                                MouseEnter="BorderMouseEnter"
                                                                                MouseLeave="BorderMouseLeave"
                                                                                MouseLeftButtonDown="CanShowDetails"
                                                                                MouseLeftButtonUp="ShowDetails"
                                                                                Stretch="{Binding Path=MainImageAutoMode, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToImageStretchConverter}, Mode=OneWay}"
                                                                                Style="{StaticResource ViewImage}"
                                                                                ToolTip="{Binding id, Mode=OneWay}" />
                                                                            <!--  预览图  -->
                                                                            <Canvas
                                                                                Width="{Binding Path=ExtraImage_Width, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                Height="{Binding Path=ExtraImage_Height, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                Margin="2"
                                                                                Background="Transparent"
                                                                                Cursor="Hand"
                                                                                MouseEnter="Canvas_MouseEnter"
                                                                                MouseLeave="Canvas_MouseLeave"
                                                                                MouseLeftButtonDown="CanShowDetails"
                                                                                MouseLeftButtonUp="ShowDetails"
                                                                                Tag="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=(ItemsControl.AlternationIndex)}"
                                                                                ToolTip="{Binding id, Mode=OneWay}"
                                                                                Visibility="{Binding ShowImageMode, Converter={StaticResource IntToVisibilityConverter}, ConverterParameter=2, Source={x:Static p:Settings.Default}, Mode=OneWay}">
                                                                                <Image
                                                                                    Name="myImage"
                                                                                    Width="{Binding Path=ExtraImage_Width, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                    Height="{Binding Path=ExtraImage_Height, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                    RenderTransformOrigin="0.5,0.5"
                                                                                    Stretch="{Binding Path=MainImageAutoMode, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToImageStretchConverter}, Mode=OneWay}"
                                                                                    Tag="{Binding id, Mode=OneWay}" />
                                                                                <Image
                                                                                    Name="myImage2"
                                                                                    Width="{Binding Path=ExtraImage_Width, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                    Height="{Binding Path=ExtraImage_Height, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                    RenderTransformOrigin="0.5,0.5"
                                                                                    Stretch="{Binding Path=MainImageAutoMode, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToImageStretchConverter}, Mode=OneWay}" />
                                                                            </Canvas>
                                                                            <!--  GIF图  -->
                                                                            <local:GifImage
                                                                                x:Name="GifImage"
                                                                                Width="{Binding Path=GifImage_Width, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                Height="{Binding Path=GifImage_Height, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                Margin="2"
                                                                                Cursor="Hand"
                                                                                GifSource="{Binding GifUri, Mode=OneWay}"
                                                                                MouseLeftButtonDown="CanShowDetails"
                                                                                MouseLeftButtonUp="ShowDetails"
                                                                                Stretch="{Binding Path=MainImageAutoMode, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToImageStretchConverter}, Mode=OneWay}"
                                                                                Tag="{Binding id, Mode=OneWay}"
                                                                                ToolTip="{Binding id, Mode=OneWay}"
                                                                                Visibility="{Binding ShowImageMode, Converter={StaticResource IntToVisibilityConverter}, ConverterParameter=3, Source={x:Static p:Settings.Default}, Mode=OneWay}" />

                                                                            <!--  分段视频  -->
                                                                            <Button
                                                                                Height="24"
                                                                                Margin="5"
                                                                                HorizontalAlignment="Right"
                                                                                VerticalAlignment="Bottom"
                                                                                Panel.ZIndex="3"
                                                                                Click="ShowSubSection"
                                                                                Cursor="Hand"
                                                                                Style="{StaticResource TitleButton}"
                                                                                Tag="{Binding id, Mode=OneWay}"
                                                                                Visibility="{Binding hassubsection, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}">
                                                                                <Button.ContextMenu>
                                                                                    <ContextMenu
                                                                                        Width="100"
                                                                                        HorizontalOffset="-50"
                                                                                        VerticalOffset="10" />
                                                                                </Button.ContextMenu>
                                                                                <Image
                                                                                    Width="20"
                                                                                    Height="20"
                                                                                    Source="/Resources/Picture/subsection1.png" />
                                                                            </Button>



                                                                            <!--  播放按钮  -->
                                                                            <Canvas
                                                                                Width="40"
                                                                                Height="40"
                                                                                Margin="10,0,10,0"
                                                                                HorizontalAlignment="Center"
                                                                                VerticalAlignment="Center"
                                                                                Cursor="Hand"
                                                                                MouseLeftButtonUp="PlayVideo"
                                                                                Opacity="0.5"
                                                                                Style="{StaticResource HoverCanvas}"
                                                                                ToolTip="{Binding id, Mode=OneWay}">
                                                                                <Ellipse
                                                                                    Canvas.Left="3"
                                                                                    Canvas.Top="3"
                                                                                    Width="40"
                                                                                    Height="40"
                                                                                    Fill="#DD744C" />
                                                                                <Polygon
                                                                                    Cursor="Hand"
                                                                                    Fill="#F6F7F7"
                                                                                    Points="15,38 35,25 15,10"
                                                                                    Stroke="{DynamicResource BackgroundMenu}" />
                                                                            </Canvas>
                                                                        </Grid>
                                                                    </StackPanel>

                                                                </Grid>
                                                            </WrapPanel>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>



                                            </ScrollViewer>
                                        </Grid>

                                        <!--  详细影片展示  -->
                                        <Grid FocusVisualStyle="{x:Null}" Visibility="{Binding EasyMode, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToOppositeVisibilityConverter}, FallbackValue=Collapsed, Mode=OneWay}">
                                            <ScrollViewer
                                                x:Name="MovieScrollViewer"
                                                CanContentScroll="True"
                                                FocusVisualStyle="{x:Null}"
                                                IsDeferredScrollingEnabled="False"
                                                PreviewMouseWheel="ScrollViewer_PreviewMouseWheel"
                                                ScrollChanged="ScrollViewer_ScrollChanged"
                                                VerticalScrollBarVisibility="Auto">
                                                <!--  影片  -->
                                                <ItemsControl x:Name="MovieItemsControl" FocusVisualStyle="{x:Null}">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <WrapPanel />
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>

                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <!--  影片加载动画  -->
                                                            <DataTemplate.Triggers>
                                                                <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                                                    <BeginStoryboard>
                                                                        <Storyboard>
                                                                            <DoubleAnimation
                                                                                FillBehavior="Stop"
                                                                                Storyboard.TargetName="MovieWrapPanel"
                                                                                Storyboard.TargetProperty="(UIElement.Opacity)"
                                                                                From="0"
                                                                                To="1"
                                                                                Duration="0:0:0.3" />
                                                                        </Storyboard>
                                                                    </BeginStoryboard>
                                                                </EventTrigger>
                                                            </DataTemplate.Triggers>

                                                            <!--  自定义影片展示格式  -->
                                                            <WrapPanel Name="MovieWrapPanel">
                                                                <Grid Margin="5">
                                                                    <Border
                                                                        Name="MovieBorder"
                                                                        MinWidth="200"
                                                                        Background="{DynamicResource BackgroundSide}"
                                                                        CornerRadius="3"
                                                                        Effect="{StaticResource BlueDropShadowEffect}"
                                                                        Opacity="{Binding MovieOpacity, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                        Style="{StaticResource SimpleBorder}" />
                                                                    <StackPanel ContextMenuOpening="ContextMenu_ContextMenuOpening" Tag="{Binding id, Mode=OneWay}">
                                                                        <!--  影片右键菜单  -->
                                                                        <StackPanel.ContextMenu>
                                                                            <ContextMenu Opacity="0.9" PreviewKeyUp="ContextMenu_PreviewKeyUp">
                                                                                <MenuItem Click="DownLoadSelectMovie" Header="{x:Static lang:Resources.Menu_SyncInfo}" />
                                                                                <MenuItem Header="{x:Static lang:Resources.Menu_SyncExtra}" Visibility="Visible">
                                                                                    <MenuItem Click="DownLoadWithUrl" Header="{x:Static lang:Resources.Menu_CustomUrl}" />
                                                                                    <MenuItem Click="ForceToDownLoad" Header="{x:Static lang:Resources.Menu_EnforceSync}" />

                                                                                </MenuItem>
                                                                                <MenuItem Click="EditInfo" Header="{x:Static lang:Resources.Menu_EditInfo}" />
                                                                                <MenuItem Header="{x:Static lang:Resources.Menu_Advance}">
                                                                                    <MenuItem Click="TranslateMovie" Header="{x:Static lang:Resources.Menu_Translate}" />
                                                                                    <MenuItem Click="GenerateSmallImage" Header="{x:Static lang:Resources.Menu_GenerateThumbnail}" />
                                                                                    <MenuItem Click="GenerateActor" Header="{x:Static lang:Resources.Menu_GenerateActressImage}" />
                                                                                    <MenuItem Click="GenerateScreenShot" Header="{x:Static lang:Resources.Menu_GenerateScreenShot}" />
                                                                                    <MenuItem Click="GenerateGif" Header="{x:Static lang:Resources.Menu_GenerateGif}" />
                                                                                    <MenuItem Click="RenameFile" Header="{x:Static lang:Resources.Menu_RenameFile}" />
                                                                                    <MenuItem Click="ReMoveZero" Header="{x:Static lang:Resources.Menu_RemoveZero}" />
                                                                                </MenuItem>

                                                                                <MenuItem Name="ListMenuItem" Header="{x:Static lang:Resources.Menu_AddToList}" />
                                                                                <MenuItem
                                                                                    Click="RemoveFromList"
                                                                                    Header="{x:Static lang:Resources.Menu_RemoveFromList}"
                                                                                    Visibility="Collapsed" />

                                                                                <MenuItem Click="ShowLabelEditGrid" Header="{x:Static lang:Resources.Menu_LabelManagement}">
                                                                                    <MenuItem Click="ManageLabel" Header="{x:Static lang:Resources.Menu_LabelManage1}" />
                                                                                    <MenuItem Click="DelSingleLabel" Header="{x:Static lang:Resources.Menu_LabelManage2}" />
                                                                                    <MenuItem Click="AddLabel" Header="{x:Static lang:Resources.Menu_LabelManage3}" />
                                                                                    <MenuItem Click="DelLabel" Header="{x:Static lang:Resources.Menu_LabelManage4}" />
                                                                                    <MenuItem Click="ClearLabel" Header="{x:Static lang:Resources.Menu_LabelManage5}" />
                                                                                </MenuItem>
                                                                                <MenuItem Header="{x:Static lang:Resources.OpenPath}">
                                                                                    <MenuItem Click="OpenFilePath" Header="{x:Static lang:Resources.Movie}" />
                                                                                    <MenuItem Click="OpenImagePath" Header="{x:Static lang:Resources.Poster}" />
                                                                                    <MenuItem Click="OpenImagePath" Header="{x:Static lang:Resources.Thumbnail}" />
                                                                                    <MenuItem Click="OpenImagePath" Header="Gif" />
                                                                                    <MenuItem Click="OpenImagePath" Header="{x:Static lang:Resources.Preview}" />
                                                                                    <MenuItem Click="OpenImagePath" Header="{x:Static lang:Resources.ScreenShot}" />
                                                                                    <MenuItem Click="OpenImagePath" Header="{x:Static lang:Resources.ActressImage}" />
                                                                                </MenuItem>
                                                                                <MenuItem
                                                                                    Click="OpenWeb"
                                                                                    Header="{x:Static lang:Resources.Menu_OpenWebSite}"
                                                                                    Icon="pack://application:,,,/Resources/menuitem/openwebsite.png" />
                                                                                <MenuItem Click="CopyFile" Header="{x:Static lang:Resources.Menu_CopyFile}" />
                                                                                <MenuItem
                                                                                    Click="DeleteInfo"
                                                                                    Header="{x:Static lang:Resources.Menu_ClearInfo}"
                                                                                    ToolTip="{x:Static lang:Resources.ToolTip_ClearInfo}" />
                                                                                <MenuItem
                                                                                    Click="DeleteID"
                                                                                    Header="{x:Static lang:Resources.Menu_DeleteInfo}"
                                                                                    ToolTip="{x:Static lang:Resources.ToolTip_DeleteInfo}" />
                                                                                <MenuItem
                                                                                    Click="DeleteFile"
                                                                                    Header="{x:Static lang:Resources.Menu_DeleteFile}"
                                                                                    Icon="pack://application:,,,/Resources/menuitem/clear.png"
                                                                                    ToolTip="{x:Static lang:Resources.ToolTip_DeleteFile}" />



                                                                            </ContextMenu>
                                                                        </StackPanel.ContextMenu>

                                                                        <!--  图片  -->
                                                                        <Grid>
                                                                            <!--  大小图  -->
                                                                            <Image
                                                                                Name="Image"
                                                                                Margin="2"
                                                                                HorizontalAlignment="Center"
                                                                                VerticalAlignment="Center"
                                                                                Cursor="Hand"
                                                                                MouseEnter="BorderMouseEnter"
                                                                                MouseLeave="BorderMouseLeave"
                                                                                MouseLeftButtonDown="CanShowDetails"
                                                                                MouseLeftButtonUp="ShowDetails"
                                                                                Stretch="{Binding Path=MainImageAutoMode, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToImageStretchConverter}, Mode=OneWay}"
                                                                                Style="{StaticResource ViewImage}"
                                                                                ToolTip="{Binding id, Mode=OneWay}" />
                                                                            <!--  预览图  -->
                                                                            <Canvas
                                                                                Width="{Binding Path=ExtraImage_Width, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                Height="{Binding Path=ExtraImage_Height, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                Margin="2"
                                                                                Background="Transparent"
                                                                                Cursor="Hand"
                                                                                MouseEnter="Canvas_MouseEnter"
                                                                                MouseLeave="Canvas_MouseLeave"
                                                                                MouseLeftButtonDown="CanShowDetails"
                                                                                MouseLeftButtonUp="ShowDetails"
                                                                                ToolTip="{Binding id, Mode=OneWay}"
                                                                                Visibility="{Binding ShowImageMode, Converter={StaticResource IntToVisibilityConverter}, ConverterParameter=2, Source={x:Static p:Settings.Default}, Mode=OneWay}">
                                                                                <TextBlock
                                                                                    Height="20"
                                                                                    FontSize="16"
                                                                                    Foreground="{DynamicResource ForegroundSearch}"
                                                                                    Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=(ItemsControl.AlternationIndex)}"
                                                                                    Visibility="Collapsed" />
                                                                                <Image
                                                                                    Name="myImage"
                                                                                    Width="{Binding Path=ExtraImage_Width, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                    Height="{Binding Path=ExtraImage_Height, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                    RenderTransformOrigin="0.5,0.5"
                                                                                    Stretch="{Binding Path=MainImageAutoMode, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToImageStretchConverter}, Mode=OneWay}"
                                                                                    Tag="{Binding id, Mode=OneWay}" />
                                                                                <Image
                                                                                    Name="myImage2"
                                                                                    Width="{Binding Path=ExtraImage_Width, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                    Height="{Binding Path=ExtraImage_Height, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                    RenderTransformOrigin="0.5,0.5"
                                                                                    Stretch="{Binding Path=MainImageAutoMode, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToImageStretchConverter}, Mode=OneWay}" />
                                                                            </Canvas>
                                                                            <!--  GIF图  -->
                                                                            <local:GifImage
                                                                                x:Name="GifImage"
                                                                                Width="{Binding Path=GifImage_Width, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                Height="{Binding Path=GifImage_Height, Mode=OneWay, Source={x:Static p:Settings.Default}}"
                                                                                Margin="2"
                                                                                Cursor="Hand"
                                                                                GifSource="{Binding GifUri, Mode=OneWay}"
                                                                                MouseLeftButtonDown="CanShowDetails"
                                                                                MouseLeftButtonUp="ShowDetails"
                                                                                Stretch="{Binding Path=MainImageAutoMode, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToImageStretchConverter}, Mode=OneWay}"
                                                                                Tag="{Binding id, Mode=OneWay}"
                                                                                ToolTip="{Binding id, Mode=OneWay}"
                                                                                Visibility="{Binding ShowImageMode, Converter={StaticResource IntToVisibilityConverter}, ConverterParameter=3, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                                                                            <!--  分段视频  -->
                                                                            <Button
                                                                                Height="24"
                                                                                Margin="5"
                                                                                HorizontalAlignment="Right"
                                                                                VerticalAlignment="Bottom"
                                                                                Panel.ZIndex="3"
                                                                                Click="ShowSubSection"
                                                                                Cursor="Hand"
                                                                                Style="{StaticResource TitleButton}"
                                                                                Tag="{Binding id, Mode=OneWay}"
                                                                                Visibility="{Binding hassubsection, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}">
                                                                                <Button.ContextMenu>
                                                                                    <ContextMenu
                                                                                        Width="100"
                                                                                        HorizontalOffset="-50"
                                                                                        VerticalOffset="10" />
                                                                                </Button.ContextMenu>
                                                                                <Image
                                                                                    Width="20"
                                                                                    Height="20"
                                                                                    Source="/Resources/Picture/subsection1.png" />
                                                                            </Button>
                                                                            <!--  播放按钮  -->
                                                                            <Canvas
                                                                                Width="40"
                                                                                Height="40"
                                                                                Margin="10,0,10,0"
                                                                                HorizontalAlignment="Center"
                                                                                VerticalAlignment="Center"
                                                                                Cursor="Hand"
                                                                                MouseLeftButtonUp="PlayVideo"
                                                                                Opacity="0.5"
                                                                                Style="{StaticResource HoverCanvas}"
                                                                                ToolTip="{Binding id, Mode=OneWay}">
                                                                                <Ellipse
                                                                                    Canvas.Left="3"
                                                                                    Canvas.Top="3"
                                                                                    Width="40"
                                                                                    Height="40"
                                                                                    Fill="#DD744C" />
                                                                                <Polygon
                                                                                    Cursor="Hand"
                                                                                    Fill="#F6F7F7"
                                                                                    Points="15,38 35,25 15,10"
                                                                                    Stroke="{DynamicResource BackgroundMenu}" />
                                                                            </Canvas>
                                                                        </Grid>


                                                                        <!--  标签戳+ID  -->
                                                                        <Grid
                                                                            Width="auto"
                                                                            Margin="0"
                                                                            HorizontalAlignment="Stretch">
                                                                            <Grid.ColumnDefinitions>
                                                                                <ColumnDefinition Width="auto" />
                                                                                <ColumnDefinition Width="*" />
                                                                            </Grid.ColumnDefinitions>

                                                                            <TextBlock
                                                                                Grid.Column="0"
                                                                                Width="auto"
                                                                                Margin="0,5"
                                                                                Padding="10,0"
                                                                                HorizontalAlignment="Left"
                                                                                Cursor="Hand"
                                                                                FontSize="18"
                                                                                Foreground="{DynamicResource ForegroundSearch}"
                                                                                MouseLeftButtonDown="CopyText"
                                                                                Style="{StaticResource BaseTextBlock}"
                                                                                Text="{Binding id, Mode=OneWay}"
                                                                                TextAlignment="Left"
                                                                                Visibility="{Binding Path=DisplayID, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}" />

                                                                            <!--  标签戳  -->
                                                                            <StackPanel
                                                                                Grid.Column="1"
                                                                                Margin="5"
                                                                                HorizontalAlignment="Right"
                                                                                Orientation="Horizontal"
                                                                                Visibility="{Binding Path=DisplayStamp, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}">
                                                                                <Label
                                                                                    Margin="2,0"
                                                                                    Background="#9A58B7"
                                                                                    BorderThickness="0"
                                                                                    Content="{x:Static lang:Resources.HD}"
                                                                                    Foreground="{DynamicResource ForegroundSearch}"
                                                                                    Visibility="{Binding tagstamps, Converter={StaticResource TagStampsConverter}, ConverterParameter=1, Mode=OneWay}" />
                                                                                <Label
                                                                                    Margin="2,0"
                                                                                    Background="YellowGreen"
                                                                                    BorderThickness="0"
                                                                                    Content="{x:Static lang:Resources.Translated}"
                                                                                    Foreground="{DynamicResource ForegroundSearch}"
                                                                                    Visibility="{Binding tagstamps, Converter={StaticResource TagStampsConverter}, ConverterParameter=2, Mode=OneWay}" />
                                                                                <Label
                                                                                    Margin="2,0"
                                                                                    Background="#00B0F0"
                                                                                    BorderThickness="0"
                                                                                    Content="{x:Static lang:Resources.FlowOut}"
                                                                                    Foreground="{DynamicResource ForegroundSearch}"
                                                                                    Visibility="{Binding tagstamps, Converter={StaticResource TagStampsConverter}, ConverterParameter=3, Mode=OneWay}" />
                                                                            </StackPanel>
                                                                        </Grid>

                                                                        <TextBlock
                                                                            Margin="0,5"
                                                                            Padding="10,0"
                                                                            Background="Transparent"
                                                                            Cursor="Hand"
                                                                            FontSize="15"
                                                                            Foreground="{DynamicResource ForegroundSearch}"
                                                                            MouseLeftButtonDown="CopyText"
                                                                            Opacity="0.5"
                                                                            Text="{Binding releasedate, Mode=OneWay}"
                                                                            TextAlignment="Left"
                                                                            Visibility="{Binding Path=DisplayDate, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}" />

                                                                        <StackPanel
                                                                            Width="auto"
                                                                            Margin="10,5"
                                                                            HorizontalAlignment="Left"
                                                                            Cursor="Hand"
                                                                            PreviewMouseLeftButtonDown="StackPanel_PreviewMouseLeftButtonDown"
                                                                            Tag="{Binding id, Mode=OneWay}"
                                                                            Visibility="{Binding Path=DisplayFavorites, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}">
                                                                            <hc:Rate
                                                                                AllowClear="True"
                                                                                Background="{DynamicResource BackgroundTitle}"
                                                                                DefaultValue="0"
                                                                                Foreground="#FF7B3B"
                                                                                ItemHeight="15"
                                                                                ValueChanged="Rate_ValueChanged"
                                                                                Value="{Binding favorites, Mode=TwoWay}" />
                                                                        </StackPanel>

                                                                        <TextBlock
                                                                            Width="{Binding Path=GlobalImageWidth, Source={x:Static p:Settings.Default}, Converter={StaticResource BiggerWidthConverter}, Mode=OneWay}"
                                                                            Height="35"
                                                                            Margin="0,15"
                                                                            Padding="5,0"
                                                                            HorizontalAlignment="Center"
                                                                            Background="Transparent"
                                                                            Cursor="Hand"
                                                                            FontSize="14"
                                                                            Foreground="{DynamicResource ForegroundSearch}"
                                                                            MouseLeftButtonDown="CopyText"
                                                                            Opacity="0.5"
                                                                            Text="{Binding title, Mode=OneWay}"
                                                                            TextAlignment="Left"
                                                                            TextWrapping="Wrap"
                                                                            ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}"
                                                                            Visibility="{Binding Path=DisplayTitle, Converter={StaticResource BoolToVis}, Source={x:Static p:Settings.Default}, Mode=OneWay}" />
                                                                    </StackPanel>

                                                                </Grid>
                                                            </WrapPanel>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>




                                            </ScrollViewer>
                                        </Grid>


                                        <!--  返回顶部  -->
                                        <Canvas
                                            Width="20"
                                            Height="20"
                                            Margin="0,0,70,40"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Bottom"
                                            Panel.ZIndex="5"
                                            Cursor="Hand"
                                            MouseLeftButtonUp="GotoTop"
                                            Visibility="{Binding GoToTopCanvas}">
                                            <Ellipse
                                                Width="40"
                                                Height="40"
                                                Margin="0,0,5,5"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Bottom"
                                                Style="{StaticResource Ellipse2}" />
                                            <Image
                                                Canvas.Left="8"
                                                Canvas.Top="7"
                                                Height="22"
                                                HorizontalAlignment="Left"
                                                Panel.ZIndex="2"
                                                Source="{Binding Themes, Mode=OneWay, ConverterParameter=up, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                        </Canvas>
                                    </Grid>
                                </Grid>


                                <!--  底部  -->
                                <Grid
                                    Grid.Row="2"
                                    Width="auto"
                                    Height="40"
                                    Margin="5,0,5,0"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Bottom"
                                    Panel.ZIndex="5"
                                    Background="Transparent"
                                    DockPanel.Dock="Bottom"
                                    Visibility="{Binding DisplayStatusBar, Converter={StaticResource BoolToVis}, Mode=TwoWay, Source={x:Static p:Settings.Default}}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="auto" />
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Orientation="Horizontal">

                                        <Slider
                                            Grid.Column="0"
                                            Width="200"
                                            Margin="20,0,0,0"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            LargeChange="10"
                                            Maximum="500"
                                            Minimum="200"
                                            SmallChange="5"
                                            ValueChanged="ImageSizeSlider_ValueChanged"
                                            Value="{Binding Path=GlobalImageWidth, Source={x:Static p:Settings.Default}, Mode=TwoWay}" />

                                        <TextBlock
                                            VerticalAlignment="Center"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{Binding Path=GlobalImageWidth, Source={x:Static p:Settings.Default}, StringFormat=\{0\} px}" />

                                    </StackPanel>


                                    <!--  进度条  -->

                                    <Grid Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="auto" />
                                        </Grid.ColumnDefinitions>
                                        <ProgressBar
                                            x:Name="MainProgressBar"
                                            Grid.Column="0"
                                            Width="auto"
                                            Height="15"
                                            MinWidth="100"
                                            Margin="20,0,5,0"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Center"
                                            Background="{DynamicResource BackgroundSide}"
                                            DockPanel.Dock="Bottom"
                                            IsVisibleChanged="ProgressBar_IsVisibleChanged"
                                            Maximum="100"
                                            Minimum="0"
                                            Style="{StaticResource ProgressBarSuccessStripe}"
                                            ValueChanged="ProgressBar_ValueChanged"
                                            Visibility="{Binding ProgressBarVisibility}"
                                            Value="{Binding ProgressBarValue}" />
                                        <TextBlock
                                            Grid.Column="1"
                                            Margin="5,0"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{Binding ProgressBarValue, StringFormat={}{0}%, FallbackValue=20%}"
                                            Visibility="{Binding ProgressBarVisibility}" />
                                    </Grid>


                                    <!--  当前页信息  -->
                                    <StackPanel
                                        Grid.Column="2"
                                        HorizontalAlignment="Right"
                                        Orientation="Horizontal">
                                        <Image
                                            Height="27"
                                            Margin="5"
                                            HorizontalAlignment="Left"
                                            Source="{Binding Themes, Mode=OneWay, ConverterParameter=info, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                        <TextBlock
                                            Width="auto"
                                            Height="auto"
                                            Margin="10,0"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Foreground="{DynamicResource ForegroundSearch}"
                                            Text="{Binding TextType}"
                                            TextAlignment="Center" />
                                        <TextBlock
                                            Width="auto"
                                            Height="auto"
                                            Margin="10,0"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Foreground="{DynamicResource ForegroundSearch}"
                                            TextAlignment="Center">
                                            <TextBlock.Text>
                                                <MultiBinding StringFormat="{}{0}/{1} ">
                                                    <Binding Path="CurrentCount" />
                                                    <Binding Path="TotalCount" />
                                                    <!--<Binding trace:PresentationTraceSources.TraceLevel="High"></Binding>-->
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </StackPanel>
                                    <!--  页码  -->
                                    <StackPanel
                                        Grid.Column="3"
                                        Width="auto"
                                        Height="40"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Background="Transparent"
                                        IsEnabled="{Binding IsLoadingMovie, Converter={StaticResource OppositeBooleanConverter}}"
                                        Orientation="Horizontal"
                                        Visibility="Visible">

                                        <Border
                                            Margin="5,0"
                                            Padding="3"
                                            VerticalAlignment="Center"
                                            BorderBrush="{DynamicResource BackgroundSide}"
                                            BorderThickness="0"
                                            CornerRadius="3"
                                            Cursor="Hand"
                                            PreviewMouseLeftButtonDown="PreviousPage"
                                            Style="{StaticResource BorderStyle}"
                                            ToolTip="{x:Static lang:Resources.PreviewPage}">
                                            <Image
                                                Width="20"
                                                Height="20"
                                                Source="{Binding Themes, Mode=OneWay, ConverterParameter=left, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                        </Border>




                                        <StackPanel
                                            Width="auto"
                                            Height="40"
                                            Orientation="Horizontal">
                                            <TextBox
                                                Margin="10,1,10,1"
                                                Padding="10,0"
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Center"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                GotFocus="TextBox_GotFocus"
                                                PreviewKeyDown="GoToPage"
                                                Style="{StaticResource BaseTextBox}"
                                                Text="{Binding CurrentPage}" />
                                            <TextBlock
                                                Margin="10,1,10,1"
                                                Padding="10,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                FontSize="15"
                                                Foreground="{DynamicResource ForegroundSearch}"
                                                Text="{Binding TotalPage, StringFormat=/\{0\}}" />
                                        </StackPanel>

                                        <Border
                                            Margin="5,0"
                                            Padding="3"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            BorderBrush="{DynamicResource BackgroundSide}"
                                            BorderThickness="0"
                                            CornerRadius="3"
                                            Cursor="Hand"
                                            PreviewMouseLeftButtonDown="NextPage"
                                            Style="{StaticResource BorderStyle}"
                                            ToolTip="{x:Static lang:Resources.NextPage}">
                                            <Image
                                                Width="20"
                                                Height="20"
                                                Source="{Binding Themes, Mode=OneWay, ConverterParameter=right, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}"
                                                Visibility="Visible" />
                                        </Border>

                                    </StackPanel>

                                </Grid>

                            </Grid>

                        </TabItem>
                        <TabItem Background="Transparent">
                            <!--  演员、类别、标签  -->
                            <Grid
                                Grid.Column="1"
                                Margin="5"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                Background="Transparent"
                                PreviewKeyDown="ActorGrid_PreviewKeyDown">

                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="auto" />
                                </Grid.RowDefinitions>


                                <!--  等待  -->
                                <Grid
                                    Grid.Row="1"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Panel.ZIndex="10"
                                    Visibility="{Binding IsLoadingClassify, Converter={StaticResource BoolToVisibilityConverter}}">
                                    <Grid MinWidth="150" MaxWidth="250">
                                        <Border
                                            Margin="5"
                                            Background="{DynamicResource ForegroundGlobal}"
                                            CornerRadius="5"
                                            Effect="{StaticResource NormalBlurEffect}" />

                                        <Border
                                            Margin="5"
                                            Background="{DynamicResource BackgroundMain}"
                                            CornerRadius="5">

                                            <Grid Margin="5">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="*" />
                                                    <RowDefinition Height="auto" />
                                                </Grid.RowDefinitions>
                                                <StackPanel
                                                    Grid.Row="0"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Orientation="Horizontal">
                                                    <hc:LoadingCircle Height="30" Foreground="{DynamicResource ForegroundGlobal}" />
                                                    <TextBlock
                                                        Grid.Row="0"
                                                        MaxHeight="300"
                                                        Margin="10"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Background="Transparent"
                                                        FontSize="18"
                                                        Foreground="{DynamicResource ForegroundSearch}"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="{x:Static lang:Resources.Loading}" />

                                                </StackPanel>


                                            </Grid>


                                        </Border>
                                    </Grid>

                                </Grid>

                                <!--  工具栏  -->
                                <Grid
                                    Grid.Row="0"
                                    Panel.ZIndex="4"
                                    Background="Transparent"
                                    IsEnabled="{Binding IsLoadingClassify, Converter={StaticResource OppositeBooleanConverter}}"
                                    Visibility="{Binding DisplayFunBar, Converter={StaticResource BoolToVis}, Mode=TwoWay, Source={x:Static p:Settings.Default}}">

                                    <StackPanel Orientation="Horizontal">

                                        <Border Background="Transparent" CornerRadius="5">
                                            <StackPanel
                                                x:Name="ClassifyVedioTypeStackPanel"
                                                Margin="5"
                                                Orientation="Horizontal">
                                                <RadioButton
                                                    Content="{x:Static lang:Resources.All}"
                                                    FocusVisualStyle="{x:Null}"
                                                    GroupName="VedioTypeRadioButton"
                                                    IsChecked="True"
                                                    Style="{StaticResource FlatRadioButton}" />
                                                <RadioButton
                                                    Content="{x:Static lang:Resources.Uncensored}"
                                                    FocusVisualStyle="{x:Null}"
                                                    GroupName="VedioTypeRadioButton"
                                                    Style="{StaticResource FlatRadioButton}" />
                                                <RadioButton
                                                    Content="{x:Static lang:Resources.Censored}"
                                                    FocusVisualStyle="{x:Null}"
                                                    GroupName="VedioTypeRadioButton"
                                                    Style="{StaticResource FlatRadioButton}" />
                                                <RadioButton
                                                    Content="{x:Static lang:Resources.Europe}"
                                                    FocusVisualStyle="{x:Null}"
                                                    GroupName="VedioTypeRadioButton"
                                                    Style="{StaticResource FlatRadioButton}" />
                                            </StackPanel>
                                        </Border>

                                        <StackPanel
                                            Margin="5,0"
                                            Orientation="Horizontal"
                                            Visibility="{Binding ShowActorTools, Converter={StaticResource BoolToVisibilityConverter}}">
                                            <Border
                                                MouseLeftButtonUp="ShowDownloadActorMenu"
                                                Style="{StaticResource ToolsBarBorderStyle}"
                                                ToolTip="{x:Static lang:Resources.SyncInfo}">
                                                <Image
                                                    Width="20"
                                                    Height="20"
                                                    Source="{Binding Themes, Mode=OneWay, ConverterParameter=download, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                            </Border>
                                            <CheckBox
                                                Height="30"
                                                Margin="5,0"
                                                HorizontalAlignment="Left"
                                                HorizontalContentAlignment="Center"
                                                VerticalContentAlignment="Center"
                                                Click="ActorCheckBox_Click"
                                                Content="{x:Static lang:Resources.MultiSelect}"
                                                Foreground="{DynamicResource ForegroundGlobal}"
                                                IsChecked="{Binding ActorEditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}" />
                                            <CheckBox
                                                x:Name="LoveCheckBox"
                                                Checked="ShowLoveActors"
                                                Content="{x:Static lang:Resources.ShowFavoriteActor}"
                                                IsChecked="False"
                                                Unchecked="CheckBox_Unchecked" />

                                            <Popup
                                                x:Name="DownloadActorPopup"
                                                AllowsTransparency="True"
                                                HorizontalOffset="-50"
                                                IsOpen="False"
                                                Placement="Mouse"
                                                PopupAnimation="Fade"
                                                StaysOpen="False">
                                                <Grid Margin="5">
                                                    <Border
                                                        Margin="5"
                                                        Background="{DynamicResource BackgroundMenu}"
                                                        CornerRadius="5"
                                                        Effect="{StaticResource PopupDropShadowEffect}" />
                                                    <StackPanel
                                                        Height="auto"
                                                        MinWidth="100"
                                                        Margin="15"
                                                        Panel.ZIndex="7"
                                                        Background="Transparent"
                                                        Orientation="Vertical">
                                                        <Button
                                                            Click="StartDownLoadActress"
                                                            Content="{x:Static lang:Resources.SyncInfo}"
                                                            Style="{StaticResource MenuButton}" />
                                                        <Button
                                                            Click="StopDownLoadActress"
                                                            Content="{x:Static lang:Resources.StopSync}"
                                                            Style="{StaticResource MenuButton}" />
                                                    </StackPanel>
                                                </Grid>
                                            </Popup>

                                        </StackPanel>

                                        <Border
                                            MouseLeftButtonUp="RefreshClassify"
                                            Style="{StaticResource ToolsBarBorderStyle}"
                                            ToolTip="{x:Static lang:Resources.Refresh}"
                                            Visibility="{Binding ShowActorTools, Converter={StaticResource BoolToOppositeVisibilityConverter}}">
                                            <Image
                                                Width="20"
                                                Height="20"
                                                Source="/Resources/menuitem/refresh.png" />
                                        </Border>


                                        <hc:SearchBar
                                            x:Name="ActorSearchBar"
                                            Width="200"
                                            Margin="5,5,5,5"
                                            Padding="5"
                                            hc:InfoElement.Placeholder="{x:Static lang:Resources.Search}"
                                            hc:InfoElement.Title=""
                                            hc:InfoElement.TitleWidth="140"
                                            Background="Transparent"
                                            BorderBrush="{DynamicResource ForegroundGlobal}"
                                            BorderThickness="2"
                                            CaretBrush="{DynamicResource ForegroundSearch}"
                                            ContextMenu="{StaticResource TextBoxContextMenu}"
                                            Focusable="True"
                                            Foreground="{DynamicResource ForegroundSearch}"
                                            MouseEnter="SearchBar_MouseEnter_1"
                                            MouseLeave="SearchBar_MouseLeave_1"
                                            SearchStarted="SearchBar_SearchStarted_1"
                                            ShowClearButton="True"
                                            Style="{StaticResource SearchBarPlus}"
                                            TextChanged="SearchBar_TextChanged_1" />


                                    </StackPanel>
                                </Grid>






                                <TabControl
                                    x:Name="ActorTabControl"
                                    Grid.Row="1"
                                    Margin="5"
                                    Background="Transparent"
                                    BorderBrush="{DynamicResource BackgroundSearch}"
                                    IsEnabled="{Binding IsLoadingClassify, Converter={StaticResource OppositeBooleanConverter}}"
                                    SelectionChanged="TabControl_SelectionChanged"
                                    Style="{DynamicResource BaseHcTabControlStyle}"
                                    TabStripPlacement="Top">

                                    <TabItem
                                        Background="Transparent"
                                        FontSize="15"
                                        Header="{x:Static lang:Resources.Actor}"
                                        ScrollViewer.VerticalScrollBarVisibility="Disabled">

                                        <Grid Margin="10">
                                            <Grid.ContextMenu>
                                                <ContextMenu>
                                                    <MenuItem
                                                        Click="RefreshCurrentActressPage"
                                                        Header="{x:Static lang:Resources.Refresh}"
                                                        Icon="pack://application:,,,/Resources/menuitem/refresh.png" />
                                                    <MenuItem
                                                        Click="SelectAllActor"
                                                        Header="{x:Static lang:Resources.SelectAll}"
                                                        Icon="pack://application:,,,/Resources/menuitem/selectall.png" />
                                                </ContextMenu>
                                            </Grid.ContextMenu>


                                            <ItemsControl
                                                x:Name="ActorItemsControl"
                                                Margin="5,5,5,5"
                                                Background="Transparent"
                                                ItemsSource="{Binding CurrentActorList}"
                                                ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <WrapPanel Name="ActorWrapPanel" Orientation="Horizontal">
                                                            <Grid Height="200" Margin="5">
                                                                <Border
                                                                    Background="{DynamicResource BackgroundSide}"
                                                                    CornerRadius="0"
                                                                    Effect="{StaticResource BlueDropShadowEffect}"
                                                                    Style="{StaticResource ActorBorder}" />
                                                                <StackPanel
                                                                    Margin="2"
                                                                    Orientation="Vertical"
                                                                    Tag="{Binding name, Mode=OneWay}">
                                                                    <StackPanel.ContextMenu>
                                                                        <ContextMenu>
                                                                            <MenuItem
                                                                                Click="DownLoadSelectedActor"
                                                                                Header="{x:Static lang:Resources.SyncInfo}"
                                                                                Icon="pack://application:,,,/Resources/menuitem/download.png" />
                                                                            <MenuItem
                                                                                Click="LikeSelectedActor"
                                                                                Header="{x:Static lang:Resources.AddToFavorites}"
                                                                                Icon="pack://application:,,,/Resources/menuitem/like.png" />
                                                                        </ContextMenu>
                                                                    </StackPanel.ContextMenu>

                                                                    <Image
                                                                        Width="125"
                                                                        Height="125"
                                                                        Margin="0,0,0,10"
                                                                        VerticalAlignment="Top"
                                                                        AllowDrop="True"
                                                                        Cursor="Hand"
                                                                        DragOver="ActorImage_DragOver"
                                                                        Drop="ActorImage_Drop"
                                                                        FocusVisualStyle="{x:Null}"
                                                                        MouseEnter="ActorBorderMouseEnter"
                                                                        MouseLeave="ActorBorderMouseLeave"
                                                                        MouseLeftButtonUp="ShowSameActor"
                                                                        Source="{Binding smallimage}"
                                                                        Stretch="UniformToFill" />
                                                                    <TextBox
                                                                        Name="ActorNameTextBox"
                                                                        Width="125"
                                                                        MaxHeight="60"
                                                                        Margin="0"
                                                                        FontSize="18"
                                                                        Foreground="{DynamicResource ForegroundSearch}"
                                                                        Opacity="0.7"
                                                                        Style="{StaticResource ReadOnlyWrapTextBox}"
                                                                        ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}">
                                                                        <TextBox.Text>
                                                                            <MultiBinding StringFormat="{}{0}({1})">
                                                                                <Binding Path="name" />
                                                                                <Binding Path="num" />
                                                                                <!--<Binding trace:PresentationTraceSources.TraceLevel="High"></Binding>-->
                                                                            </MultiBinding>
                                                                        </TextBox.Text>
                                                                    </TextBox>

                                                                </StackPanel>
                                                            </Grid>
                                                        </WrapPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>

                                        </Grid>



                                    </TabItem>


                                    <TabItem
                                        Background="Transparent"
                                        FontSize="15"
                                        Header="{x:Static lang:Resources.Genre}">
                                        <Grid Margin="10">
                                            <ItemsControl ItemsSource="{Binding GenreList}">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <StackPanel>
                                                            <TextBlock Style="{StaticResource CenterTextBlock}" Text="{x:Static lang:Resources.Theme}" />
                                                            <ItemsControl
                                                                Margin="5,5,5,5"
                                                                Background="Transparent"
                                                                ItemsSource="{Binding theme}"
                                                                ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                                <ItemsControl.ItemsPanel>
                                                                    <ItemsPanelTemplate>
                                                                        <WrapPanel Orientation="Horizontal" />
                                                                    </ItemsPanelTemplate>
                                                                </ItemsControl.ItemsPanel>
                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <Border Style="{StaticResource GenreBorderStyle}">
                                                                            <TextBlock
                                                                                MouseUp="Genre_MouseDown"
                                                                                Style="{StaticResource GenreTextBlock}"
                                                                                Text="{Binding}" />
                                                                        </Border>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                            </ItemsControl>
                                                            <TextBlock Style="{StaticResource CenterTextBlock}" Text="{x:Static lang:Resources.Role}" />
                                                            <ItemsControl
                                                                Margin="5,5,5,5"
                                                                Background="Transparent"
                                                                ItemsSource="{Binding role}"
                                                                ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                                <ItemsControl.ItemsPanel>
                                                                    <ItemsPanelTemplate>
                                                                        <WrapPanel Orientation="Horizontal" />
                                                                    </ItemsPanelTemplate>
                                                                </ItemsControl.ItemsPanel>
                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <Border Style="{StaticResource GenreBorderStyle}">
                                                                            <TextBlock
                                                                                MouseUp="Genre_MouseDown"
                                                                                Style="{StaticResource GenreTextBlock}"
                                                                                Text="{Binding}" />
                                                                        </Border>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                            </ItemsControl>
                                                            <TextBlock Style="{StaticResource CenterTextBlock}" Text="{x:Static lang:Resources.Clothing}" />
                                                            <ItemsControl
                                                                Margin="5,5,5,5"
                                                                Background="Transparent"
                                                                ItemsSource="{Binding clothing}"
                                                                ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                                <ItemsControl.ItemsPanel>
                                                                    <ItemsPanelTemplate>
                                                                        <WrapPanel Orientation="Horizontal" />
                                                                    </ItemsPanelTemplate>
                                                                </ItemsControl.ItemsPanel>
                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <Border Style="{StaticResource GenreBorderStyle}">
                                                                            <TextBlock
                                                                                MouseUp="Genre_MouseDown"
                                                                                Style="{StaticResource GenreTextBlock}"
                                                                                Text="{Binding}" />
                                                                        </Border>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                            </ItemsControl>
                                                            <TextBlock Style="{StaticResource CenterTextBlock}" Text="{x:Static lang:Resources.Body}" />
                                                            <ItemsControl
                                                                Margin="5,5,5,5"
                                                                Background="Transparent"
                                                                ItemsSource="{Binding body}"
                                                                ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                                <ItemsControl.ItemsPanel>
                                                                    <ItemsPanelTemplate>
                                                                        <WrapPanel Orientation="Horizontal" />
                                                                    </ItemsPanelTemplate>
                                                                </ItemsControl.ItemsPanel>
                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <Border Style="{StaticResource GenreBorderStyle}">
                                                                            <TextBlock
                                                                                MouseUp="Genre_MouseDown"
                                                                                Style="{StaticResource GenreTextBlock}"
                                                                                Text="{Binding}" />
                                                                        </Border>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                            </ItemsControl>
                                                            <TextBlock Style="{StaticResource CenterTextBlock}" Text="{x:Static lang:Resources.Behaviour}" />
                                                            <ItemsControl
                                                                Margin="5,5,5,5"
                                                                Background="Transparent"
                                                                ItemsSource="{Binding behavior}"
                                                                ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                                <ItemsControl.ItemsPanel>
                                                                    <ItemsPanelTemplate>
                                                                        <WrapPanel Orientation="Horizontal" />
                                                                    </ItemsPanelTemplate>
                                                                </ItemsControl.ItemsPanel>
                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <Border Style="{StaticResource GenreBorderStyle}">
                                                                            <TextBlock
                                                                                MouseUp="Genre_MouseDown"
                                                                                Style="{StaticResource GenreTextBlock}"
                                                                                Text="{Binding}" />
                                                                        </Border>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                            </ItemsControl>
                                                            <TextBlock Style="{StaticResource CenterTextBlock}" Text="{x:Static lang:Resources.Play}" />
                                                            <ItemsControl
                                                                Margin="5,5,5,5"
                                                                Background="Transparent"
                                                                ItemsSource="{Binding playmethod}"
                                                                ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                                <ItemsControl.ItemsPanel>
                                                                    <ItemsPanelTemplate>
                                                                        <WrapPanel Orientation="Horizontal" />
                                                                    </ItemsPanelTemplate>
                                                                </ItemsControl.ItemsPanel>
                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <Border Style="{StaticResource GenreBorderStyle}">
                                                                            <TextBlock
                                                                                MouseUp="Genre_MouseDown"
                                                                                Style="{StaticResource GenreTextBlock}"
                                                                                Text="{Binding}" />
                                                                        </Border>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                            </ItemsControl>
                                                            <TextBlock Style="{StaticResource CenterTextBlock}" Text="{x:Static lang:Resources.Scene}" />
                                                            <ItemsControl
                                                                Margin="5,5,5,5"
                                                                Background="Transparent"
                                                                ItemsSource="{Binding scene}"
                                                                ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                                <ItemsControl.ItemsPanel>
                                                                    <ItemsPanelTemplate>
                                                                        <WrapPanel Orientation="Horizontal" />
                                                                    </ItemsPanelTemplate>
                                                                </ItemsControl.ItemsPanel>
                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <Border Style="{StaticResource GenreBorderStyle}">
                                                                            <TextBlock
                                                                                MouseUp="Genre_MouseDown"
                                                                                Style="{StaticResource GenreTextBlock}"
                                                                                Text="{Binding}" />
                                                                        </Border>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                            </ItemsControl>
                                                            <TextBlock Style="{StaticResource CenterTextBlock}" Text="{x:Static lang:Resources.Other}" />
                                                            <ItemsControl
                                                                Margin="5,5,5,5"
                                                                Background="Transparent"
                                                                ItemsSource="{Binding other}"
                                                                ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                                <ItemsControl.ItemsPanel>
                                                                    <ItemsPanelTemplate>
                                                                        <WrapPanel Orientation="Horizontal" />
                                                                    </ItemsPanelTemplate>
                                                                </ItemsControl.ItemsPanel>
                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <Border
                                                                            Width="auto"
                                                                            Height="50"
                                                                            Style="{StaticResource GenreBorderStyle}">
                                                                            <TextBlock
                                                                                MouseUp="Genre_MouseDown"
                                                                                Style="{StaticResource GenreTextBlock}"
                                                                                Text="{Binding}" />
                                                                        </Border>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                            </ItemsControl>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>

                                        </Grid>



                                    </TabItem>
                                    <TabItem
                                        Background="Transparent"
                                        FontSize="15"
                                        Header="{x:Static lang:Resources.Label}">

                                        <Grid Margin="10">
                                            <ItemsControl
                                                Margin="5"
                                                Background="Transparent"
                                                ItemsSource="{Binding LabelList}"
                                                ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Style="{StaticResource GenreBorderStyle}">
                                                            <TextBlock
                                                                MouseUp="Label_MouseDown"
                                                                Style="{StaticResource GenreTextBlock}"
                                                                Text="{Binding}" />
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>


                                        </Grid>



                                    </TabItem>
                                    <TabItem
                                        Background="Transparent"
                                        FontSize="15"
                                        Header="{x:Static lang:Resources.Tag}">

                                        <Grid Margin="10">
                                            <ItemsControl
                                                Margin="5"
                                                Background="Transparent"
                                                ItemsSource="{Binding TagList}"
                                                ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Name="LabelWrapPanel" Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>

                                                        <Border Style="{StaticResource GenreBorderStyle}">
                                                            <TextBlock
                                                                MouseUp="Label_MouseDown"
                                                                Style="{StaticResource GenreTextBlock}"
                                                                Text="{Binding}" />
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>


                                        </Grid>



                                    </TabItem>
                                    <TabItem
                                        Background="Transparent"
                                        FontSize="15"
                                        Header="{x:Static lang:Resources.Studio}">

                                        <Grid Margin="10">
                                            <ItemsControl
                                                Margin="5"
                                                Background="Transparent"
                                                ItemsSource="{Binding StudioList}"
                                                ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Style="{StaticResource GenreBorderStyle}">
                                                            <TextBlock
                                                                MouseUp="Label_MouseDown"
                                                                Style="{StaticResource GenreTextBlock}"
                                                                Text="{Binding}" />
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>


                                        </Grid>



                                    </TabItem>

                                    <TabItem
                                        Background="Transparent"
                                        FontSize="15"
                                        Header="{x:Static lang:Resources.Director}">

                                        <Grid Margin="10">
                                            <ItemsControl
                                                Margin="5"
                                                Background="Transparent"
                                                ItemsSource="{Binding DirectorList}"
                                                ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>

                                                        <Border Style="{StaticResource GenreBorderStyle}">
                                                            <TextBlock
                                                                MouseUp="Label_MouseDown"
                                                                Style="{StaticResource GenreTextBlock}"
                                                                Text="{Binding}" />
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>


                                        </Grid>



                                    </TabItem>
                                </TabControl>


                                <!--  底部  -->
                                <Grid Grid.Row="2" Visibility="{Binding ShowActorTools, Converter={StaticResource BoolToVisibilityConverter}}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="auto" />
                                    </Grid.ColumnDefinitions>



                                    <!--  进度条  -->

                                    <Grid Grid.Column="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="auto" />
                                        </Grid.ColumnDefinitions>
                                        <ProgressBar
                                            x:Name="ActorProgressBar"
                                            Grid.Column="0"
                                            Height="15"
                                            MinWidth="100"
                                            Margin="20,0,5,0"
                                            VerticalAlignment="Center"
                                            Background="{DynamicResource BackgroundSide}"
                                            Maximum="100"
                                            Minimum="0"
                                            Style="{StaticResource ProgressBarSuccessStripe}"
                                            ValueChanged="ActorProgressBar_ValueChanged"
                                            Visibility="{Binding ActorProgressBarVisibility, FallbackValue=Collapsed}"
                                            Value="{Binding ActorProgressBarValue, FallbackValue=0}" />
                                        <TextBlock
                                            Grid.Column="1"
                                            Margin="5,0"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{Binding ActorProgressBarValue, StringFormat={}{0}%, FallbackValue=20%}"
                                            Visibility="{Binding ElementName=ActorProgressBar, Path=Visibility}" />
                                    </Grid>


                                    <!--  当前页信息  -->
                                    <StackPanel
                                        Grid.Column="1"
                                        HorizontalAlignment="Right"
                                        Orientation="Horizontal"
                                        Visibility="{Binding ShowActorTools, Converter={StaticResource BoolToVisibilityConverter}}">
                                        <Image
                                            Height="27"
                                            Margin="5"
                                            HorizontalAlignment="Left"
                                            Source="{Binding Themes, Mode=OneWay, ConverterParameter=info, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                        <TextBlock
                                            Width="auto"
                                            Height="auto"
                                            Margin="10,0"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Foreground="{DynamicResource ForegroundSearch}"
                                            TextAlignment="Center">
                                            <TextBlock.Text>
                                                <MultiBinding StringFormat="{}{0}/{1} ">
                                                    <Binding Path="ActorCurrentCount" />
                                                    <Binding Path="ActorTotalCount" />
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </StackPanel>

                                    <!--  页码  -->
                                    <StackPanel
                                        Grid.Column="2"
                                        Width="auto"
                                        Height="40"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Background="Transparent"
                                        IsEnabled="{Binding IsLoadingClassify, Converter={StaticResource OppositeBooleanConverter}, FallbackValue=False}"
                                        Orientation="Horizontal">

                                        <Border
                                            Margin="5,0"
                                            Padding="3"
                                            VerticalAlignment="Center"
                                            BorderBrush="{DynamicResource BackgroundSide}"
                                            BorderThickness="0"
                                            CornerRadius="3"
                                            Cursor="Hand"
                                            PreviewMouseLeftButtonDown="PreviousActorPage"
                                            Style="{StaticResource BorderStyle}"
                                            ToolTip="{x:Static lang:Resources.PreviewPage}">
                                            <Image
                                                Width="20"
                                                Height="20"
                                                Source="{Binding Themes, Mode=OneWay, ConverterParameter=left, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                                        </Border>
                                        <StackPanel
                                            Width="auto"
                                            Height="40"
                                            Orientation="Horizontal">
                                            <TextBox
                                                Margin="10,1,10,1"
                                                Padding="10,0"
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Center"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                ContextMenu="{StaticResource TextBoxContextMenu}"
                                                GotFocus="TextBox_GotFocus"
                                                PreviewKeyDown="GoToActorPage"
                                                Style="{StaticResource BaseTextBox}"
                                                Text="{Binding CurrentActorPage}" />
                                            <TextBlock
                                                Margin="10,1,10,1"
                                                Padding="10,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                FontSize="15"
                                                Foreground="{DynamicResource ForegroundSearch}"
                                                Text="{Binding TotalActorPage, StringFormat=/\{0\}}" />
                                        </StackPanel>

                                        <Border
                                            Margin="5,0"
                                            Padding="3"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            BorderBrush="{DynamicResource BackgroundSide}"
                                            BorderThickness="0"
                                            CornerRadius="3"
                                            Cursor="Hand"
                                            PreviewMouseLeftButtonDown="NextActorPage"
                                            Style="{StaticResource BorderStyle}"
                                            ToolTip="{x:Static lang:Resources.NextPage}">
                                            <Image
                                                Width="20"
                                                Height="20"
                                                Source="{Binding Themes, Mode=OneWay, ConverterParameter=right, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}"
                                                Visibility="Visible" />
                                        </Border>

                                    </StackPanel>
                                </Grid>




                            </Grid>


                        </TabItem>
                    </TabControl>
                </Grid>

                <!--  首次运行显示扫描  -->
                <Grid
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Panel.ZIndex="10"
                    Visibility="{Binding ShowFirstRun, FallbackValue=Visibility}">
                    <Grid>
                        <Border
                            Margin="5"
                            Background="{DynamicResource ForegroundGlobal}"
                            CornerRadius="0"
                            Effect="{StaticResource NormalBlurEffect}" />

                        <Border
                            Margin="5"
                            Background="{DynamicResource BackgroundMain}"
                            CornerRadius="0">

                            <StackPanel
                                Margin="40"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Panel.ZIndex="1"
                                FocusVisualStyle="{x:Null}"
                                Orientation="Horizontal"
                                Visibility="Visible">
                                <TextBlock
                                    Margin="20,0"
                                    VerticalAlignment="Center"
                                    FontSize="20"
                                    Style="{StaticResource BaseTextBlock}"
                                    Text="{x:Static lang:Resources.DragFileInOr}" />
                                <Button
                                    Click="ShowScanWindow"
                                    Content="{x:Static lang:Resources.Scan}"
                                    Style="{StaticResource ButtonStyleFill}" />
                            </StackPanel>


                        </Border>
                    </Grid>

                    <Button
                        Width="30"
                        Height="30"
                        Margin="5"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Background="{DynamicResource Window.Title.Background}"
                        Click="HideBeginScanGrid"
                        Style="{StaticResource CloseButton}"
                        Tag="{DynamicResource Window.Title.Close.Hover.Background}">
                        <Viewbox
                            Width="12"
                            Height="auto"
                            VerticalAlignment="Center">
                            <Path
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Data="M610.218667 505.6l398.08-387.413333a49.664 49.664 0 0 0 0-71.338667l-2.133334-2.133333a52.992 52.992 0 0 0-73.301333 0L534.784 432.64 136.704 44.373333a52.992 52.992 0 0 0-73.386667 0L61.269333 46.592a48.810667 48.810667 0 0 0 0 71.338667l398.165334 387.669333-398.165334 387.498667a49.664 49.664 0 0 0 0 71.253333l2.218667 2.133333c20.48 19.626667 52.821333 19.626667 73.301333 0l398.08-387.413333 398.08 387.413333c20.48 19.626667 52.906667 19.626667 73.386667 0l2.048-2.133333a49.664 49.664 0 0 0 0-71.253333l-398.08-387.413334z"
                                Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" />
                        </Viewbox>
                    </Button>
                </Grid>








                <!--  标签  -->

                <Grid
                    x:Name="LabelGrid"
                    Width="500"
                    Height="300"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Background="Transparent"
                    Visibility="Collapsed">
                    <Border
                        Margin="2"
                        Background="{DynamicResource BackgroundMain}"
                        CornerRadius="5"
                        Effect="{StaticResource NormalDropShadowEffect}" />

                    <Border PreviewMouseLeftButtonUp="HideGrid" Style="{StaticResource GridCloseBorderStyle}">
                        <Image
                            Width="20"
                            Height="20"
                            Source="{Binding Themes, Mode=OneWay, ConverterParameter=close, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                    </Border>

                    <TextBlock
                        Height="auto"
                        Margin="20"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top"
                        Style="{StaticResource BaseTextBlock}"
                        Text="{x:Static lang:Resources.Choose}" />

                    <Grid
                        Margin="20,50,20,5"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="auto" />
                        </Grid.RowDefinitions>

                        <ScrollViewer
                            Grid.Row="0"
                            HorizontalScrollBarVisibility="Disabled"
                            VerticalScrollBarVisibility="Auto">
                            <ItemsControl
                                x:Name="LabelItemsControl"
                                Height="auto"
                                VerticalAlignment="Top"
                                Background="Transparent"
                                ItemsSource="{Binding LabelList}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel
                                            MaxWidth="400"
                                            VerticalAlignment="Top"
                                            Orientation="Horizontal" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>

                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <WrapPanel x:Name="LabelWrapPanel">
                                            <ToggleButton
                                                Margin="10"
                                                Padding="5"
                                                BorderThickness="0"
                                                Content="{Binding}"
                                                FontSize="15"
                                                Foreground="{DynamicResource ForegroundSearch}"
                                                Style="{StaticResource ToggleButtonStyle1}" />
                                        </WrapPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>


                        </ScrollViewer>


                        <StackPanel
                            Grid.Row="1"
                            HorizontalAlignment="Right"
                            Orientation="Horizontal">
                            <Button
                                Click="Button_Click"
                                Content="{x:Static lang:Resources.Confirm}"
                                Style="{StaticResource ButtonStyleFill}" />
                            <Button
                                Click="Button_Click_1"
                                Content="{x:Static lang:Resources.Cancel}"
                                Style="{StaticResource ButtonStyleFill}" />
                        </StackPanel>


                    </Grid>


                </Grid>

                <!--  删除标签  -->

                <Grid
                    x:Name="LabelDelGrid"
                    Width="500"
                    Height="300"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Background="Transparent"
                    Visibility="Collapsed">
                    <Border
                        Margin="2"
                        Background="{DynamicResource BackgroundMain}"
                        CornerRadius="5"
                        Effect="{StaticResource NormalDropShadowEffect}" />

                    <Border PreviewMouseLeftButtonUp="HideGrid" Style="{StaticResource GridCloseBorderStyle}">
                        <Image
                            Width="20"
                            Height="20"
                            Source="{Binding Themes, Mode=OneWay, ConverterParameter=close, Converter={StaticResource StringToUriStringConverter}, Source={x:Static p:Settings.Default}}" />
                    </Border>

                    <TextBlock
                        Height="auto"
                        Margin="20"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top"
                        Style="{StaticResource BaseTextBlock}"
                        Text="{x:Static lang:Resources.Menu_LabelManagement}" />

                    <Grid
                        Margin="20,50,20,5"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="auto" />
                        </Grid.RowDefinitions>

                        <ItemsControl
                            x:Name="LabelDelItemsControl"
                            Grid.Row="0"
                            Height="auto"
                            VerticalAlignment="Top"
                            Background="Transparent"
                            ItemsSource="{Binding CurrentMovieLabelList}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel
                                        MaxWidth="400"
                                        VerticalAlignment="Top"
                                        Orientation="Horizontal" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>

                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <WrapPanel x:Name="LabelWrapPanel">
                                        <ToggleButton
                                            Margin="10"
                                            Padding="5"
                                            BorderThickness="0"
                                            Content="{Binding}"
                                            FontSize="15"
                                            Foreground="{DynamicResource ForegroundSearch}"
                                            Style="{StaticResource ToggleButtonStyle1}" />
                                    </WrapPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <StackPanel
                            Grid.Row="1"
                            HorizontalAlignment="Right"
                            Orientation="Horizontal">
                            <Button
                                Click="AddSingleLabel"
                                Content="{x:Static lang:Resources.Add}"
                                Style="{StaticResource ButtonStyleFill}" />
                            <Button
                                Click="ClearSingleLabel"
                                Content="{x:Static lang:Resources.Clear}"
                                Style="{StaticResource ButtonStyleFill}" />
                            <Button
                                Click="DeleteSingleLabel"
                                Content="{x:Static lang:Resources.Delete}"
                                Style="{StaticResource ButtonStyleFill}" />
                        </StackPanel>




                    </Grid>


                </Grid>


            </Grid>
        </Grid>
    </Grid>
</chao:BaseWindow>
